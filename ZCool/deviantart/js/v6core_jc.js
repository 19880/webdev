/*
 *  Â© 2000-2010 deviantART, Inc. All rights reserved.
 */
if(!window.AutoExec){AutoExec=[]}Browser={};Browser.isKHTML=navigator.userAgent.indexOf("KHTML")>=0;Browser.isChrome=Browser.isKHTML&&navigator.userAgent.indexOf("Chrome")>=0;Browser.isSafari3=Browser.isKHTML&&!Browser.isChrome&&window.getMatchedCSSRules;Browser.isGecko=(!Browser.isKHTML)&&navigator.product=="Gecko";Browser.isFirefox3=Browser.isGecko&&navigator.userAgent.indexOf("Firefox/3")>=0;Browser.isTouch=Browser.isKHTML&&navigator.userAgent.indexOf("Safari")>=0&&navigator.userAgent.indexOf("Mobile")>=0;Browser.isIE=((!Browser.isGecko)&&navigator.cpuClass!=undefined&&navigator.appName=="Microsoft Internet Explorer");Browser.isIE55=Browser.isIE&&(document.onmousewheel==undefined);Browser.isOpera=((!(Browser.isIE||Browser.isGecko||Browser.isKHTML))&&document.attachEvent!=undefined);Browser.isMac=navigator.appVersion.indexOf("Mac")>=0;Browser.isWin=navigator.appVersion.indexOf("Windows")>=0;if(Browser.isWin){Browser.isWin2k=navigator.userAgent.indexOf("Windows NT 5.0")>=0}if(window.DWait){DWait.run("jms/lib/browser.js");
/*
    Base.js, version 1.1
    Copyright 2006-2007, Dean Edwards
    License: http://www.opensource.org/licenses/mit-license.php
*/
}if(!window.console){console={log:function(){},info:function(){}}}var Base=function(){};Base.extend=function(B,E){var F=Base.prototype.extend;Base._prototyping=true;var D=new this;F.call(D,B);delete Base._prototyping;var C=D.constructor;var A=D.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==A){this._constructing=true;C.apply(this,arguments);delete this._constructing}else{if(arguments[0]!=null){return(arguments[0].extend||F).call(arguments[0],D)}}}};A.ancestor=this;A.extend=this.extend;A.forEach=this.forEach;A.implement=this.implement;A.prototype=D;A.toString=this.toString;A.valueOf=function(G){return(G=="object")?A:C.valueOf()};F.call(A,E);if(typeof A.init=="function"){A.init()}return A};Base.prototype={extend:function(B,H){if(arguments.length>1){var E=this[B];if(E&&(typeof H=="function")&&(!E.valueOf||E.valueOf()!=H.valueOf())&&/\bbase\b/.test(H)){var A=H.valueOf();H=function(){var K=this.base||Base.prototype.base;this.base=E;var J=A.apply(this,arguments);this.base=K;return J};H.valueOf=function(J){return(J=="object")?H:A};H.toString=Base.toString}this[B]=H}else{if(B){var G=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){G=this.extend||G}var D={toSource:null};var F=["constructor","toString","valueOf"];var C=Base._prototyping?0:1;while(I=F[C++]){if(B[I]!=D[I]){G.call(this,I,B[I])}}for(var I in B){if(!D[I]){G.call(this,I,B[I])}}}}return this},base:function(){}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(A,D,C){for(var B in A){if(this.prototype[B]===undefined){D.call(C,A[B],B,A)}}},implement:function(){for(var A=0;A<arguments.length;A++){if(typeof arguments[A]=="function"){arguments[A](this.prototype)}else{this.prototype.extend(arguments[A])}}return this},toString:function(){return String(this.valueOf())}});if(window.DWait){DWait.run("jms/lib/Base.js")}BIND_FUNCTION_SOURCE="return arguments.callee._refunction_f.apply(arguments.callee._refunction_obj || this, arguments.callee._refunction_args ? (arguments.length ? bind.args(arguments.callee._refunction_args, arguments) : arguments.callee._refunction_args) : arguments);";function bind(E,D){var C,G,B,A,F;F=2;if(typeof this=="function"){F=1;C=this}else{C=D}G=new Function(BIND_FUNCTION_SOURCE);G._refunction_obj=E;G._refunction_f=C;A=[];for(B=F;B<arguments.length;B++){A.push(arguments[B])}if(A.length){G._refunction_args=A}return G}bind.cache=function(C,B){var D,A;D=bind.lookup(C,B);if(!D){D=bind(C,B);bind.storage.push([C,B,D])}return D};bind.storage=[];bind.release=function(B,A){return bind.lookup(B,A)};bind.lookup=function(E,D,C){var A,B;for(A=0;B=bind.storage[A];A++){if(B[0]==E&&B[1]==D){if(C){bind.storage.splice(A,1)}return B[2]}}return null};bind.args=function(C,B){var A;C=C.slice(0);for(A=0;A!=B.length;A++){C.push(B[A])}return C};Function.prototype.bindTo=bind;if(window.DWait){DWait.run("jms/lib/bind.js")}var StdLogger=Base.extend({constructor:function(A){this.enabled=true;this.logClass=A;this.logFunction=this.noOp;this.profileFunction=this.dreTimer;this.timerFunction=this.dreTimer;this.dreTimers=[];if(typeof inform!="undefined"){this.logFunction=this.jsUnitLog}else{if(Browser.isGecko){if(typeof console!="undefined"&&typeof console.log!="undefined"){this.logFunction=this.firebugLog}if(typeof console!="undefined"&&typeof console.profile!="undefined"){this.profileFunction=this.firebugProfile}if(typeof console!="undefined"&&typeof console.time!="undefined"){this.timerFunction=this.firebugTimer}}else{if(Browser.isKHTML){}}}},noOp:function(A,B){return },jsUnitLog:function(A,B){try{if(B){inform(this.logClass.toUpperCase()+":  "+A,B)}else{inform(this.logClass.toUpperCase()+":  "+A)}}finally{}},firebugLog:function(A,B){try{if(B){console.log(this.logClass.toUpperCase()+":  "+A,B)}else{console.log(this.logClass.toUpperCase()+":  "+A)}}finally{}},firebugProfile:function(A,C){try{var B=this.logClass.toUpperCase()+"."+A;if(C=="start"){console.profile(B)}else{console.profileEnd(B)}}finally{}},firebugTimer:function(A,C){try{var B=this.logClass.toUpperCase()+"."+A;if(C=="start"){console.time(B)}else{var D=console.timeEnd(B);return D}}finally{}},dreTimer:function(A,E){try{if(E=="start"){var D=(new Date()).getTime();this.dreTimers.push([A,D])}else{for(var B=0;B<this.dreTimers.length;B++){if(this.dreTimers[B][0]==A){var C=(new Date()).getTime();var F=C-this.dreTimers[B][1];this.log("PROFILE |"+A+"|: "+F+"ms.")}}}}finally{}},safariLog:function(B,C){if(C){B=B+"[OBJECT]"}try{window.console.log(this.logClass.toUpperCase()+":  "+B);if(C){}}catch(A){this.enabled=false}},log:function(message,obj){if(this.enabled){try{if(window.Profile&&deviantART.debug){eval("var logObj = {'"+this.logClass+"': '"+message+"'}");if(obj){logObj.obj=obj.toString().substr(0,150)}Profile.add("JS Logging",logObj)}var func=this.logFunction.bindTo(this);func(message,obj)}catch(err){this.enabled=false}}},talkback:function(C,E){try{var B=new Object();B.useragent=navigator.userAgent;B.url=location.href;B.attachedObject=E;this.log("__TALKBACK__ "+C,B);var A=[C,B];DiFi.pushPost("DREAlerts","alert",A,this.talkbackCallback.bindTo(this));DiFi.send()}catch(D){this.log("Error reporting talkback: ",D)}},talkbackCallback:function(B,A){if(!B){this.log("__TALKBACK__ ERROR MAKING DIFI CALL",A)}else{this.log("__TALKBACK__ Error reported via talkback",A)}},profileStart:function(A){if(this.enabled){var B=this.profileFunction.bindTo(this);B(A,"start")}},profileStop:function(A){if(this.enabled){var B=this.profileFunction.bindTo(this);var C=B(A,"stop");return C}return -1},timerStart:function(A){if(this.enabled){var B=this.timerFunction.bindTo(this);B(A,"start")}},timerStop:function(A){if(this.enabled){var B=this.timerFunction.bindTo(this);B(A,"stop")}}});function stdLog(A,B){logger=new StdLogger("StaticLoggingCall");logger.log(A,B)}function talkback(A,B){logger=new StdLogger("StaticTalkbackCall");logger.talkback(A,B)}function talkbackWrap(B){try{B()}catch(C){var A=new StdLogger("TalkbackWrap");var D="Caught Error: "+C.message;A.talkback(D,C)}}if(window.DWait){DWait.run("jms/lib/StdLogger.js");
/*
 * jQuery JavaScript Library v1.4.2
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Very slight modifications made by deviantART inc. (deviantART.com)
 *  -jQuery.ready takes a 'priority' argument, which weights the order they're executed in
 *  -errors in ready functions are suppressed & logged if appropriate
 *  -The IE onunload stuff was commented out because $pachunka hates it
 *  -a $j global is created, because we're lazy and already had prototype
 *
 * Date: Sat Feb 13 22:33:48 2010 -0500
 */
}(function(window,undefined){var jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},_jQuery=window.jQuery,_$=window.$,document=window.document,rootjQuery,quickExpr=/^[^<]*(<[\w\W]+>)[^>]*$|^#([\w-]+)$/,isSimple=/^.[^:#\[\.,]*$/,rnotwhite=/\S/,rtrim=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,userAgent=navigator.userAgent,browserMatch,readyBound=false,readyList=[],DOMContentLoaded,toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty,push=Array.prototype.push,slice=Array.prototype.slice,indexOf=Array.prototype.indexOf;jQuery.fn=jQuery.prototype={init:function(selector,context){var match,elem,ret,doc;if(!selector){return this}if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}if(selector==="body"&&!context){this.context=document;this[0]=document.body;this.selector="body";this.length=1;return this}if(typeof selector==="string"){match=quickExpr.exec(selector);if(match&&(match[1]||!context)){if(match[1]){doc=(context?context.ownerDocument||context:document);ret=rsingleTag.exec(selector);if(ret){if(jQuery.isPlainObject(context)){selector=[document.createElement(ret[1])];jQuery.fn.attr.call(selector,context,true)}else{selector=[doc.createElement(ret[1])]}}else{ret=buildFragment([match[1]],[doc]);selector=(ret.cacheable?ret.fragment.cloneNode(true):ret.fragment).childNodes}return jQuery.merge(this,selector)}else{elem=document.getElementById(match[2]);if(elem){if(elem.id!==match[2]){return rootjQuery.find(selector)}this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else{if(!context&&/^\w+$/.test(selector)){this.selector=selector;this.context=document;selector=document.getElementsByTagName(selector);return jQuery.merge(this,selector)}else{if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return jQuery(context).find(selector)}}}}else{if(jQuery.isFunction(selector)){return rootjQuery.ready(selector)}}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)},selector:"",jquery:"1.4.2",length:0,size:function(){return this.length},toArray:function(){return slice.call(this,0)},get:function(num){return num==null?this.toArray():(num<0?this.slice(num)[0]:this[num])},pushStack:function(elems,name,selector){var ret=jQuery();if(jQuery.isArray(elems)){push.apply(ret,elems)}else{jQuery.merge(ret,elems)}ret.prevObject=this;ret.context=this.context;if(name==="find"){ret.selector=this.selector+(this.selector?" ":"")+selector}else{if(name){ret.selector=this.selector+"."+name+"("+selector+")"}}return ret},each:function(callback,args){return jQuery.each(this,callback,args)},ready:function(fn,priority){jQuery.bindReady();if(jQuery.isReady){try{fn.call(document,jQuery)}catch(e){if(jQuery.browser.mozilla){if(typeof console!="undefined"&&typeof console.error!="undefined"){console.error("Error caught in ready function: ",e)}}else{if(jQuery.browser.safari){if(typeof window.console.log!="undefined"){window.console.log("Error in "+e.fileName+" line "+e.lineNumber+": "+e.message)}}}if(typeof dre!="undefined"&&typeof dre.warning!="undefined"){dre.warning("Error in "+e.fileName+" line "+e.lineNumber+": "+e.message)}}}else{if(readyList){readyList.push([priority,fn])}}return this},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(slice.apply(this,arguments),"slice",slice.call(arguments).join(","))},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},end:function(){return this.prevObject||jQuery(null)},push:push,sort:[].sort,splice:[].splice};jQuery.fn.init.prototype=jQuery.fn;jQuery.extend=jQuery.fn.extend=function(){var target=arguments[0]||{},i=1,length=arguments.length,deep=false,options,name,src,copy;if(typeof target==="boolean"){deep=target;target=arguments[1]||{};i=2}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(length===i){target=this;--i}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||jQuery.isArray(copy))){var clone=src&&(jQuery.isPlainObject(src)||jQuery.isArray(src))?src:jQuery.isArray(copy)?[]:{};target[name]=jQuery.extend(deep,clone,copy)}else{if(copy!==undefined){target[name]=copy}}}}}return target};jQuery.extend({noConflict:function(deep){window.$=_$;if(deep){window.jQuery=_jQuery}return jQuery},isReady:false,errorLog:function(mesg,obj){try{if(typeof console!="undefined"&&typeof console.error!="undefined"){console.error(mesg,obj)}else{if(typeof window.console!="undefined"&&typeof window.console.log!="undefined"){window.console.log(mesg)}}if(typeof dre!="undefined"&&typeof dre.warning!="undefined"){dre.warning(mesg)}}catch(e){}},ready:function(){if(!jQuery.isReady){if(!document.body){return setTimeout(jQuery.ready,13)}jQuery.isReady=true;try{readyList.sort(function(a,b){try{var res=a[0]-b[0];return res}catch(e){return 0}})}catch(e){jQuery.errorLog("Weird IE bug? "+ +e.fileName+" line "+e.lineNumber+": "+e.message,e)}if(readyList){var fn,i=0;while((fn=readyList[i++])){try{var func;if(jQuery.isArray(fn)){func=fn[1]}else{func=fn}func.call(document,jQuery)}catch(e){jQuery.errorLog("Error in "+e.fileName+" line "+e.lineNumber+": "+e.message,e);if(vms_feature("dre")){throw e}}}readyList=null}if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready")}}},bindReady:function(){if(readyBound){return }readyBound=true;if(document.readyState==="complete"){return jQuery.ready()}if(document.addEventListener){document.addEventListener("DOMContentLoaded",DOMContentLoaded,false);window.addEventListener("load",jQuery.ready,false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",DOMContentLoaded);window.attachEvent("onload",jQuery.ready);var toplevel=false;try{toplevel=window.frameElement==null}catch(e){}if(document.documentElement.doScroll&&toplevel){doScrollCheck()}}}},isFunction:function(obj){return toString.call(obj)==="[object Function]"},isArray:function(obj){return toString.call(obj)==="[object Array]"},isPlainObject:function(obj){if(!obj||toString.call(obj)!=="[object Object]"||obj.nodeType||obj.setInterval){return false}if(obj.constructor&&!hasOwnProperty.call(obj,"constructor")&&!hasOwnProperty.call(obj.constructor.prototype,"isPrototypeOf")){return false}var key;for(key in obj){}return key===undefined||hasOwnProperty.call(obj,key)},isEmptyObject:function(obj){for(var name in obj){return false}return true},error:function(msg){throw msg},parseJSON:function(data){if(typeof data!=="string"||!data){return null}data=jQuery.trim(data);if(/^[\],:{}\s]*$/.test(data.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return window.JSON&&window.JSON.parse?window.JSON.parse(data):(new Function("return "+data))()}else{jQuery.error("Invalid JSON: "+data)}},noop:function(){},globalEval:function(data){if(data&&rnotwhite.test(data)){var head=document.getElementsByTagName("head")[0]||document.documentElement,script=document.createElement("script");script.type="text/javascript";if(jQuery.support.scriptEval){script.appendChild(document.createTextNode(data))}else{script.text=data}head.insertBefore(script,head.firstChild);head.removeChild(script)}},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toUpperCase()===name.toUpperCase()},each:function(object,callback,args){var name,i=0,length=object.length,isObj=length===undefined||jQuery.isFunction(object);if(args){if(isObj){for(name in object){if(callback.apply(object[name],args)===false){break}}}else{for(;i<length;){if(callback.apply(object[i++],args)===false){break}}}}else{if(isObj){for(name in object){if(callback.call(object[name],name,object[name])===false){break}}}else{for(var value=object[0];i<length&&callback.call(value,i,value)!==false;value=object[++i]){}}}return object},trim:function(text){return(text||"").replace(rtrim,"")},makeArray:function(array,results){var ret=results||[];if(array!=null){if(array.length==null||typeof array==="string"||jQuery.isFunction(array)||(typeof array!=="function"&&array.setInterval)){push.call(ret,array)}else{jQuery.merge(ret,array)}}return ret},inArray:function(elem,array){if(array.indexOf){return array.indexOf(elem)}for(var i=0,length=array.length;i<length;i++){if(array[i]===elem){return i}}return -1},merge:function(first,second){var i=first.length,j=0;if(typeof second.length==="number"){for(var l=second.length;j<l;j++){first[i++]=second[j]}}else{while(second[j]!==undefined){first[i++]=second[j++]}}first.length=i;return first},grep:function(elems,callback,inv){var ret=[];for(var i=0,length=elems.length;i<length;i++){if(!inv!==!callback(elems[i],i)){ret.push(elems[i])}}return ret},map:function(elems,callback,arg){var ret=[],value;for(var i=0,length=elems.length;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret[ret.length]=value}}return ret.concat.apply([],ret)},guid:1,proxy:function(fn,proxy,thisObject){if(arguments.length===2){if(typeof proxy==="string"){thisObject=fn;fn=thisObject[proxy];proxy=undefined}else{if(proxy&&!jQuery.isFunction(proxy)){thisObject=proxy;proxy=undefined}}}if(!proxy&&fn){proxy=function(){return fn.apply(thisObject||this,arguments)}}if(fn){proxy.guid=fn.guid=fn.guid||proxy.guid||jQuery.guid++}return proxy},uaMatch:function(ua){ua=ua.toLowerCase();var match=/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||!/compatible/.test(ua)&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},browser:{}});browserMatch=jQuery.uaMatch(userAgent);if(browserMatch.browser){jQuery.browser[browserMatch.browser]=true;jQuery.browser.version=browserMatch.version}if(jQuery.browser.webkit){jQuery.browser.safari=true}if(indexOf){jQuery.inArray=function(elem,array){return indexOf.call(array,elem)}}rootjQuery=jQuery(document);if(document.addEventListener){DOMContentLoaded=function(){document.removeEventListener("DOMContentLoaded",DOMContentLoaded,false);jQuery.ready()}}else{if(document.attachEvent){DOMContentLoaded=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",DOMContentLoaded);jQuery.ready()}}}}function doScrollCheck(){if(jQuery.isReady){return }try{document.documentElement.doScroll("left")}catch(error){setTimeout(doScrollCheck,1);return }jQuery.ready()}function evalScript(i,elem){if(elem.src){jQuery.ajax({url:elem.src,async:false,dataType:"script"})}else{jQuery.globalEval(elem.text||elem.textContent||elem.innerHTML||"")}if(elem.parentNode){elem.parentNode.removeChild(elem)}}function access(elems,key,value,exec,fn,pass){var length=elems.length;if(typeof key==="object"){for(var k in key){access(elems,k,key[k],exec,fn,value)}return elems}if(value!==undefined){exec=!pass&&exec&&jQuery.isFunction(value);for(var i=0;i<length;i++){fn(elems[i],key,exec?value.call(elems[i],i,fn(elems[i],key)):value,pass)}return elems}return length?fn(elems[0],key):undefined}function now(){return(new Date).getTime()}(function(){jQuery.support={};var root=document.documentElement,script=document.createElement("script"),div=document.createElement("div"),id="script"+now();div.style.display="none";div.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var all=div.getElementsByTagName("*"),a=div.getElementsByTagName("a")[0];if(!all||!all.length||!a){return }jQuery.support={leadingWhitespace:div.firstChild.nodeType===3,tbody:!div.getElementsByTagName("tbody").length,htmlSerialize:!!div.getElementsByTagName("link").length,style:/red/.test(a.getAttribute("style")),hrefNormalized:a.getAttribute("href")==="/a",opacity:/^0.55$/.test(a.style.opacity),cssFloat:!!a.style.cssFloat,checkOn:div.getElementsByTagName("input")[0].value==="on",optSelected:document.createElement("select").appendChild(document.createElement("option")).selected,parentNode:div.removeChild(div.appendChild(document.createElement("div"))).parentNode===null,deleteExpando:true,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null};script.type="text/javascript";try{script.appendChild(document.createTextNode("window."+id+"=1;"))}catch(e){}root.insertBefore(script,root.firstChild);if(window[id]){jQuery.support.scriptEval=true;delete window[id]}try{delete script.test}catch(e){jQuery.support.deleteExpando=false}root.removeChild(script);if(div.attachEvent&&div.fireEvent){div.attachEvent("onclick",function click(){jQuery.support.noCloneEvent=false;div.detachEvent("onclick",click)});div.cloneNode(true).fireEvent("onclick")}div=document.createElement("div");div.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";var fragment=document.createDocumentFragment();fragment.appendChild(div.firstChild);jQuery.support.checkClone=fragment.cloneNode(true).cloneNode(true).lastChild.checked;jQuery(function(){var div=document.createElement("div");div.style.width=div.style.paddingLeft="1px";document.body.appendChild(div);jQuery.boxModel=jQuery.support.boxModel=div.offsetWidth===2;document.body.removeChild(div).style.display="none";div=null});var eventSupported=function(eventName){var el=document.createElement("div");eventName="on"+eventName;var isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,"return;");isSupported=typeof el[eventName]==="function"}el=null;return isSupported};jQuery.support.submitBubbles=eventSupported("submit");jQuery.support.changeBubbles=eventSupported("change");root=script=div=all=a=null})();jQuery.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};var expando="jQuery"+now(),uuid=0,windowData={};jQuery.extend({cache:{},expando:expando,noData:{embed:true,object:true,applet:true},data:function(elem,name,data){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){return }elem=elem==window?windowData:elem;var id=elem[expando],cache=jQuery.cache,thisCache;if(!id&&typeof name==="string"&&data===undefined){return null}if(!id){id=++uuid}if(typeof name==="object"){elem[expando]=id;thisCache=cache[id]=jQuery.extend(true,{},name)}else{if(!cache[id]){elem[expando]=id;cache[id]={}}}thisCache=cache[id];if(data!==undefined){thisCache[name]=data}return typeof name==="string"?thisCache[name]:thisCache},removeData:function(elem,name){if(elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()]){return }elem=elem==window?windowData:elem;var id=elem[expando],cache=jQuery.cache,thisCache=cache[id];if(name){if(thisCache){delete thisCache[name];if(jQuery.isEmptyObject(thisCache)){jQuery.removeData(elem)}}}else{if(jQuery.support.deleteExpando){delete elem[jQuery.expando]}else{if(elem.removeAttribute){elem.removeAttribute(jQuery.expando)}}delete cache[id]}}});jQuery.fn.extend({data:function(key,value){if(typeof key==="undefined"&&this.length){return jQuery.data(this[0])}else{if(typeof key==="object"){return this.each(function(){jQuery.data(this,key)})}}var parts=key.split(".");parts[1]=parts[1]?"."+parts[1]:"";if(value===undefined){var data=this.triggerHandler("getData"+parts[1]+"!",[parts[0]]);if(data===undefined&&this.length){data=jQuery.data(this[0],key)}return data===undefined&&parts[1]?this.data(parts[0]):data}else{return this.trigger("setData"+parts[1]+"!",[parts[0],value]).each(function(){jQuery.data(this,key,value)})}},removeData:function(key){return this.each(function(){jQuery.removeData(this,key)})}});jQuery.extend({queue:function(elem,type,data){if(!elem){return }type=(type||"fx")+"queue";var q=jQuery.data(elem,type);if(!data){return q||[]}if(!q||jQuery.isArray(data)){q=jQuery.data(elem,type,jQuery.makeArray(data))}else{q.push(data)}return q},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),fn=queue.shift();if(fn==="inprogress"){fn=queue.shift()}if(fn){if(type==="fx"){queue.unshift("inprogress")}fn.call(elem,function(){jQuery.dequeue(elem,type)})}}});jQuery.fn.extend({queue:function(type,data){if(typeof type!=="string"){data=type;type="fx"}if(data===undefined){return jQuery.queue(this[0],type)}return this.each(function(i,elem){var queue=jQuery.queue(this,type,data);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},delay:function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(){var elem=this;setTimeout(function(){jQuery.dequeue(elem,type)},time)})},clearQueue:function(type){return this.queue(type||"fx",[])}});var rclass=/[\n\t]/g,rspace=/\s+/,rreturn=/\r/g,rspecialurl=/href|src|style/,rtype=/(button|input)/i,rfocusable=/(button|input|object|select|textarea)/i,rclickable=/^(a|area)$/i,rradiocheck=/radio|checkbox/;jQuery.fn.extend({attr:function(name,value){return access(this,name,value,true,jQuery.attr)},removeAttr:function(name,fn){return this.each(function(){jQuery.attr(this,name,"");if(this.nodeType===1){this.removeAttribute(name)}})},addClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.addClass(value.call(this,i,self.attr("class")))})}if(value&&typeof value==="string"){var classNames=(value||"").split(rspace);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1){if(!elem.className){elem.className=value}else{var className=" "+elem.className+" ",setClass=elem.className;for(var c=0,cl=classNames.length;c<cl;c++){if(className.indexOf(" "+classNames[c]+" ")<0){setClass+=" "+classNames[c]}}elem.className=jQuery.trim(setClass)}}}}return this},removeClass:function(value){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.removeClass(value.call(this,i,self.attr("class")))})}if((value&&typeof value==="string")||value===undefined){var classNames=(value||"").split(rspace);for(var i=0,l=this.length;i<l;i++){var elem=this[i];if(elem.nodeType===1&&elem.className){if(value){var className=(" "+elem.className+" ").replace(rclass," ");for(var c=0,cl=classNames.length;c<cl;c++){className=className.replace(" "+classNames[c]+" "," ")}elem.className=jQuery.trim(className)}else{elem.className=""}}}}return this},toggleClass:function(value,stateVal){var type=typeof value,isBool=typeof stateVal==="boolean";if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);self.toggleClass(value.call(this,i,self.attr("class"),stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),state=stateVal,classNames=value.split(rspace);while((className=classNames[i++])){state=isBool?state:!self.hasClass(className);self[state?"addClass":"removeClass"](className)}}else{if(type==="undefined"||type==="boolean"){if(this.className){jQuery.data(this,"__className__",this.className)}this.className=this.className||value===false?"":jQuery.data(this,"__className__")||""}}})},hasClass:function(selector){var className=" "+selector+" ";for(var i=0,l=this.length;i<l;i++){if((" "+this[i].className+" ").replace(rclass," ").indexOf(className)>-1){return true}}return false},val:function(value){if(value===undefined){var elem=this[0];if(elem){if(jQuery.nodeName(elem,"option")){return(elem.attributes.value||{}).specified?elem.value:elem.text}if(jQuery.nodeName(elem,"select")){var index=elem.selectedIndex,values=[],options=elem.options,one=elem.type==="select-one";if(index<0){return null}for(var i=one?index:0,max=one?index+1:options.length;i<max;i++){var option=options[i];if(option.selected){value=jQuery(option).val();if(one){return value}values.push(value)}}return values}if(rradiocheck.test(elem.type)&&!jQuery.support.checkOn){return elem.getAttribute("value")===null?"on":elem.value}return(elem.value||"").replace(rreturn,"")}return undefined}var isFunction=jQuery.isFunction(value);return this.each(function(i){var self=jQuery(this),val=value;if(this.nodeType!==1){return }if(isFunction){val=value.call(this,i,self.val())}if(typeof val==="number"){val+=""}if(jQuery.isArray(val)&&rradiocheck.test(this.type)){this.checked=jQuery.inArray(self.val(),val)>=0}else{if(jQuery.nodeName(this,"select")){var values=jQuery.makeArray(val);jQuery("option",this).each(function(){this.selected=jQuery.inArray(jQuery(this).val(),values)>=0});if(!values.length){this.selectedIndex=-1}}else{this.value=val}}})}});jQuery.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(elem,name,value,pass){if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined}if(pass&&name in jQuery.attrFn){return jQuery(elem)[name](value)}var notxml=elem.nodeType!==1||!jQuery.isXMLDoc(elem),set=value!==undefined;name=notxml&&jQuery.props[name]||name;if(elem.nodeType===1){var special=rspecialurl.test(name);if(name==="selected"&&!jQuery.support.optSelected){var parent=elem.parentNode;if(parent){parent.selectedIndex;if(parent.parentNode){parent.parentNode.selectedIndex}}}if(name in elem&&notxml&&!special){if(set){if(name==="type"&&rtype.test(elem.nodeName)&&elem.parentNode){jQuery.error("type property can't be changed")}elem[name]=value}if(jQuery.nodeName(elem,"form")&&elem.getAttributeNode(name)){return elem.getAttributeNode(name).nodeValue}if(name==="tabIndex"){var attributeNode=elem.getAttributeNode("tabIndex");return attributeNode&&attributeNode.specified?attributeNode.value:rfocusable.test(elem.nodeName)||rclickable.test(elem.nodeName)&&elem.href?0:undefined}return elem[name]}if(!jQuery.support.style&&notxml&&name==="style"){if(set){elem.style.cssText=""+value}return elem.style.cssText}if(set){elem.setAttribute(name,""+value)}var attr=!jQuery.support.hrefNormalized&&notxml&&special?elem.getAttribute(name,2):elem.getAttribute(name);return attr===null?undefined:attr}return jQuery.style(elem,name,value)}});var rnamespaces=/\.(.*)$/,fcleanup=function(nm){return nm.replace(/[^\w\s\.\|`]/g,function(ch){return"\\"+ch})};jQuery.event={add:function(elem,types,handler,data){if(elem.nodeType===3||elem.nodeType===8){return }if(elem.setInterval&&(elem!==window&&!elem.frameElement)){elem=window}var handleObjIn,handleObj;if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler}if(!handler.guid){handler.guid=jQuery.guid++}var elemData=jQuery.data(elem);if(!elemData){return }var events=elemData.events=elemData.events||{},eventHandle=elemData.handle,eventHandle;if(!eventHandle){elemData.handle=eventHandle=function(){return typeof jQuery!=="undefined"&&!jQuery.event.triggered?jQuery.event.handle.apply(eventHandle.elem,arguments):undefined}}eventHandle.elem=elem;types=types.split(" ");var type,i=0,namespaces;while((type=types[i++])){handleObj=handleObjIn?jQuery.extend({},handleObjIn):{handler:handler,data:data};if(type.indexOf(".")>-1){namespaces=type.split(".");type=namespaces.shift();handleObj.namespace=namespaces.slice(0).sort().join(".")}else{namespaces=[];handleObj.namespace=""}handleObj.type=type;handleObj.guid=handler.guid;var handlers=events[type],special=jQuery.event.special[type]||{};if(!handlers){handlers=events[type]=[];if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}else{if(elem.attachEvent){elem.attachEvent("on"+type,eventHandle)}}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}handlers.push(handleObj);jQuery.event.global[type]=true}elem=null},global:{},remove:function(elem,types,handler,pos){if(elem.nodeType===3||elem.nodeType===8){return }var ret,type,fn,i=0,all,namespaces,namespace,special,eventType,handleObj,origType,elemData=jQuery.data(elem),events=elemData&&elemData.events;if(!elemData||!events){return }if(types&&types.type){handler=types.handler;types=types.type}if(!types||typeof types==="string"&&types.charAt(0)==="."){types=types||"";for(type in events){jQuery.event.remove(elem,type+types)}return }types=types.split(" ");while((type=types[i++])){origType=type;handleObj=null;all=type.indexOf(".")<0;namespaces=[];if(!all){namespaces=type.split(".");type=namespaces.shift();namespace=new RegExp("(^|\\.)"+jQuery.map(namespaces.slice(0).sort(),fcleanup).join("\\.(?:.*\\.)?")+"(\\.|$)")}eventType=events[type];if(!eventType){continue}if(!handler){for(var j=0;j<eventType.length;j++){handleObj=eventType[j];if(all||namespace.test(handleObj.namespace)){jQuery.event.remove(elem,origType,handleObj.handler,j);eventType.splice(j--,1)}}continue}special=jQuery.event.special[type]||{};for(var j=pos||0;j<eventType.length;j++){handleObj=eventType[j];if(handler.guid===handleObj.guid){if(all||namespace.test(handleObj.namespace)){if(pos==null){eventType.splice(j--,1)}if(special.remove){special.remove.call(elem,handleObj)}}if(pos!=null){break}}}if(eventType.length===0||pos!=null&&eventType.length===1){if(!special.teardown||special.teardown.call(elem,namespaces)===false){removeEvent(elem,type,elemData.handle)}ret=null;delete events[type]}}if(jQuery.isEmptyObject(events)){var handle=elemData.handle;if(handle){handle.elem=null}delete elemData.events;delete elemData.handle;if(jQuery.isEmptyObject(elemData)){jQuery.removeData(elem)}}},trigger:function(event,data,elem){var type=event.type||event,bubbling=arguments[3];if(!bubbling){event=typeof event==="object"?event[expando]?event:jQuery.extend(jQuery.Event(type),event):jQuery.Event(type);if(type.indexOf("!")>=0){event.type=type=type.slice(0,-1);event.exclusive=true}if(!elem){event.stopPropagation();if(jQuery.event.global[type]){jQuery.each(jQuery.cache,function(){if(this.events&&this.events[type]){jQuery.event.trigger(event,data,this.handle.elem)}})}}if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined}event.result=undefined;event.target=elem;data=jQuery.makeArray(data);data.unshift(event)}event.currentTarget=elem;var handle=jQuery.data(elem,"handle");if(handle){handle.apply(elem,data)}var parent=elem.parentNode||elem.ownerDocument;try{if(!(elem&&elem.nodeName&&jQuery.noData[elem.nodeName.toLowerCase()])){if(elem["on"+type]&&elem["on"+type].apply(elem,data)===false){event.result=false}}}catch(e){}if(!event.isPropagationStopped()&&parent){jQuery.event.trigger(event,data,parent,true)}else{if(!event.isDefaultPrevented()){var target=event.target,old,isClick=jQuery.nodeName(target,"a")&&type==="click",special=jQuery.event.special[type]||{};if((!special._default||special._default.call(elem,event)===false)&&!isClick&&!(target&&target.nodeName&&jQuery.noData[target.nodeName.toLowerCase()])){try{if(target[type]){old=target["on"+type];if(old){target["on"+type]=null}jQuery.event.triggered=true;target[type]()}}catch(e){}if(old){target["on"+type]=old}jQuery.event.triggered=false}}}},handle:function(event){var all,handlers,namespaces,namespace,events;event=arguments[0]=jQuery.event.fix(event||window.event);event.currentTarget=this;all=event.type.indexOf(".")<0&&!event.exclusive;if(!all){namespaces=event.type.split(".");event.type=namespaces.shift();namespace=new RegExp("(^|\\.)"+namespaces.slice(0).sort().join("\\.(?:.*\\.)?")+"(\\.|$)")}var events=jQuery.data(this,"events"),handlers=events[event.type];if(events&&handlers){handlers=handlers.slice(0);for(var j=0,l=handlers.length;j<l;j++){var handleObj=handlers[j];if(all||namespace.test(handleObj.namespace)){event.handler=handleObj.handler;event.data=handleObj.data;event.handleObj=handleObj;var ret=handleObj.handler.apply(this,arguments);if(ret!==undefined){event.result=ret;if(ret===false){event.preventDefault();event.stopPropagation()}}if(event.isImmediatePropagationStopped()){break}}}}return event.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(event){if(event[expando]){return event}var originalEvent=event;event=jQuery.Event(originalEvent);for(var i=this.props.length,prop;i;){prop=this.props[--i];event[prop]=originalEvent[prop]}if(!event.target){event.target=event.srcElement||document}if(event.target.nodeType===3){event.target=event.target.parentNode}if(!event.relatedTarget&&event.fromElement){event.relatedTarget=event.fromElement===event.target?event.toElement:event.fromElement}if(event.pageX==null&&event.clientX!=null){var doc=document.documentElement,body=document.body;event.pageX=event.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=event.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&((event.charCode||event.charCode===0)?event.charCode:event.keyCode)){event.which=event.charCode||event.keyCode}if(!event.metaKey&&event.ctrlKey){event.metaKey=event.ctrlKey}if(!event.which&&event.button!==undefined){event.which=(event.button&1?1:(event.button&2?3:(event.button&4?2:0)))}return event},guid:100000000,proxy:jQuery.proxy,special:{ready:{setup:jQuery.bindReady,teardown:jQuery.noop},live:{add:function(handleObj){jQuery.event.add(this,handleObj.origType,jQuery.extend({},handleObj,{handler:liveHandler}))},remove:function(handleObj){var remove=true,type=handleObj.origType.replace(rnamespaces,"");jQuery.each(jQuery.data(this,"events").live||[],function(){if(type===this.origType.replace(rnamespaces,"")){remove=false;return false}});if(remove){jQuery.event.remove(this,handleObj.origType,liveHandler)}}},beforeunload:{setup:function(data,namespaces,eventHandle){if(this.setInterval){this.onbeforeunload=eventHandle}return false},teardown:function(namespaces,eventHandle){if(this.onbeforeunload===eventHandle){this.onbeforeunload=null}}}}};var removeEvent=document.removeEventListener?function(elem,type,handle){elem.removeEventListener(type,handle,false)}:function(elem,type,handle){elem.detachEvent("on"+type,handle)};jQuery.Event=function(src){if(!this.preventDefault){return new jQuery.Event(src)}if(src&&src.type){this.originalEvent=src;this.type=src.type}else{this.type=src}this.timeStamp=now();this[expando]=true};function returnFalse(){return false}function returnTrue(){return true}jQuery.Event.prototype={preventDefault:function(){this.isDefaultPrevented=returnTrue;var e=this.originalEvent;if(!e){return }if(e.preventDefault){e.preventDefault()}e.returnValue=false},stopPropagation:function(){this.isPropagationStopped=returnTrue;var e=this.originalEvent;if(!e){return }if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=returnTrue;this.stopPropagation()},isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse};var withinElement=function(event){var parent=event.relatedTarget;try{while(parent&&parent!==this){parent=parent.parentNode}if(parent!==this){event.type=event.data;jQuery.event.handle.apply(this,arguments)}}catch(e){}},delegate=function(event){event.type=event.data;jQuery.event.handle.apply(this,arguments)};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(orig,fix){jQuery.event.special[orig]={setup:function(data){jQuery.event.add(this,fix,data&&data.selector?delegate:withinElement,orig)},teardown:function(data){jQuery.event.remove(this,fix,data&&data.selector?delegate:withinElement)}}});if(!jQuery.support.submitBubbles){jQuery.event.special.submit={setup:function(data,namespaces){if(this.nodeName.toLowerCase()!=="form"){jQuery.event.add(this,"click.specialSubmit",function(e){var elem=e.target,type=elem.type;if((type==="submit"||type==="image")&&jQuery(elem).closest("form").length){return trigger("submit",this,arguments)}});jQuery.event.add(this,"keypress.specialSubmit",function(e){var elem=e.target,type=elem.type;if((type==="text"||type==="password")&&jQuery(elem).closest("form").length&&e.keyCode===13){return trigger("submit",this,arguments)}})}else{return false}},teardown:function(namespaces){jQuery.event.remove(this,".specialSubmit")}}}if(!jQuery.support.changeBubbles){var formElems=/textarea|input|select/i,changeFilters,getVal=function(elem){var type=elem.type,val=elem.value;if(type==="radio"||type==="checkbox"){val=elem.checked}else{if(type==="select-multiple"){val=elem.selectedIndex>-1?jQuery.map(elem.options,function(elem){return elem.selected}).join("-"):""}else{if(elem.nodeName.toLowerCase()==="select"){val=elem.selectedIndex}}}return val},testChange=function testChange(e){var elem=e.target,data,val;if(!formElems.test(elem.nodeName)||elem.readOnly){return }data=jQuery.data(elem,"_change_data");val=getVal(elem);if(e.type!=="focusout"||elem.type!=="radio"){jQuery.data(elem,"_change_data",val)}if(data===undefined||val===data){return }if(data!=null||val){e.type="change";return jQuery.event.trigger(e,arguments[1],elem)}};jQuery.event.special.change={filters:{focusout:testChange,click:function(e){var elem=e.target,type=elem.type;if(type==="radio"||type==="checkbox"||elem.nodeName.toLowerCase()==="select"){return testChange.call(this,e)}},keydown:function(e){var elem=e.target,type=elem.type;if((e.keyCode===13&&elem.nodeName.toLowerCase()!=="textarea")||(e.keyCode===32&&(type==="checkbox"||type==="radio"))||type==="select-multiple"){return testChange.call(this,e)}},beforeactivate:function(e){var elem=e.target;jQuery.data(elem,"_change_data",getVal(elem))}},setup:function(data,namespaces){if(this.type==="file"){return false}for(var type in changeFilters){jQuery.event.add(this,type+".specialChange",changeFilters[type])}return formElems.test(this.nodeName)},teardown:function(namespaces){jQuery.event.remove(this,".specialChange");return formElems.test(this.nodeName)}};changeFilters=jQuery.event.special.change.filters}function trigger(type,elem,args){args[0].type=type;return jQuery.event.handle.apply(elem,args)}if(document.addEventListener){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){jQuery.event.special[fix]={setup:function(){this.addEventListener(orig,handler,true)},teardown:function(){this.removeEventListener(orig,handler,true)}};function handler(e){e=jQuery.event.fix(e);e.type=fix;return jQuery.event.handle.call(this,e)}})}jQuery.each(["bind","one"],function(i,name){jQuery.fn[name]=function(type,data,fn){if(typeof type==="object"){for(var key in type){this[name](key,data,type[key],fn)}return this}if(jQuery.isFunction(data)){fn=data;data=undefined}var handler=name==="one"?jQuery.proxy(fn,function(event){jQuery(this).unbind(event,handler);return fn.apply(this,arguments)}):fn;if(type==="unload"&&name!=="one"){this.one(type,data,fn)}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.add(this[i],type,handler,data)}}return this}});jQuery.fn.extend({unbind:function(type,fn){if(typeof type==="object"&&!type.preventDefault){for(var key in type){this.unbind(key,type[key])}}else{for(var i=0,l=this.length;i<l;i++){jQuery.event.remove(this[i],type,fn)}}return this},delegate:function(selector,types,data,fn){return this.live(types,data,fn,selector)},undelegate:function(selector,types,fn){if(arguments.length===0){return this.unbind("live")}else{return this.die(types,null,fn,selector)}},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){if(this[0]){var event=jQuery.Event(type);event.preventDefault();event.stopPropagation();jQuery.event.trigger(event,data,this[0]);return event.result}},toggle:function(fn){var args=arguments,i=1;while(i<args.length){jQuery.proxy(fn,args[i++])}return this.click(jQuery.proxy(fn,function(event){var lastToggle=(jQuery.data(this,"lastToggle"+fn.guid)||0)%i;jQuery.data(this,"lastToggle"+fn.guid,lastToggle+1);event.preventDefault();return args[lastToggle].apply(this,arguments)||false}))},hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)}});var liveMap={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};jQuery.each(["live","die"],function(i,name){jQuery.fn[name]=function(types,data,fn,origSelector){var type,i=0,match,namespaces,preType,selector=origSelector||this.selector,context=origSelector?this:jQuery(this.context);if(jQuery.isFunction(data)){fn=data;data=undefined}types=(types||"").split(" ");while((type=types[i++])!=null){match=rnamespaces.exec(type);namespaces="";if(match){namespaces=match[0];type=type.replace(rnamespaces,"")}if(type==="hover"){types.push("mouseenter"+namespaces,"mouseleave"+namespaces);continue}preType=type;if(type==="focus"||type==="blur"){types.push(liveMap[type]+namespaces);type=type+namespaces}else{type=(liveMap[type]||type)+namespaces}if(name==="live"){context.each(function(){jQuery.event.add(this,liveConvert(type,selector),{data:data,selector:selector,handler:fn,origType:type,origHandler:fn,preType:preType})})}else{context.unbind(liveConvert(type,selector),fn)}}return this}});function liveHandler(event){var stop,elems=[],selectors=[],args=arguments,related,match,handleObj,elem,j,i,l,data,events=jQuery.data(this,"events");if(event.liveFired===this||!events||!events.live||event.button&&event.type==="click"){return }event.liveFired=this;var live=events.live.slice(0);for(j=0;j<live.length;j++){handleObj=live[j];if(handleObj.origType.replace(rnamespaces,"")===event.type){selectors.push(handleObj.selector)}else{live.splice(j--,1)}}match=jQuery(event.target).closest(selectors,event.currentTarget);for(i=0,l=match.length;i<l;i++){for(j=0;j<live.length;j++){handleObj=live[j];if(match[i].selector===handleObj.selector){elem=match[i].elem;related=null;if(handleObj.preType==="mouseenter"||handleObj.preType==="mouseleave"){related=jQuery(event.relatedTarget).closest(handleObj.selector)[0]}if(!related||related!==elem){elems.push({elem:elem,handleObj:handleObj})}}}}for(i=0,l=elems.length;i<l;i++){match=elems[i];event.currentTarget=match.elem;event.data=match.handleObj.data;event.handleObj=match.handleObj;if(match.handleObj.origHandler.apply(match.elem,args)===false){stop=false;break}}return stop}function liveConvert(type,selector){return"live."+(type&&type!=="*"?type+".":"")+selector.replace(/\./g,"`").replace(/ /g,"&")}jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(i,name){jQuery.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name)};if(jQuery.attrFn){jQuery.attrFn[name]=true}});
/*
 * Sizzle CSS Selector Engine - v1.0
 *  Copyright 2009, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^[\]]*\]|['"][^'"]*['"]|[^[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];var origContext=context=context||document;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var parts=[],m,set,checkSet,extra,prune=true,contextXML=isXML(context),soFar=selector;while((chunker.exec(""),m=chunker.exec(soFar))!==null){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){var ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){var ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){var cur=parts.pop(),pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){Sizzle.error(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else{if(context&&context.nodeType===1){for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&contains(context,checkSet[i]))){results.push(set[i])}}}else{for(var i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.find=function(expr,context,isXML){var set,match;if(!expr){return[]}for(var i=0,l=Expr.order.length;i<l;i++){var type=Expr.order[i],match;if((match=Expr.leftMatch[type].exec(expr))){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=context.getElementsByTagName("*")}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var old=expr,result=[],curLoop=set,match,anyFound,isXMLFilter=set&&set[0]&&isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var filter=Expr.filter[type],found,item,left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue}if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else{if(match===true){continue}}}if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else{if(pass){result.push(item);anyFound=true}}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){Sizzle.error(expr)}else{break}}old=expr}return curLoop};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if((elem=checkSet[i])){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var isPartStr=typeof part==="string";if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){var nodeCheck=part=part.toLowerCase();checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else{if(inplace){curLoop[i]=false}}}}return false},ID:function(match){return match[1].replace(/\\/g,"")},TAG:function(match,curLoop){return match[1].toLowerCase()},CHILD:function(match){if(match[1]==="nth"){var test=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=(test[1]+(test[2]||1))-0;match[3]=test[3]-0}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else{if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true},parent:function(elem){return !!elem.firstChild},empty:function(elem){return !elem.firstChild},has:function(elem,i,match){return !!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){return"text"===elem.type},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button"},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else{if(name==="contains"){return(elem.textContent||elem.innerText||getText([elem])||"").indexOf(match[3])>=0}else{if(name==="not"){var not=match[3];for(var i=0,l=not.length;i<l;i++){if(not[i]===elem){return false}}return true}else{Sizzle.error("Syntax error, unrecognized expression: "+name)}}}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while((node=node.previousSibling)){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while((node=node.nextSibling)){if(node.nodeType===1){return false}}return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent.sizcache=doneName}var diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return(diff%first===0&&diff/first>=0)}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return(match==="*"&&elem.nodeType===1)||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS;for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,function(all,num){return"\\"+(num-0+1)}))}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var i=0,l=array.length;i<l;i++){ret.push(array[i])}}else{for(var i=0;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(!a.compareDocumentPosition||!b.compareDocumentPosition){if(a==b){hasDuplicate=true}return a.compareDocumentPosition?-1:1}var ret=a.compareDocumentPosition(b)&4?-1:a===b?0:1;if(ret===0){hasDuplicate=true}return ret}}else{if("sourceIndex" in document.documentElement){sortOrder=function(a,b){if(!a.sourceIndex||!b.sourceIndex){if(a==b){hasDuplicate=true}return a.sourceIndex?-1:1}var ret=a.sourceIndex-b.sourceIndex;if(ret===0){hasDuplicate=true}return ret}}else{if(document.createRange){sortOrder=function(a,b){if(!a.ownerDocument||!b.ownerDocument){if(a==b){hasDuplicate=true}return a.ownerDocument?-1:1}var aRange=a.ownerDocument.createRange(),bRange=b.ownerDocument.createRange();aRange.setStart(a,0);aRange.setEnd(a,0);bRange.setStart(b,0);bRange.setEnd(b,0);var ret=aRange.compareBoundaryPoints(Range.START_TO_END,bRange);if(ret===0){hasDuplicate=true}return ret}}}}function getText(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue}else{if(elem.nodeType!==8){ret+=getText(elem.childNodes)}}}return ret}(function(){var form=document.createElement("div"),id="script"+(new Date).getTime();form.innerHTML="<a name='"+id+"'/>";var root=document.documentElement;root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div");div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return }Sizzle=function(query,context,extra,seed){context=context||document;if(!seed&&context.nodeType===9&&!isXML(context)){try{return makeArray(context.querySelectorAll(query),extra)}catch(e){}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null})()}(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return }div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return }Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){elem=elem[dir];var match=false;while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else{if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}}elem=elem[dir]}checkSet[i]=match}}}var contains=document.compareDocumentPosition?function(a,b){return !!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};var isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context){var tmpSet=[],later="",match,root=context.nodeType?[context]:context;while((match=Expr.match.PSEUDO.exec(selector))){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet)}return Sizzle.filter(later,tmpSet)};jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.filters;jQuery.unique=Sizzle.uniqueSort;jQuery.text=getText;jQuery.isXMLDoc=isXML;jQuery.contains=contains;return ;window.Sizzle=Sizzle})();var runtil=/Until$/,rparentsprev=/^(?:parents|prevUntil|prevAll)/,rmultiselector=/,/,slice=Array.prototype.slice;var winnow=function(elements,qualifier,keep){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return !!qualifier.call(elem,i,elem)===keep})}else{if(qualifier.nodeType){return jQuery.grep(elements,function(elem,i){return(elem===qualifier)===keep})}else{if(typeof qualifier==="string"){var filtered=jQuery.grep(elements,function(elem){return elem.nodeType===1});if(isSimple.test(qualifier)){return jQuery.filter(qualifier,filtered,!keep)}else{qualifier=jQuery.filter(qualifier,filtered)}}}}return jQuery.grep(elements,function(elem,i){return(jQuery.inArray(elem,qualifier)>=0)===keep})};jQuery.fn.extend({find:function(selector){var ret=this.pushStack("","find",selector),length=0;for(var i=0,l=this.length;i<l;i++){length=ret.length;jQuery.find(selector,this[i],ret);if(i>0){for(var n=length;n<ret.length;n++){for(var r=0;r<length;r++){if(ret[r]===ret[n]){ret.splice(n--,1);break}}}}}return ret},has:function(target){var targets=jQuery(target);return this.filter(function(){for(var i=0,l=targets.length;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},not:function(selector){return this.pushStack(winnow(this,selector,false),"not",selector)},filter:function(selector){return this.pushStack(winnow(this,selector,true),"filter",selector)},is:function(selector){return !!selector&&jQuery.filter(selector,this).length>0},closest:function(selectors,context){if(jQuery.isArray(selectors)){var ret=[],cur=this[0],match,matches={},selector;if(cur&&selectors.length){for(var i=0,l=selectors.length;i<l;i++){selector=selectors[i];if(!matches[selector]){matches[selector]=jQuery.expr.match.POS.test(selector)?jQuery(selector,context||this.context):selector}}while(cur&&cur.ownerDocument&&cur!==context){for(selector in matches){match=matches[selector];if(match.jquery?match.index(cur)>-1:jQuery(cur).is(match)){ret.push({selector:selector,elem:cur});delete matches[selector]}}cur=cur.parentNode}}return ret}var pos=jQuery.expr.match.POS.test(selectors)?jQuery(selectors,context||this.context):null;return this.map(function(i,cur){while(cur&&cur.ownerDocument&&cur!==context){if(pos?pos.index(cur)>-1:jQuery(cur).is(selectors)){return cur}cur=cur.parentNode}return null})},index:function(elem){if(!elem||typeof elem==="string"){return jQuery.inArray(this[0],elem?jQuery(elem):this.parent().children())}return jQuery.inArray(elem.jquery?elem[0]:elem,this)},add:function(selector,context){var set=typeof selector==="string"?jQuery(selector,context||this.context):jQuery.makeArray(selector),all=jQuery.merge(this.get(),set);return this.pushStack(isDisconnected(set[0])||isDisconnected(all[0])?all:jQuery.unique(all))},andSelf:function(){return this.add(this.prevObject)}});function isDisconnected(node){return !node||!node.parentNode||node.parentNode.nodeType===11}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return jQuery.nth(elem,2,"nextSibling")},prev:function(elem){return jQuery.nth(elem,2,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling(elem.parentNode.firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return jQuery.nodeName(elem,"iframe")?elem.contentDocument||elem.contentWindow.document:jQuery.makeArray(elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var ret=jQuery.map(this,fn,until);if(!runtil.test(name)){selector=until}if(selector&&typeof selector==="string"){ret=jQuery.filter(selector,ret)}ret=this.length>1?jQuery.unique(ret):ret;if((this.length>1||rmultiselector.test(selector))&&rparentsprev.test(name)){ret=ret.reverse()}return this.pushStack(ret,name,slice.call(arguments).join(","))}});jQuery.extend({filter:function(expr,elems,not){if(not){expr=":not("+expr+")"}return jQuery.find.matches(expr,elems)},dir:function(elem,dir,until){var matched=[],cur=elem[dir];while(cur&&cur.nodeType!==9&&(until===undefined||cur.nodeType!==1||!jQuery(cur).is(until))){if(cur.nodeType===1){matched.push(cur)}cur=cur[dir]}return matched},nth:function(cur,result,dir,elem){result=result||1;var num=0;for(;cur;cur=cur[dir]){if(cur.nodeType===1&&++num===result){break}}return cur},sibling:function(n,elem){var r=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){r.push(n)}}return r}});var rinlinejQuery=/ jQuery\d+="(?:\d+|null)"/g,rleadingWhitespace=/^\s+/,rxhtmlTag=/(<([\w:]+)[^>]*?)\/>/g,rselfClosing=/^(?:area|br|col|embed|hr|img|input|link|meta|param)$/i,rtagName=/<([\w:]+)/,rtbody=/<tbody/i,rhtml=/<|&#?\w+;/,rnocache=/<script|<object|<embed|<option|<style/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,fcloseTag=function(all,front,tag){return rselfClosing.test(tag)?all:front+"></"+tag+">"},wrapMap={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;if(!jQuery.support.htmlSerialize){wrapMap._default=[1,"div<div>","</div>"]}jQuery.fn.extend({text:function(text){if(jQuery.isFunction(text)){return this.each(function(i){var self=jQuery(this);self.text(text.call(this,i,self.text()))})}if(typeof text!=="object"&&text!==undefined){return this.empty().append((this[0]&&this[0].ownerDocument||document).createTextNode(text))}return jQuery.text(this)},wrapAll:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){var wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstChild&&elem.firstChild.nodeType===1){elem=elem.firstChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){return this.each(function(){jQuery(this).wrapAll(html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,true,function(elem){if(this.nodeType===1){this.insertBefore(elem,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this)})}else{if(arguments.length){var set=jQuery(arguments[0]);set.push.apply(set,this.toArray());return this.pushStack(set,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(elem){this.parentNode.insertBefore(elem,this.nextSibling)})}else{if(arguments.length){var set=this.pushStack(this,"after",arguments);set.push.apply(set,jQuery(arguments[0]).toArray());return set}}},remove:function(selector,keepData){for(var i=0,elem;(elem=this[i])!=null;i++){if(!selector||jQuery.filter(selector,[elem]).length){if(!keepData&&elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"));jQuery.cleanData([elem])}if(elem.parentNode){elem.parentNode.removeChild(elem)}}}return this},empty:function(){for(var i=0,elem;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(elem.getElementsByTagName("*"))}while(elem.firstChild){elem.removeChild(elem.firstChild)}}return this},clone:function(events){var ret=this.map(function(){if(!jQuery.support.noCloneEvent&&!jQuery.isXMLDoc(this)){var html=this.outerHTML,ownerDocument=this.ownerDocument;if(!html){var div=ownerDocument.createElement("div");div.appendChild(this.cloneNode(true));html=div.innerHTML}return jQuery.clean([html.replace(rinlinejQuery,"").replace(/=([^="'>\s]+\/)>/g,'="$1">').replace(rleadingWhitespace,"")],ownerDocument)[0]}else{return this.cloneNode(true)}});if(events===true){cloneCopyEvent(this,ret);cloneCopyEvent(this.find("*"),ret.find("*"))}return ret},html:function(value){if(value===undefined){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(rinlinejQuery,""):null}else{if(typeof value==="string"&&!rnocache.test(value)&&(jQuery.support.leadingWhitespace||!rleadingWhitespace.test(value))&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,fcloseTag);try{for(var i=0,l=this.length;i<l;i++){if(this[i].nodeType===1){jQuery.cleanData(this[i].getElementsByTagName("*"));this[i].innerHTML=value}}}catch(e){this.empty().append(value)}}else{if(jQuery.isFunction(value)){this.each(function(i){var self=jQuery(this),old=self.html();self.empty().append(function(){return value.call(this,i,old)})})}else{this.empty().append(value)}}}return this},replaceWith:function(value){if(this[0]&&this[0].parentNode){if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this),old=self.html();self.replaceWith(value.call(this,i,old))})}if(typeof value!=="string"){value=jQuery(value).detach()}return this.each(function(){var next=this.nextSibling,parent=this.parentNode;jQuery(this).remove();if(next){jQuery(next).before(value)}else{jQuery(parent).append(value)}})}else{return this.pushStack(jQuery(jQuery.isFunction(value)?value():value),"replaceWith",value)}},detach:function(selector){return this.remove(selector,true)},domManip:function(args,table,callback){var results,first,value=args[0],scripts=[],fragment,parent;if(!jQuery.support.checkClone&&arguments.length===3&&typeof value==="string"&&rchecked.test(value)){return this.each(function(){jQuery(this).domManip(args,table,callback,true)})}if(jQuery.isFunction(value)){return this.each(function(i){var self=jQuery(this);args[0]=value.call(this,i,table?self.html():undefined);self.domManip(args,table,callback)})}if(this[0]){parent=value&&value.parentNode;if(jQuery.support.parentNode&&parent&&parent.nodeType===11&&parent.childNodes.length===this.length){results={fragment:parent}}else{results=buildFragment(args,this,scripts)}fragment=results.fragment;if(fragment.childNodes.length===1){first=fragment=fragment.firstChild}else{first=fragment.firstChild}if(first){table=table&&jQuery.nodeName(first,"tr");for(var i=0,l=this.length;i<l;i++){callback.call(table?root(this[i],first):this[i],i>0||results.cacheable||this.length>1?fragment.cloneNode(true):fragment)}}if(scripts.length){jQuery.each(scripts,evalScript)}}return this;function root(elem,cur){return jQuery.nodeName(elem,"table")?(elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody"))):elem}}});function cloneCopyEvent(orig,ret){var i=0;ret.each(function(){if(this.nodeName!==(orig[i]&&orig[i].nodeName)){return }var oldData=jQuery.data(orig[i++]),curData=jQuery.data(this,oldData),events=oldData&&oldData.events;if(events){delete curData.handle;curData.events={};for(var type in events){for(var handler in events[type]){jQuery.event.add(this,type,events[type][handler],events[type][handler].data)}}}})}function buildFragment(args,nodes,scripts){var fragment,cacheable,cacheresults,doc=(nodes&&nodes[0]?nodes[0].ownerDocument||nodes[0]:document);if(args.length===1&&typeof args[0]==="string"&&args[0].length<512&&doc===document&&!rnocache.test(args[0])&&(jQuery.support.checkClone||!rchecked.test(args[0]))){cacheable=true;cacheresults=jQuery.fragments[args[0]];if(cacheresults){if(cacheresults!==1){fragment=cacheresults}}}if(!fragment){fragment=doc.createDocumentFragment();jQuery.clean(args,doc,fragment,scripts)}if(cacheable){jQuery.fragments[args[0]]=cacheresults?fragment:1}return{fragment:fragment,cacheable:cacheable}}jQuery.fragments={};jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var ret=[],insert=jQuery(selector),parent=this.length===1&&this[0].parentNode;if(parent&&parent.nodeType===11&&parent.childNodes.length===1&&insert.length===1){insert[original](this[0]);return this}else{for(var i=0,l=insert.length;i<l;i++){var elems=(i>0?this.clone(true):this).get();jQuery.fn[original].apply(jQuery(insert[i]),elems);ret=ret.concat(elems)}return this.pushStack(ret,name,insert.selector)}}});jQuery.extend({clean:function(elems,context,fragment,scripts){context=context||document;if(typeof context.createElement==="undefined"){context=context.ownerDocument||context[0]&&context[0].ownerDocument||document}var ret=[];for(var i=0,elem;(elem=elems[i])!=null;i++){if(typeof elem==="number"){elem+=""}if(!elem){continue}if(typeof elem==="string"&&!rhtml.test(elem)){elem=context.createTextNode(elem)}else{if(typeof elem==="string"){elem=elem.replace(rxhtmlTag,fcloseTag);var tag=(rtagName.exec(elem)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,depth=wrap[0],div=context.createElement("div");div.innerHTML=wrap[1]+elem+wrap[2];while(depth--){div=div.lastChild}if(!jQuery.support.tbody){var hasBody=rtbody.test(elem),tbody=tag==="table"&&!hasBody?div.firstChild&&div.firstChild.childNodes:wrap[1]==="<table>"&&!hasBody?div.childNodes:[];for(var j=tbody.length-1;j>=0;--j){if(jQuery.nodeName(tbody[j],"tbody")&&!tbody[j].childNodes.length){tbody[j].parentNode.removeChild(tbody[j])}}}if(!jQuery.support.leadingWhitespace&&rleadingWhitespace.test(elem)){div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]),div.firstChild)}elem=div.childNodes}}if(elem.nodeType){ret.push(elem)}else{ret=jQuery.merge(ret,elem)}}if(fragment){for(var i=0;ret[i];i++){if(scripts&&jQuery.nodeName(ret[i],"script")&&(!ret[i].type||ret[i].type.toLowerCase()==="text/javascript")){scripts.push(ret[i].parentNode?ret[i].parentNode.removeChild(ret[i]):ret[i])}else{if(ret[i].nodeType===1){ret.splice.apply(ret,[i+1,0].concat(jQuery.makeArray(ret[i].getElementsByTagName("script"))))}fragment.appendChild(ret[i])}}}return ret},cleanData:function(elems){var data,id,cache=jQuery.cache,special=jQuery.event.special,deleteExpando=jQuery.support.deleteExpando;for(var i=0,elem;(elem=elems[i])!=null;i++){id=elem[jQuery.expando];if(id){data=cache[id];if(data.events){for(var type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{removeEvent(elem,type,data.handle)}}}if(deleteExpando){delete elem[jQuery.expando]}else{if(elem.removeAttribute){elem.removeAttribute(jQuery.expando)}}delete cache[id]}}}});var rexclude=/z-?index|font-?weight|opacity|zoom|line-?height/i,ralpha=/alpha\([^)]*\)/,ropacity=/opacity=([^)]*)/,rfloat=/float/i,rdashAlpha=/-([a-z])/ig,rupper=/([A-Z])/g,rnumpx=/^-?\d+(?:px)?$/i,rnum=/^-?\d/,cssShow={position:"absolute",visibility:"hidden",display:"block"},cssWidth=["Left","Right"],cssHeight=["Top","Bottom"],getComputedStyle=document.defaultView&&document.defaultView.getComputedStyle,styleFloat=jQuery.support.cssFloat?"cssFloat":"styleFloat",fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn.css=function(name,value){return access(this,name,value,true,function(elem,name,value){if(value===undefined){return jQuery.curCSS(elem,name)}if(typeof value==="number"&&!rexclude.test(name)){value+="px"}jQuery.style(elem,name,value)})};jQuery.extend({style:function(elem,name,value){if(!elem||elem.nodeType===3||elem.nodeType===8){return undefined}if((name==="width"||name==="height")&&parseFloat(value)<0){value=undefined}var style=elem.style||elem,set=value!==undefined;if(!jQuery.support.opacity&&name==="opacity"){if(set){style.zoom=1;var opacity=parseInt(value,10)+""==="NaN"?"":"alpha(opacity="+value*100+")";var filter=style.filter||jQuery.curCSS(elem,"filter")||"";style.filter=ralpha.test(filter)?filter.replace(ralpha,opacity):opacity}return style.filter&&style.filter.indexOf("opacity=")>=0?(parseFloat(ropacity.exec(style.filter)[1])/100)+"":""}if(rfloat.test(name)){name=styleFloat}name=name.replace(rdashAlpha,fcamelCase);if(set){style[name]=value}return style[name]},css:function(elem,name,force,extra){if(name==="width"||name==="height"){var val,props=cssShow,which=name==="width"?cssWidth:cssHeight;function getWH(){val=name==="width"?elem.offsetWidth:elem.offsetHeight;if(extra==="border"){return }jQuery.each(which,function(){if(!extra){val-=parseFloat(jQuery.curCSS(elem,"padding"+this,true))||0}if(extra==="margin"){val+=parseFloat(jQuery.curCSS(elem,"margin"+this,true))||0}else{val-=parseFloat(jQuery.curCSS(elem,"border"+this+"Width",true))||0}})}if(elem.offsetWidth!==0){getWH()}else{jQuery.swap(elem,props,getWH)}return Math.max(0,Math.round(val))}return jQuery.curCSS(elem,name,force)},curCSS:function(elem,name,force){var ret,style=elem.style,filter;if(!jQuery.support.opacity&&name==="opacity"&&elem.currentStyle){ret=ropacity.test(elem.currentStyle.filter||"")?(parseFloat(RegExp.$1)/100)+"":"";return ret===""?"1":ret}if(rfloat.test(name)){name=styleFloat}if(!force&&style&&style[name]){ret=style[name]}else{if(getComputedStyle){if(rfloat.test(name)){name="float"}name=name.replace(rupper,"-$1").toLowerCase();var defaultView=elem.ownerDocument.defaultView;if(!defaultView){return null}var computedStyle=defaultView.getComputedStyle(elem,null);if(computedStyle){ret=computedStyle.getPropertyValue(name)}if(name==="opacity"&&ret===""){ret="1"}}else{if(elem.currentStyle){var camelCase=name.replace(rdashAlpha,fcamelCase);ret=elem.currentStyle[name]||elem.currentStyle[camelCase];if(!rnumpx.test(ret)&&rnum.test(ret)){var left=style.left,rsLeft=elem.runtimeStyle.left;elem.runtimeStyle.left=elem.currentStyle.left;style.left=camelCase==="fontSize"?"1em":(ret||0);ret=style.pixelLeft+"px";style.left=left;elem.runtimeStyle.left=rsLeft}}}}return ret},swap:function(elem,options,callback){var old={};for(var name in options){old[name]=elem.style[name];elem.style[name]=options[name]}callback.call(elem);for(var name in options){elem.style[name]=old[name]}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.hidden=function(elem){var width=elem.offsetWidth,height=elem.offsetHeight,skip=elem.nodeName.toLowerCase()==="tr";return width===0&&height===0&&!skip?true:width>0&&height>0&&!skip?false:jQuery.curCSS(elem,"display")==="none"};jQuery.expr.filters.visible=function(elem){return !jQuery.expr.filters.hidden(elem)}}var jsc=now(),rscript=/<script(.|\s)*?\/script>/gi,rselectTextarea=/select|textarea/i,rinput=/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i,jsre=/=\?(&|$)/,rquery=/\?/,rts=/(\?|&)_=.*?(&|$)/,rurl=/^(\w+:)?\/\/([^\/?#]+)/,r20=/%20/g,_load=jQuery.fn.load;jQuery.fn.extend({load:function(url,params,callback){if(typeof url!=="string"){return _load.call(this,url)}else{if(!this.length){return this}}var off=url.indexOf(" ");if(off>=0){var selector=url.slice(off,url.length);url=url.slice(0,off)}var type="GET";if(params){if(jQuery.isFunction(params)){callback=params;params=null}else{if(typeof params==="object"){params=jQuery.param(params,jQuery.ajaxSettings.traditional);type="POST"}}}var self=this;jQuery.ajax({url:url,type:type,dataType:"html",data:params,complete:function(res,status){if(status==="success"||status==="notmodified"){self.html(selector?jQuery("<div />").append(res.responseText.replace(rscript,"")).find(selector):res.responseText)}if(callback){self.each(callback,[res.responseText,status,res])}}});return this},serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rselectTextarea.test(this.nodeName)||rinput.test(this.type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val,i){return{name:elem.name,value:val}}):{name:elem.name,value:val}}).get()}});jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(i,o){jQuery.fn[o]=function(f){return this.bind(o,f)}});jQuery.extend({get:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=null}return jQuery.ajax({type:"GET",url:url,data:data,success:callback,dataType:type})},getScript:function(url,callback){return jQuery.get(url,null,callback,"script")},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},post:function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data={}}return jQuery.ajax({type:"POST",url:url,data:data,success:callback,dataType:type})},ajaxSetup:function(settings){jQuery.extend(jQuery.ajaxSettings,settings)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:window.XMLHttpRequest&&(window.location.protocol!=="file:"||!window.ActiveXObject)?function(){return new window.XMLHttpRequest()}:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},lastModified:{},etag:{},ajax:function(origSettings){var s=jQuery.extend(true,{},jQuery.ajaxSettings,origSettings);var jsonp,status,data,callbackContext=origSettings&&origSettings.context||s,type=s.type.toUpperCase();if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}if(s.dataType==="jsonp"){if(type==="GET"){if(!jsre.test(s.url)){s.url+=(rquery.test(s.url)?"&":"?")+(s.jsonp||"callback")+"=?"}}else{if(!s.data||!jsre.test(s.data)){s.data=(s.data?s.data+"&":"")+(s.jsonp||"callback")+"=?"}}s.dataType="json"}if(s.dataType==="json"&&(s.data&&jsre.test(s.data)||jsre.test(s.url))){jsonp=s.jsonpCallback||("jsonp"+jsc++);if(s.data){s.data=(s.data+"").replace(jsre,"="+jsonp+"$1")}s.url=s.url.replace(jsre,"="+jsonp+"$1");s.dataType="script";window[jsonp]=window[jsonp]||function(tmp){data=tmp;success();complete();window[jsonp]=undefined;try{delete window[jsonp]}catch(e){}if(head){head.removeChild(script)}}}if(s.dataType==="script"&&s.cache===null){s.cache=false}if(s.cache===false&&type==="GET"){var ts=now();var ret=s.url.replace(rts,"$1_="+ts+"$2");s.url=ret+((ret===s.url)?(rquery.test(s.url)?"&":"?")+"_="+ts:"")}if(s.data&&type==="GET"){s.url+=(rquery.test(s.url)?"&":"?")+s.data}if(s.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var parts=rurl.exec(s.url),remote=parts&&(parts[1]&&parts[1]!==location.protocol||parts[2]!==location.host);if(s.dataType==="script"&&type==="GET"&&remote){var head=document.getElementsByTagName("head")[0]||document.documentElement;var script=document.createElement("script");script.src=s.url;if(s.scriptCharset){script.charset=s.scriptCharset}if(!jsonp){var done=false;script.onload=script.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;success();complete();script.onload=script.onreadystatechange=null;if(head&&script.parentNode){head.removeChild(script)}}}}head.insertBefore(script,head.firstChild);return undefined}var requestDone=false;var xhr=s.xhr();if(!xhr){return }if(s.username){xhr.open(type,s.url,s.async,s.username,s.password)}else{xhr.open(type,s.url,s.async)}try{if(s.data||origSettings&&origSettings.contentType){xhr.setRequestHeader("Content-Type",s.contentType)}if(s.ifModified){if(jQuery.lastModified[s.url]){xhr.setRequestHeader("If-Modified-Since",jQuery.lastModified[s.url])}if(jQuery.etag[s.url]){xhr.setRequestHeader("If-None-Match",jQuery.etag[s.url])}}if(!remote){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")}xhr.setRequestHeader("Accept",s.dataType&&s.accepts[s.dataType]?s.accepts[s.dataType]+", */*":s.accepts._default)}catch(e){}if(s.beforeSend&&s.beforeSend.call(callbackContext,xhr,s)===false){if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}xhr.abort();return false}if(s.global){trigger("ajaxSend",[xhr,s])}var onreadystatechange=xhr.onreadystatechange=function(isTimeout){if(!xhr||xhr.readyState===0||isTimeout==="abort"){if(!requestDone){complete()}requestDone=true;if(xhr){xhr.onreadystatechange=jQuery.noop}}else{if(!requestDone&&xhr&&(xhr.readyState===4||isTimeout==="timeout")){requestDone=true;xhr.onreadystatechange=jQuery.noop;status=isTimeout==="timeout"?"timeout":!jQuery.httpSuccess(xhr)?"error":s.ifModified&&jQuery.httpNotModified(xhr,s.url)?"notmodified":"success";var errMsg;if(status==="success"){try{data=jQuery.httpData(xhr,s.dataType,s)}catch(err){status="parsererror";errMsg=err}}if(status==="success"||status==="notmodified"){if(!jsonp){success()}}else{jQuery.handleError(s,xhr,status,errMsg)}complete();if(isTimeout==="timeout"){xhr.abort()}if(s.async){xhr=null}}}};try{var oldAbort=xhr.abort;xhr.abort=function(){if(xhr){oldAbort.call(xhr)}onreadystatechange("abort")}}catch(e){}if(s.async&&s.timeout>0){setTimeout(function(){if(xhr&&!requestDone){onreadystatechange("timeout")}},s.timeout)}try{xhr.send(type==="POST"||type==="PUT"||type==="DELETE"?s.data:null)}catch(e){jQuery.handleError(s,xhr,null,e);complete()}if(!s.async){onreadystatechange()}function success(){if(s.success){s.success.call(callbackContext,data,status,xhr)}if(s.global){trigger("ajaxSuccess",[xhr,s])}}function complete(){if(s.complete){s.complete.call(callbackContext,xhr,status)}if(s.global){trigger("ajaxComplete",[xhr,s])}if(s.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}}function trigger(type,args){(s.context?jQuery(s.context):jQuery.event).trigger(type,args)}return xhr},handleError:function(s,xhr,status,e){if(s.error){s.error.call(s.context||s,xhr,status,e)}if(s.global){(s.context?jQuery(s.context):jQuery.event).trigger("ajaxError",[xhr,s,e])}},active:0,httpSuccess:function(xhr){try{return !xhr.status&&location.protocol==="file:"||(xhr.status>=200&&xhr.status<300)||xhr.status===304||xhr.status===1223||xhr.status===0}catch(e){}return false},httpNotModified:function(xhr,url){var lastModified=xhr.getResponseHeader("Last-Modified"),etag=xhr.getResponseHeader("Etag");if(lastModified){jQuery.lastModified[url]=lastModified}if(etag){jQuery.etag[url]=etag}return xhr.status===304||xhr.status===0},httpData:function(xhr,type,s){var ct=xhr.getResponseHeader("content-type")||"",xml=type==="xml"||!type&&ct.indexOf("xml")>=0,data=xml?xhr.responseXML:xhr.responseText;if(xml&&data.documentElement.nodeName==="parsererror"){jQuery.error("parsererror")}if(s&&s.dataFilter){data=s.dataFilter(data,type)}if(typeof data==="string"){if(type==="json"||!type&&ct.indexOf("json")>=0){data=jQuery.parseJSON(data)}else{if(type==="script"||!type&&ct.indexOf("javascript")>=0){jQuery.globalEval(data)}}}return data},param:function(a,traditional){var s=[];if(traditional===undefined){traditional=jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery){jQuery.each(a,function(){add(this.name,this.value)})}else{for(var prefix in a){buildParams(prefix,a[prefix])}}return s.join("&").replace(r20,"+");function buildParams(prefix,obj){if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||/\[\]$/.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"||jQuery.isArray(v)?i:"")+"]",v)}})}else{if(!traditional&&obj!=null&&typeof obj==="object"){jQuery.each(obj,function(k,v){buildParams(prefix+"["+k+"]",v)})}else{add(prefix,obj)}}}function add(key,value){value=jQuery.isFunction(value)?value():value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value)}}});var elemdisplay={},rfxtypes=/toggle|show|hide/,rfxnum=/^([+-]=)?([\d+-.]+)(.*)$/,timerId,fxAttrs=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];jQuery.fn.extend({show:function(speed,callback){if(speed||speed===0){return this.animate(genFx("show",3),speed,callback)}else{for(var i=0,l=this.length;i<l;i++){var old=jQuery.data(this[i],"olddisplay");this[i].style.display=old||"";if(jQuery.css(this[i],"display")==="none"){var nodeName=this[i].nodeName,display;if(elemdisplay[nodeName]){display=elemdisplay[nodeName]}else{var elem=jQuery("<"+nodeName+" />").appendTo("body");display=elem.css("display");if(display==="none"){display="block"}elem.remove();elemdisplay[nodeName]=display}jQuery.data(this[i],"olddisplay",display)}}for(var j=0,k=this.length;j<k;j++){this[j].style.display=jQuery.data(this[j],"olddisplay")||""}return this}},hide:function(speed,callback){if(speed||speed===0){return this.animate(genFx("hide",3),speed,callback)}else{for(var i=0,l=this.length;i<l;i++){var old=jQuery.data(this[i],"olddisplay");if(!old&&old!=="none"){jQuery.data(this[i],"olddisplay",jQuery.css(this[i],"display"))}}for(var j=0,k=this.length;j<k;j++){this[j].style.display="none"}return this}},_toggle:jQuery.fn.toggle,toggle:function(fn,fn2){var bool=typeof fn==="boolean";if(jQuery.isFunction(fn)&&jQuery.isFunction(fn2)){this._toggle.apply(this,arguments)}else{if(fn==null||bool){this.each(function(){var state=bool?fn:jQuery(this).is(":hidden");jQuery(this)[state?"show":"hide"]()})}else{this.animate(genFx("toggle",3),fn,fn2)}}return this},fadeTo:function(speed,to,callback){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:to},speed,callback)},animate:function(prop,speed,easing,callback){var optall=jQuery.speed(speed,easing,callback);if(jQuery.isEmptyObject(prop)){return this.each(optall.complete)}return this[optall.queue===false?"each":"queue"](function(){var opt=jQuery.extend({},optall),p,hidden=this.nodeType===1&&jQuery(this).is(":hidden"),self=this;for(p in prop){var name=p.replace(rdashAlpha,fcamelCase);if(p!==name){prop[name]=prop[p];delete prop[p];p=name}if(prop[p]==="hide"&&hidden||prop[p]==="show"&&!hidden){return opt.complete.call(this)}if((p==="height"||p==="width")&&this.style){opt.display=jQuery.css(this,"display");opt.overflow=this.style.overflow}if(jQuery.isArray(prop[p])){(opt.specialEasing=opt.specialEasing||{})[p]=prop[p][1];prop[p]=prop[p][0]}}if(opt.overflow!=null){this.style.overflow="hidden"}opt.curAnim=jQuery.extend({},prop);jQuery.each(prop,function(name,val){var e=new jQuery.fx(self,opt,name);if(rfxtypes.test(val)){e[val==="toggle"?hidden?"show":"hide":val](prop)}else{var parts=rfxnum.exec(val),start=e.cur(true)||0;if(parts){var end=parseFloat(parts[2]),unit=parts[3]||"px";if(unit!=="px"){self.style[name]=(end||1)+unit;start=((end||1)/e.cur(true))*start;self.style[name]=start+unit}if(parts[1]){end=((parts[1]==="-="?-1:1)*end)+start}e.custom(start,end,unit)}else{e.custom(start,val,"")}}});return true})},stop:function(clearQueue,gotoEnd){var timers=jQuery.timers;if(clearQueue){this.queue([])}this.each(function(){for(var i=timers.length-1;i>=0;i--){if(timers[i].elem===this){if(gotoEnd){timers[i](true)}timers.splice(i,1)}}});if(!gotoEnd){this.dequeue()}return this}});jQuery.each({slideDown:genFx("show",1),slideUp:genFx("hide",1),slideToggle:genFx("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(name,props){jQuery.fn[name]=function(speed,callback){return this.animate(props,speed,callback)}});jQuery.extend({speed:function(speed,easing,fn){var opt=speed&&typeof speed==="object"?speed:{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:jQuery.fx.speeds[opt.duration]||jQuery.fx.speeds._default;opt.old=opt.complete;opt.complete=function(){if(opt.queue!==false){jQuery(this).dequeue()}if(jQuery.isFunction(opt.old)){opt.old.call(this)}};return opt},easing:{linear:function(p,n,firstNum,diff){return firstNum+diff*p},swing:function(p,n,firstNum,diff){return((-Math.cos(p*Math.PI)/2)+0.5)*diff+firstNum}},timers:[],fx:function(elem,options,prop){this.options=options;this.elem=elem;this.prop=prop;if(!options.orig){options.orig={}}}});jQuery.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(jQuery.fx.step[this.prop]||jQuery.fx.step._default)(this);if((this.prop==="height"||this.prop==="width")&&this.elem.style){this.elem.style.display="block"}},cur:function(force){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var r=parseFloat(jQuery.css(this.elem,this.prop,force));return r&&r>-10000?r:parseFloat(jQuery.curCSS(this.elem,this.prop))||0},custom:function(from,to,unit){this.startTime=now();this.start=from;this.end=to;this.unit=unit||this.unit||"px";this.now=this.start;this.pos=this.state=0;var self=this;function t(gotoEnd){return self.step(gotoEnd)}t.elem=this.elem;if(t()&&jQuery.timers.push(t)&&!timerId){timerId=setInterval(jQuery.fx.tick,13)}},show:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());jQuery(this.elem).show()},hide:function(){this.options.orig[this.prop]=jQuery.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(gotoEnd){var t=now(),done=true;if(gotoEnd||t>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var i in this.options.curAnim){if(this.options.curAnim[i]!==true){done=false}}if(done){if(this.options.display!=null){this.elem.style.overflow=this.options.overflow;var old=jQuery.data(this.elem,"olddisplay");this.elem.style.display=old?old:this.options.display;if(jQuery.css(this.elem,"display")==="none"){this.elem.style.display="block"}}if(this.options.hide){jQuery(this.elem).hide()}if(this.options.hide||this.options.show){for(var p in this.options.curAnim){jQuery.style(this.elem,p,this.options.orig[p])}}this.options.complete.call(this.elem)}return false}else{var n=t-this.startTime;this.state=n/this.options.duration;var specialEasing=this.options.specialEasing&&this.options.specialEasing[this.prop];var defaultEasing=this.options.easing||(jQuery.easing.swing?"swing":"linear");this.pos=jQuery.easing[specialEasing||defaultEasing](this.state,n,0,1,this.options.duration);this.now=this.start+((this.end-this.start)*this.pos);this.update()}return true}};jQuery.extend(jQuery.fx,{tick:function(){var timers=jQuery.timers;for(var i=0;i<timers.length;i++){if(!timers[i]()){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}},stop:function(){clearInterval(timerId);timerId=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(fx){jQuery.style(fx.elem,"opacity",fx.now)},_default:function(fx){if(fx.elem.style&&fx.elem.style[fx.prop]!=null){fx.elem.style[fx.prop]=(fx.prop==="width"||fx.prop==="height"?Math.max(0,fx.now):fx.now)+fx.unit}else{fx.elem[fx.prop]=fx.now}}}});if(jQuery.expr&&jQuery.expr.filters){jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length}}function genFx(type,num){var obj={};jQuery.each(fxAttrs.concat.apply([],fxAttrs.slice(0,num)),function(){obj[this]=type});return obj}if("getBoundingClientRect" in document.documentElement){jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i)})}if(!elem||!elem.ownerDocument){return null}if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem)}var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(self.pageYOffset||jQuery.support.boxModel&&docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(self.pageXOffset||jQuery.support.boxModel&&docElem.scrollLeft||body.scrollLeft)-clientLeft;return{top:top,left:left}}}else{jQuery.fn.offset=function(options){var elem=this[0];if(options){return this.each(function(i){jQuery.offset.setOffset(this,options,i)})}if(!elem||!elem.ownerDocument){return null}if(elem===elem.ownerDocument.body){return jQuery.offset.bodyOffset(elem)}jQuery.offset.initialize();var offsetParent=elem.offsetParent,prevOffsetParent=elem,doc=elem.ownerDocument,computedStyle,docElem=doc.documentElement,body=doc.body,defaultView=doc.defaultView,prevComputedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle,top=elem.offsetTop,left=elem.offsetLeft;while((elem=elem.parentNode)&&elem!==body&&elem!==docElem){if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){break}computedStyle=defaultView?defaultView.getComputedStyle(elem,null):elem.currentStyle;top-=elem.scrollTop;left-=elem.scrollLeft;if(elem===offsetParent){top+=elem.offsetTop;left+=elem.offsetLeft;if(jQuery.offset.doesNotAddBorder&&!(jQuery.offset.doesAddBorderForTableAndCells&&/^t(able|d|h)$/i.test(elem.nodeName))){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0}prevOffsetParent=offsetParent,offsetParent=elem.offsetParent}if(jQuery.offset.subtractsBorderForOverflowNotVisible&&computedStyle.overflow!=="visible"){top+=parseFloat(computedStyle.borderTopWidth)||0;left+=parseFloat(computedStyle.borderLeftWidth)||0}prevComputedStyle=computedStyle}if(prevComputedStyle.position==="relative"||prevComputedStyle.position==="static"){top+=body.offsetTop;left+=body.offsetLeft}if(jQuery.offset.supportsFixedPosition&&prevComputedStyle.position==="fixed"){top+=Math.max(docElem.scrollTop,body.scrollTop);left+=Math.max(docElem.scrollLeft,body.scrollLeft)}return{top:top,left:left}}}jQuery.offset={initialize:function(){var body=document.body,container=document.createElement("div"),innerDiv,checkDiv,table,td,bodyMarginTop=parseFloat(jQuery.curCSS(body,"marginTop",true))||0,html="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";jQuery.extend(container.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});container.innerHTML=html;body.insertBefore(container,body.firstChild);innerDiv=container.firstChild;checkDiv=innerDiv.firstChild;td=innerDiv.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(checkDiv.offsetTop!==5);this.doesAddBorderForTableAndCells=(td.offsetTop===5);checkDiv.style.position="fixed",checkDiv.style.top="20px";this.supportsFixedPosition=(checkDiv.offsetTop===20||checkDiv.offsetTop===15);checkDiv.style.position=checkDiv.style.top="";innerDiv.style.overflow="hidden",innerDiv.style.position="relative";this.subtractsBorderForOverflowNotVisible=(checkDiv.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(body.offsetTop!==bodyMarginTop);body.removeChild(container);body=container=innerDiv=checkDiv=table=td=null;jQuery.offset.initialize=jQuery.noop},bodyOffset:function(body){var top=body.offsetTop,left=body.offsetLeft;jQuery.offset.initialize();if(jQuery.offset.doesNotIncludeMarginInBodyOffset){top+=parseFloat(jQuery.curCSS(body,"marginTop",true))||0;left+=parseFloat(jQuery.curCSS(body,"marginLeft",true))||0}return{top:top,left:left}},setOffset:function(elem,options,i){if(/static/.test(jQuery.curCSS(elem,"position"))){elem.style.position="relative"}var curElem=jQuery(elem),curOffset=curElem.offset(),curTop=parseInt(jQuery.curCSS(elem,"top",true),10)||0,curLeft=parseInt(jQuery.curCSS(elem,"left",true),10)||0;if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}var props={top:(options.top-curOffset.top)+curTop,left:(options.left-curOffset.left)+curLeft};if("using" in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({position:function(){if(!this[0]){return null}var elem=this[0],offsetParent=this.offsetParent(),offset=this.offset(),parentOffset=/^body|html$/i.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jQuery.curCSS(elem,"marginTop",true))||0;offset.left-=parseFloat(jQuery.curCSS(elem,"marginLeft",true))||0;parentOffset.top+=parseFloat(jQuery.curCSS(offsetParent[0],"borderTopWidth",true))||0;parentOffset.left+=parseFloat(jQuery.curCSS(offsetParent[0],"borderLeftWidth",true))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||document.body;while(offsetParent&&(!/^body|html$/i.test(offsetParent.nodeName)&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent})}});jQuery.each(["Left","Top"],function(i,name){var method="scroll"+name;jQuery.fn[method]=function(val){var elem=this[0],win;if(!elem){return null}if(val!==undefined){return this.each(function(){win=getWindow(this);if(win){win.scrollTo(!i?val:jQuery(win).scrollLeft(),i?val:jQuery(win).scrollTop())}else{this[method]=val}})}else{win=getWindow(elem);return win?("pageXOffset" in win)?win[i?"pageYOffset":"pageXOffset"]:jQuery.support.boxModel&&win.document.documentElement[method]||win.document.body[method]:elem[method]}}});function getWindow(elem){return("scrollTo" in elem&&elem.document)?elem:elem.nodeType===9?elem.defaultView||elem.parentWindow:false}jQuery.each(["Height","Width"],function(i,name){var type=name.toLowerCase();jQuery.fn["inner"+name]=function(){return this[0]?jQuery.css(this[0],type,false,"padding"):null};jQuery.fn["outer"+name]=function(margin){return this[0]?jQuery.css(this[0],type,false,margin?"margin":"border"):null};jQuery.fn[type]=function(size){var elem=this[0];if(!elem){return size==null?null:this}if(jQuery.isFunction(size)){return this.each(function(i){var self=jQuery(this);self[type](size.call(this,i,self[type]()))})}return("scrollTo" in elem&&elem.document)?elem.document.compatMode==="CSS1Compat"&&elem.document.documentElement["client"+name]||elem.document.body["client"+name]:(elem.nodeType===9)?Math.max(elem.documentElement["client"+name],elem.body["scroll"+name],elem.documentElement["scroll"+name],elem.body["offset"+name],elem.documentElement["offset"+name]):size===undefined?jQuery.css(elem,type):this.css(type,typeof size==="string"?size:size+"px")}});window.jQuery=window.$=jQuery})(window);var $j=jQuery.noConflict();if(window.DWait&&window.DWait.run){window.DWait.run(".jquery")}if(window.DWait){DWait.run("jms/lib/jquery/jquery-1.4.2.js");
/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built In easIng capabilities added In jQuery 1.1
 * to offer multiple easIng options
 *
 * Copyright (c) 2007 George Smith
 * Licensed under the MIT License:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 */
}jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(B,C,A,E,D){return jQuery.easing[jQuery.easing.def](B,C,A,E,D)},easeInQuad:function(B,C,A,E,D){return E*(C/=D)*C+A},easeOutQuad:function(B,C,A,E,D){return -E*(C/=D)*(C-2)+A},easeInOutQuad:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C+A}return -E/2*((--C)*(C-2)-1)+A},easeInCubic:function(B,C,A,E,D){return E*(C/=D)*C*C+A},easeOutCubic:function(B,C,A,E,D){return E*((C=C/D-1)*C*C+1)+A},easeInOutCubic:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C*C+A}return E/2*((C-=2)*C*C+2)+A},easeInQuart:function(B,C,A,E,D){return E*(C/=D)*C*C*C+A},easeOutQuart:function(B,C,A,E,D){return -E*((C=C/D-1)*C*C*C-1)+A},easeInOutQuart:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C*C*C+A}return -E/2*((C-=2)*C*C*C-2)+A},easeInQuint:function(B,C,A,E,D){return E*(C/=D)*C*C*C*C+A},easeOutQuint:function(B,C,A,E,D){return E*((C=C/D-1)*C*C*C*C+1)+A},easeInOutQuint:function(B,C,A,E,D){if((C/=D/2)<1){return E/2*C*C*C*C*C+A}return E/2*((C-=2)*C*C*C*C+2)+A},easeInSine:function(B,C,A,E,D){return -E*Math.cos(C/D*(Math.PI/2))+E+A},easeOutSine:function(B,C,A,E,D){return E*Math.sin(C/D*(Math.PI/2))+A},easeInOutSine:function(B,C,A,E,D){return -E/2*(Math.cos(Math.PI*C/D)-1)+A},easeInExpo:function(B,C,A,E,D){return(C==0)?A:E*Math.pow(2,10*(C/D-1))+A},easeOutExpo:function(B,C,A,E,D){return(C==D)?A+E:E*(-Math.pow(2,-10*C/D)+1)+A},easeInOutExpo:function(B,C,A,E,D){if(C==0){return A}if(C==D){return A+E}if((C/=D/2)<1){return E/2*Math.pow(2,10*(C-1))+A}return E/2*(-Math.pow(2,-10*--C)+2)+A},easeInCirc:function(B,C,A,E,D){return -E*(Math.sqrt(1-(C/=D)*C)-1)+A},easeOutCirc:function(B,C,A,E,D){return E*Math.sqrt(1-(C=C/D-1)*C)+A},easeInOutCirc:function(B,C,A,E,D){if((C/=D/2)<1){return -E/2*(Math.sqrt(1-C*C)-1)+A}return E/2*(Math.sqrt(1-(C-=2)*C)+1)+A},easeInElastic:function(B,D,A,H,G){var E=1.70158;var F=0;var C=H;if(D==0){return A}if((D/=G)==1){return A+H}if(!F){F=G*0.3}if(C<Math.abs(H)){C=H;var E=F/4}else{var E=F/(2*Math.PI)*Math.asin(H/C)}return -(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+A},easeOutElastic:function(B,D,A,H,G){var E=1.70158;var F=0;var C=H;if(D==0){return A}if((D/=G)==1){return A+H}if(!F){F=G*0.3}if(C<Math.abs(H)){C=H;var E=F/4}else{var E=F/(2*Math.PI)*Math.asin(H/C)}return C*Math.pow(2,-10*D)*Math.sin((D*G-E)*(2*Math.PI)/F)+H+A},easeInOutElastic:function(B,D,A,H,G){var E=1.70158;var F=0;var C=H;if(D==0){return A}if((D/=G/2)==2){return A+H}if(!F){F=G*(0.3*1.5)}if(C<Math.abs(H)){C=H;var E=F/4}else{var E=F/(2*Math.PI)*Math.asin(H/C)}if(D<1){return -0.5*(C*Math.pow(2,10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F))+A}return C*Math.pow(2,-10*(D-=1))*Math.sin((D*G-E)*(2*Math.PI)/F)*0.5+H+A},easeInBack:function(B,C,A,F,E,D){if(D==undefined){D=1.70158}return F*(C/=E)*C*((D+1)*C-D)+A},easeOutBack:function(B,C,A,F,E,D){if(D==undefined){D=1.70158}return F*((C=C/E-1)*C*((D+1)*C+D)+1)+A},easeInOutBack:function(B,C,A,F,E,D){if(D==undefined){D=1.70158}if((C/=E/2)<1){return F/2*(C*C*(((D*=(1.525))+1)*C-D))+A}return F/2*((C-=2)*C*(((D*=(1.525))+1)*C+D)+2)+A},easeInBounce:function(B,C,A,E,D){return E-jQuery.easing.easeOutBounce(B,D-C,0,E,D)+A},easeOutBounce:function(B,C,A,E,D){if((C/=D)<(1/2.75)){return E*(7.5625*C*C)+A}else{if(C<(2/2.75)){return E*(7.5625*(C-=(1.5/2.75))*C+0.75)+A}else{if(C<(2.5/2.75)){return E*(7.5625*(C-=(2.25/2.75))*C+0.9375)+A}else{return E*(7.5625*(C-=(2.625/2.75))*C+0.984375)+A}}}},easeInOutBounce:function(B,C,A,E,D){if(C<D/2){return jQuery.easing.easeInBounce(B,C*2,0,E,D)*0.5+A}return jQuery.easing.easeOutBounce(B,C*2-D,0,E,D)*0.5+E*0.5+A}});if(window.DWait){DWait.run("jms/lib/jquery/plugins/jquery.easing.1.3.js")}(function(A){A.fn.hoverIntent=function(I,H){var J={sensitivity:7,interval:100,timeout:0};J=A.extend(J,H?{over:I,out:H}:I);var L,K,F,D;var E=function(M){L=M.pageX;K=M.pageY};var C=function(N,M){M.hoverIntent_t=clearTimeout(M.hoverIntent_t);if((Math.abs(F-L)+Math.abs(D-K))<J.sensitivity){A(M).unbind("mousemove",E);M.hoverIntent_s=1;return J.over.apply(M,[N])}else{F=L;D=K;M.hoverIntent_t=setTimeout(function(){C(N,M)},J.interval)}};var G=function(N,M){M.hoverIntent_t=clearTimeout(M.hoverIntent_t);M.hoverIntent_s=0;return J.out.apply(M,[N])};var B=function(P){var O=(P.type=="mouseover"?P.fromElement:P.toElement)||P.relatedTarget;while(O&&O!=this){try{O=O.parentNode}catch(P){O=this}}if(O==this){return false}var N=jQuery.extend({},P);var M=this;if(M.hoverIntent_t){M.hoverIntent_t=clearTimeout(M.hoverIntent_t)}if(P.type=="mouseover"){F=N.pageX;D=N.pageY;A(M).bind("mousemove",E);if(M.hoverIntent_s!=1){M.hoverIntent_t=setTimeout(function(){C(N,M)},J.interval)}}else{A(M).unbind("mousemove",E);if(M.hoverIntent_s==1){M.hoverIntent_t=setTimeout(function(){G(N,M)},J.timeout)}}};return this.mouseover(B).mouseout(B)}})(jQuery);if(window.DWait){DWait.run("jms/lib/jquery/plugins/jquery.hoverIntent.minified.js");
/* 
 * Copyright (c) 2007 Paul Bakaus (paul.bakaus@googlemail.com) and Brandon Aaron (brandon.aaron@gmail.com || http://brandonaaron.net)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * $LastChangedDate: 2007-12-20 14:43:48 +0000 (Thu, 20 Dec 2007) $
 * $Rev: 4257 $
 *
 * Version: @VERSION
 *
 * Requires: jQuery 1.2+
 *
 */
}(function(B){B.dimensions={version:"@VERSION"};B.each(["Height","Width"],function(D,C){B.fn["inner"+C]=function(){if(!this[0]){return }var F=C=="Height"?"Top":"Left",E=C=="Height"?"Bottom":"Right";return this.is(":visible")?this[0]["client"+C]:A(this,C.toLowerCase())+A(this,"padding"+F)+A(this,"padding"+E)};B.fn["outer"+C]=function(F){if(!this[0]){return }var H=C=="Height"?"Top":"Left",E=C=="Height"?"Bottom":"Right";F=B.extend({margin:false},F||{});var G=this.is(":visible")?this[0]["offset"+C]:A(this,C.toLowerCase())+A(this,"border"+H+"Width")+A(this,"border"+E+"Width")+A(this,"padding"+H)+A(this,"padding"+E);return G+(F.margin?(A(this,"margin"+H)+A(this,"margin"+E)):0)}});B.each(["Left","Top"],function(D,C){B.fn["scroll"+C]=function(E){if(!this[0]){return }return E!=undefined?this.each(function(){this==window||this==document?window.scrollTo(C=="Left"?E:B(window)["scrollLeft"](),C=="Top"?E:B(window)["scrollTop"]()):this["scroll"+C]=E}):this[0]==window||this[0]==document?self[(C=="Left"?"pageXOffset":"pageYOffset")]||B.boxModel&&document.documentElement["scroll"+C]||document.body["scroll"+C]:this[0]["scroll"+C]}});B.fn.extend({position:function(){var H=0,G=0,F=this[0],I,C,E,D;if(F){E=this.offsetParent();I=this.offset();C=E.offset();I.top-=A(F,"marginTop");I.left-=A(F,"marginLeft");C.top+=A(E,"borderTopWidth");C.left+=A(E,"borderLeftWidth");D={top:I.top-C.top,left:I.left-C.left}}return D},offsetParent:function(){var C=this[0].offsetParent;while(C&&(!/^body|html$/i.test(C.tagName)&&B.css(C,"position")=="static")){C=C.offsetParent}return B(C)}});function A(C,D){return parseInt(B.curCSS(C.jquery?C[0]:C,D,true))||0}})(jQuery);if(window.DWait){DWait.run("jms/lib/jquery/plugins/jquery.dimensions.js");
/*
 * .disableTextSelect - Disable Text Select Plugin
 *
 * Version: 1.1
 * Updated: 2007-11-28
 *
 * Used to stop users from selecting text
 *
 * Copyright (c) 2007 James Dempster (letssurf@gmail.com, http://www.jdempster.com/category/jquery/disabletextselect/)
 *
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 */
}(function(A){if(A.browser.mozilla){A.fn.disableTextSelect=function(){return this.each(function(){A(this).css({MozUserSelect:"none"})})};A.fn.enableTextSelect=function(){return this.each(function(){A(this).css({MozUserSelect:""})})}}else{if(A.browser.msie){A.fn.disableTextSelect=function(){return this.each(function(){A(this).bind("selectstart.disableTextSelect",function(){return false})})};A.fn.enableTextSelect=function(){return this.each(function(){A(this).unbind("selectstart.disableTextSelect")})}}else{A.fn.disableTextSelect=function(){return this.each(function(){A(this).bind("mousedown.disableTextSelect",function(){return false})})};A.fn.enableTextSelect=function(){return this.each(function(){A(this).unbind("mousedown.disableTextSelect")})}}}})(jQuery);if(window.DWait){DWait.run("jms/lib/jquery/plugins/jquery.disable.text.select.pack.js")}(function(){var B=function(C,E,D){if(C.addEventListener){C.addEventListener(E,D,false)}else{if(C.attachEvent){C.attachEvent("on"+E,D)}}};var A=function(C,E,D){if(C.removeEventListener){C.removeEventListener(E,D,false)}else{if(C.detachEvent){C.detachEvent("on"+E,D)}}};if(window.DWait){DWait.download=function(D,J){var F,E,K,H,G,C;if(!(D instanceof Array)){D=[D]}function I(M,O,L,N){if(!M.readyState||M.readyState=="complete"||M.readyState=="loaded"){if(deviantART.debug){console.log((new Date).valueOf()+"> LOADED",N)}if(typeof O=="string"){O=new Function(O)}O(C);if(L){A(M,"readystatechange",arguments.callee)}A(M,"load",arguments.callee)}}for(F=0;F!=D.length;F++){if(DWait.downloads[D[F]]){H=1;continue}DWait.downloads[D[F]]=true;switch(D[F].replace(/\?.*$/,"").split(".").pop().toLowerCase()){case"js":E=document.createElement("script");E.setAttribute("type","text/javascript");E.setAttribute("src",D[F]);if(J){C=D[F];G=bind(this,I,E,J,true);J=null;B(E,"load",G);B(E,"readystatechange",G)}document.getElementsByTagName("head")[0].appendChild(E);if(deviantART.debug){console.log("Adding JS: "+D[F],E)}break;case"css":E=document.createElement("link");E.setAttribute("type","text/css");E.setAttribute("rel","stylesheet");E.setAttribute("href",D[F]);if(J){C=D[F];G=bind(this,I,E,J,true);J=null;B(E,"load",G);B(E,"readystatechange",G)}document.getElementsByTagName("head")[0].appendChild(E);if(deviantART.debug){console.log("Adding CSS: "+D[F],E)}break;default:throw new Error('DWait cannot download "'+D[F]+'"')}}if(H&&J){setTimeout(J,1)}}}if(window.DWait){DWait.downloads={}}})();if(window.DWait){DWait.run("jms/dwait/download.js")}if(!window.popup){window.popup=function(A,B,C,H,I,G){var A=A||"";var C=C||500;var B=B||"DA";var H=H||600;var D=(screen.width-C)/2;var F=(screen.height-H)/2.1;var E=window.open(A,B,"left = "+D+", top = "+F+", toolbar = 0, scrollbars = 1, location = 0, status = "+(G?1:0)+", statusmenubar = 0, resizable = 1, width="+C+", height="+H);if(window.event){event.cancelBubble=true}if(I){return E}return false}}if(window.DWait){DWait.run("jms/lib/popupwindow.js")}if(!window.deviantART){deviantART={}}if(!window.AutoExec){AutoExec=[]}if(!(AutoExec instanceof Array)){throw new Error("AutoExec global is unavailable")}AutoExec.loaded=function(){var A;if(AutoExec.IE_bios){clearInterval(AutoExec.IE_bios)}for(A=0;A<AutoExec.length;A++){if(!AutoExec[A]){try{throw new Error("Breakpoint: dud autoexec")}catch(B){}continue}if(!AutoExec.count){AutoExec.count=0}AutoExec[A]()}AutoExec.length=0;AutoExec.push=AutoExec.push2};AutoExec.push2=function(){Array.prototype.push.apply(AutoExec,arguments);AutoExec.loaded()};AutoExec.time=function(){if(document.getElementById("deviantART-loves-you")){clearInterval(AutoExec.time.timer);AutoExec.loaded()}};window.onload=AutoExec.loaded;if(document.addEventListener){document.addEventListener("DOMContentLoaded",AutoExec.loaded,false)}if(Browser.isIE){AutoExec.IE_bios=setInterval(function(){try{document.documentElement.doScroll("left")}catch(A){return }clearInterval(AutoExec.IE_bios);AutoExec.loaded()},50)}else{AutoExec.time.timer=setInterval(AutoExec.time,100)}if(!window.DRE){DRE={};Bug={};DRE.trace=DRE.notice=DRE.warning=DRE.alert=DRE.time=DRE.structureMatch=DRE.serialize=DRE.brakes=DRE.breakpoint=function(){};Bug.update=Bug.coords=Bug.bump=Bug.get=function(){};Bug.log=function(B,A){try{if(vms_feature("dre")&&B&&B.charAt(0)=="^"&&window.console){console.log(B.substr(1)+": "+A)}}catch(C){}};dre_assert=DRE.assert=function(A,B){if(!A){throw new Error("Assertion failed")}};DRE.breakpoint=function(){try{BREAKPOINT()}catch(A){}};DRE.halt=function(A){throw new Error("DRE halt")}}if(window.DWait){DWait.run("jms/lib/autoexec.js")}Events={hook:function(C,B,D){var A;B="on"+B;if(typeof C[B]!="function"||(C[B]&&!C[B].calls)){A=new Function("e","return Events._handler(this, window.event || e, arguments.callee.calls);");A.calls=[];if(typeof C[B]=="function"){A.calls.push(C[B])}C[B]=A}C[B].calls.push(D);return true},unhook:function(D,C,E){var A,B;A=D["on"+C].calls;for(B=0;A[B];B++){if(A[B]==E){A.splice(B,1);return true}}return false},_handler:function(C,D,B){var A,E;E=true;for(A=0;B[A];A++){if(B[A].call(C,D,D.target||D.srcElement)==false){if(D.cancelable){D.preventDefault()}D.cancelBubble=true;E=false}}return E},stop:function(){if(window.event){window.event.cancelBubble=true}return false}};if(window.DWait){DWait.run("jms/lib/events.js")}GUID={latest:10000,get:function(){return GUID.latest++}};if(window.DWait){DWait.run("jms/lib/guid.js")}if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());if(window.DWait){DWait.run("jms/lib/json2.js")}DiFi={_queue:[],_queuedType:"",_queuedPage:"",_queuedAd:[],first_page:true,_async:true,pushPage:function(B,A,D){var C;if(DiFi._queuedType&&DiFi._queuedType!="public"){DiFi.send()}C=[];if(A){DiFi._queuedAd=(A.ad_d||"300x250").split("x");for(i in A){if(typeof A[i]=="boolean"){A[i]=Number(A[i])}C.push(i+"="+(typeof A[i]=="string"?escape(A[i]):A[i]))}}DiFi._queuedPage=[C.join("&"),D];DiFi._queuedType="page";if(DiFi._queue.length==0){Bug.log("DiFi","***************************")}Bug.log("DiFi","page (page) / "+C.join("&"))},pushPublicStaticGet:function(B,E,A,D,C){return DiFi.push("static",B,E,A,D,C)},pushPublicGet:function(B,E,A,D,C){return DiFi.push("public",B,E,A,D,C)},pushPrivateGet:function(B,E,A,D,C){return DiFi.push("private",B,E,A,D,C)},pushPost:function(B,E,A,D,C){return DiFi.push("post",B,E,A,D,C)},_timer:null,timer:function(A){if(DiFi._timer){clearTimeout(DiFi._timer);A*=0.6}DiFi._timer=setTimeout("DiFi.send()",A)},_siCallbacks:{},_pageCallbacks:{},push:function(C,B,F,A,E,D){if(!DiFi._queuedType){DRE.assert(DiFi._queue.length==0,"Blank type, blank queue")}switch(DiFi._queuedType){case"static":if(C!="static"){DiFi.send()}break;case"page":if(!(C in {"public":0,"private":0})){DiFi.send()}break}DRE.assert(C!="page","That's just not how it works");switch(C){case"static":if(DiFi._queuedType&&DiFi._queuedType!="static"){DiFi.send()}DiFi._queuedType="static";break;case"public":if(!DiFi._queuedType){DiFi._queuedType="public"}break;case"private":if(!(DiFi._queuedType in {post:0,page:0})){DiFi._queuedType="private"}break;case"post":DiFi._queuedType="post";break;case"static":DRE.aseert(DiFi._queue.length==0||DiFi._queuedType=="static");DiFi._queuedType="static";break;default:DRE.halt("Unknown DiFi type: "+C)}if(DiFi._queue.length==0&&!DiFi._queuedPage){Bug.log("^DiFi","***************************")}Bug.log("^DiFi",C+" ("+DiFi._queuedType+") / "+B+"."+F+"("+A.join(",")+")");DiFi._queue.push({"class":B,method:F,args:A,callback:E,callback_obj:D,original:arguments});if(DiFi._queue.length>80&&DiFi._queuedType!="post"){if(DiFi._queuedType in {"static":0,page:0}){DiFi.send()}else{DiFi._queuedType="post"}Bug.log("DiFi","^^^^^^^^^^^^^^^^^^^^^^^^^")}},cached:{},cache:function(B,D,A,C){DiFi.cached[B+";"+D+";"+A.join(",")]=C},send:function(){var I,F,E,D,H,W,K,C,U,S,R,M,V,N,P,B,G,L,Q,J,O,T,A;if(DiFi._timer){clearTimeout(DiFi._timer);DiFi._timer=null}U="";H=[];W=[];K=[];V=[];for(S=0;E=DiFi._queue[S];S++){F=E["class"]+";"+E.method;if(I=DiFi.cached[F+";"+E.args.join(",")]){E.result=I;K.push(E);continue}else{if(DiFi.overrides[F]){if(I=DiFi.overrides[F](E["class"],E.method,E.args,E.callback,E.callback_obj)){E.result={request:{"class":E["class"],method:E.method,args:E.args},response:{status:"SUCCESS",content:I}};K.push(E);continue}}}C=F;if(window.Profile&&deviantART.debug){V.push({api:E["class"],request:E.method,request:E.args,dre_horizontal:true})}W.push([E.callback,E.callback_obj]);if(C==U){callString=JSON.stringify(E.args);H[H.length-1]+=","+DiFi._urlescapeCall(callString)}else{callString=JSON.stringify(E["class"])+","+JSON.stringify(E.method)+","+JSON.stringify(E.args);H.push(DiFi._urlescapeCall(callString));U=C}}A="ui="+(("; "+document.cookie+";").match("; userinfo=([^;]*)")||[])[1];H=((DiFi._queuedType=="post"?A+"&":"")+"c%5B%5D="+H.join("&c%5B%5D="));N=DiFi._queuedType;P=DiFi._queuedPage;if(N=="page"){O=DiFi._queuedAd[0];T=DiFi._queuedAd[1]}DiFi._queue.length=0;DiFi._queuedType="";DiFi._queuedPage="";if(N=="page"&&DiFi.findAdPollution()){alert("A client error has occurred. Please reload the page and try again.");throw new Error("Leftover expandable ad not handled correctly")}if(W.length||N=="page"){if(N in {"public":0,"private":0,post:0}||(N=="page"&&W.length&&((deviantART.debug&&window.location.href.indexOf("file:")==0)))){H+="&t=json";if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:"N/A"+Math.round(Math.random()*10000),uri:"/global/difi/",type:N=="post"?"Post":"Private Get",data:V})}DiFi._request(N=="post"?"POST":"GET",H,W);if(N=="page"){Bug.log("DiFi","zzzzzzzzzzzzz");DRE.assert(vms_feature("pachunkajunk")||(deviantART.debug&&window.location.href.indexOf("file:")==0));I=document.createElement("div");I.style.position="absolute";I.className="hidoframe";I.style.top=370;I.style.right=60;document.body.appendChild(I);B="difitest"+(new Date).valueOf();I.innerHTML='<iframe frameborder="0" scrolling="no" width="'+O+'" height="'+T+'" src="http://www.deviantart.com/global/testads/'+O+"ad.html?"+(new Date).valueOf()+'" name="'+B+'" id="'+B+'"></iframe>';P[1](I,{maturecontent:false,ad:true});DiFi.first_page=false}}else{if(N=="static"){H+="&t=jssi";if(!DiFi._siCallbacks[H]){DiFi._siCallbacks[H]=[]}DiFi._siCallbacks[H].push(W);I=document.createElement("script");I.setAttribute("type","text/javascript");I.setAttribute("src","http://backend.deviantart.com/global/difi/?"+H);document.getElementsByTagName("head")[0].appendChild(I);if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:H,type:"DiFi Backend Request"})}}else{if(N=="page"){H+="&t=page";H+="&"+P[0];B="difipage"+(new Date()).valueOf();if(window.DiFiBug){DiFiBug.sessionUpdate(B,"begin")}if(W.length==0){if(window.DiFiBug){DiFiBug.sessionUpdate(B,"skip")}P[1](null,{})}else{if((H.length>500||(Browser.isGecko&&DiFi.first_page))&&!Browser.isOpera&&!Browser.isKHTML){H+="&"+A;G="cb"+(new Date()).valueOf();DiFi._siCallbacks[G]=[W];I=document.createElement("div");I.className="hidoframe";I.style.position="absolute";I.style.top=370;I.style.right=60;I.style.zIndex=30;document.body.appendChild(I);Q=H.split("&");Q.push("page_cb="+G);L=[];for(S=0;S!=Q.length;S++){Q[S]=(unescape(Q[S])).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/=/,"\t").split("\t",2);L.push('<input type="hidden" name="'+Q[S][0]+'" value="'+Q[S][1]+'"/>')}if(Browser.isIE){I.onclick=DiFi.ieAdClickProtection;I.innerHTML=('<iframe frameborder="0" scrolling="no" width="'+O+'" height="'+T+'" id="'+B+'" name="'+B+'"></iframe><form action="'+(deviantART.debug&&window.location.href.indexOf("file:")==0?"http://www.deviantart.com":"")+'/global/difi/" method="post" target="'+B+'">'+L.join("")+"</form>")}else{J=document.createElement("iframe");J.id=B;J.name=B;J.setAttribute("frameborder",0);J.setAttribute("scrolling","no");J.setAttribute("width",O);J.setAttribute("height",T);J.style.display="none";I.innerHTML=('<form action="'+(deviantART.debug&&window.location.href.indexOf("file:")==0?"http://www.deviantart.com":"")+'/global/difi/" method="post" target="'+B+'">'+L.join("")+"</form>");DRE.assert(I.firstChild,"eax.firstChild");I.insertBefore(J,I.firstChild);I.firstChild.nextSibling.target=B}DRE.assert(I.firstChild,"eax.firstChild");DRE.assert(I.firstChild.tagName=="IFRAME","eax.firstChild.tagName == 'IFRAME'");DRE.assert(I.firstChild.nextSibling,"eax.firstChild.nextSibling");DRE.assert(I.firstChild.nextSibling.tagName=="FORM","eax.firstChild.nextSibling.tagName == 'FORM'");DiFi._pageCallbacks[G]=[P[1],I];if(window.DiFiBug){DiFiBug.sessionUpdate(B,"iframe post")}I.firstChild.nextSibling.submit();I.firstChild.style.display="block";if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:H,type:"DiFi iframe request"})}DiFi.first_page=false}else{DiFi._siCallbacks[H]=[W];I=document.createElement("div");if(Browser.isIE){I.onclick=DiFi.ieAdClickProtection}I.style.position="absolute";I.style.top=0;I.style.right=0;I.className="hidoframe";document.body.appendChild(I);if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:H,type:"DiFi iframe request"})}DiFi._pageCallbacks[H]=[P[1],I];if(window.DiFiBug){DiFiBug.sessionUpdate(B,"iframe get",B+" / "+H)}I.innerHTML='<iframe name="'+B+'" id="'+B+'" frameborder="0" scrolling="no" width="'+O+'" height="'+T+'" src="'+(deviantART.debug&&window.location.href.indexOf("file:")==0?"http://www.deviantart.com":"")+"/global/difi/?"+H+'"></iframe>';DRE.assert(I.firstChild,"eax.firstChild");DRE.assert(I.firstChild.tagName=="IFRAME","eax.firstChild.tagName == 'IFRAME'");DiFi.first_page=false}}}else{DRE.halt("Cannot send as "+N)}}}}for(S=0;M=K[S];S++){var S;if(typeof M.callback=="function"){M.callback=[M.callback];M.callback_obj=[M.callback_obj]}for(R=0;M.callback&&M.callback[R];R++){M.callback[R].call(M.callback_obj[R],true,M.result)}}},_urlescapeCall:function(A){eax=escape(A);eax=eax.replace(/\+/g,"%2B");eax=eax.replace(/\%u([\dABCDEF]{4})/g,"%26%23x$1%3B");eax=eax.replace(/\\u([\d0-9a-fA-F]{4})/g,"%26%23x$1%3B");return eax},_request:function(type,send,callbacks){var request,uriPrefix="";if(deviantART.debug&&(window.location.href.indexOf("file:")==0||location.href.indexOf("http://127.0.0.1/")==0)){if(Browser.isGecko){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}uriPrefix="http://www.deviantart.com"}if(window.XMLHttpRequest){request=new XMLHttpRequest}else{request=new ActiveXObject((Browser.isIE55?"Microsoft":"Msxml2")+".XMLHTTP")}if(type=="POST"){request.open(type,uriPrefix+"/global/difi/?",DiFi._async);request.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{request.open(type,uriPrefix+"/global/difi/?"+send,DiFi._async)}if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:"N/A"+Math.round(Math.random()*10000),type:"DiFi POST Request",src:unescape(send)})}if(Browser.isKHTML){DiFi._safariTimer=setTimeout(function(){return request},100000)}request.onreadystatechange=function(){if(window.DiFiBug){DiFiBug.sessionUpdate(request,"state"+request.readyState,"Status: "+request.status)}if(request.readyState==4){var data;if(request.status==200&&request.responseText!=""){if(Browser.isGecko&&(window.deviantART&&deviantART.debug)&&window.location.href.indexOf("file:")==0){netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead")}try{data=eval("("+request.responseText+")")}catch(e){data=null}if(window.DiFiBug){DiFiBug.sessionUpdate(request,"done","Status: "+request.status);DiFiBug.sessionUpdate(request,"copy",request.responseText)}}else{data=null;if(window.DiFiBug){DiFiBug.sessionUpdate(request,"error","Status: "+request.status);var asdfasdf=1}}if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:"N/A"+Math.round(Math.random()*10000),type:"DiFi XMLHTTP Response",data:data||("ERROR: "+request.responseText)})}DiFi._handleCallbacks(callbacks,data);if(Browser.isKHTML){clearTimeout(DiFi._safariTimer)}}return true};if(window.DiFiBug){DiFiBug.sessionUpdate(request,"begin",decodeURIComponent(send).replace(/\bui=[^\&]*\&/,""))}request.send(type=="POST"?send:"")},_callbackSI:function(D,C,B){var F,A,E;if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:D,type:"DiFi SI Response",data:C})}Bug.log("DiFi",(B?"nocache":"cache")+" SI done "+D);if(!B&&C&&C.DiFi&&(C.DiFi.status=="SUCCESS")){for(A=0;E=C.DiFi.response.calls[A];A++){if(E.response.status=="SUCCESS"){DiFi.cache(E.request["class"],E.request.method,E.request.args,E)}}}if(DiFi._siCallbacks[D]){Bug.log("DiFi","SI calling "+D);while(DiFi._siCallbacks[D].length>0){DiFi._handleCallbacks(DiFi._siCallbacks[D].shift(),C)}}else{Bug.log("DiFi","SI NOCALL "+D)}},_callbackPage:function(C,B,F){var E,A,D;if(window.DiFiBug){DiFiBug.sessionUpdate(F,"got iframe")}if(window.Profile&&deviantART.debug){Profile.add("DiFi",{id:C,type:"DiFi iframe ready",data:B})}if(DiFi._pageCallbacks[C]){DiFi._pageCallbacks[C][0](DiFi._pageCallbacks[C][1],B);DiFi._pageCallbacks[C]=null}else{if(window.DiFiBug){DiFiBug.sessionUpdate(F,"FAIL iframe",C)}}},_handleCallbacks:function(E,B){var C,G,F,H,I;H=B&&B.DiFi&&(B.DiFi.status=="SUCCESS");for(C=0;G=E[C];C++){if(!G[0]){continue}if(H){F=B.DiFi.response.calls[C];if(window.DIFI_RECORD){if(F.response.status=="SUCCESS"){DiFi.cache(F.request["class"],F.request.method,F.request.args,F)}}}else{if(B&&B.DiFi&&B.DiFi.response.details&&B.DiFi.response.details.calls){F=B.DiFi.response.details.calls[C]}else{I="No valid response received.";F={request:undefined,response:{status:"NOEXEC_HALT",content:(B&&B.DiFi.response)||{error:I,details:I,human:I}}}}}if(!(G[0] instanceof Array)){G[0]=[G[0]];G[1]=[G[1]]}if(vms_feature("dre")){if(B&&B.DiFi&&B.DiFi.developer_info&&B.DiFi.developer_info.profile_info){var D=B.DiFi.developer_info.profile_info;console.log("<a href='http://admin.deviantart.com/dre/share.php?dumpid="+D.dumpid+"&token="+D.dumptoken+"'>Browse in DRE</a>")}}for(var A=0;A!=G[0].length;A++){if(G[0][A]){G[0][A].call(G[1][A],((F||{}).response||{}).status=="SUCCESS",F||{response:{}})}}}},overrides:{},override:function(B,C,A){C=B+";"+C;DiFi.overrides[C]=A},ieAdClickProtection:function(){event.cancelBubble=true},findAdPollution:function(){var A,C,B;B=[];for(A=0;C=document.body.childNodes[A];A++){if(C.tagName=="DIV"&&((C.id||"").indexOf("prf")==0||C.className.toLowerCase().indexOf("prwrap")>=0)){B.push(C)}}return B.length},STR_ERR_BUFFER_PERIOD:500,stdErr:function(D,C,A){var B;if(!DiFi.stderr_output){DiFi.stderr_output=[]}B=this.stdErrFormat(C);DiFi.stderr_output.push(((D||"")+(D&&B?" - ":"")+(B||""))||"Unknown Error");setTimeout(DiFi.stdErrKaboom,A?1:DiFi.STR_ERR_BUFFER_PERIOD)},stdErrFormat:function(A){if((typeof A)=="string"){return A}if(A&&A.error){return A.error.human||A.error.details||A.error}return"Unknown Error"},stdErrKaboom:function(){var A;if(DiFi.stderr_output.length){A=DiFi.stderr_output.length>1?"Some errors have occurred:\n\n- ":"An error has occurred:\n\n";A+=DiFi.stderr_output.join("\n- ");DiFi.stderr_output=[];alert(A)}},stdErrCallback:function(B,A){if(!B){DiFi.stdErr("",A.response.content)}return B},quickPost:function(){DiFi.pushPost.apply(this,arguments);DiFi.send()},quickGet:function(){DiFi.pushPrivateGet.apply(this,arguments);DiFi.send()},pushGet:function(){DiFi.pushPrivateGet.apply(this,arguments)}};if(window.RECORDED_DIFI){DiFi.cached=window.RECORDED_DIFI}DiFi.showRecording=function(){prompt("Copy","window.RECORDED_DIFI = "+(JSON.stringify(DiFi.cached))+";")};if(window.DWait){DWait.run("jms/lib/difi.js")}function pluralize(C,A,B){return(C?C:"no")+" "+A+(C==1?"":(B||"s"))}function htmlspecialchars(A){return A.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;")}function time_string(J,K){var A,E,M,B,H,N,D,F,G,L,I,C;if(!Number(J)){return""}E={minutes:1000*60,hours:1000*60*60,days:1000*60*60*24,weeks:1000*60*60*24*7,months:1000*60*60*24*(365.25/12),years:1000*60*60*24*365.25};H=new Date();H.setTime(Number(J)*1000);B=new Date();L=B.valueOf()-H.valueOf();if(L<0){return"Moments ago"}if(L>3*(E.days)){C=true}A=["January","February","March","April","May","June","July","August","September","October","November","December"];M=["th","st","nd","rd","th"];N=H.getDate();I=A[H.getMonth()].substr(0,3)+" "+N+", "+H.getFullYear()+", "+((H.getHours()%12)||12)+":"+(H.getMinutes()>=10?"":"0")+H.getMinutes()+" "+(H.getHours()<12?"AM":"PM");D=[];for(G in E){if(L>E[G]){D.push(G);continue}}if(D.length==0){return"Moments ago"}D=D.slice(Math.max(D.length-(K||2),0));F=[];while(G=D.pop()){N=Math.floor(L/E[G]);L%=E[G];if(N>0){F.push(N+" "+(N==1?G.substr(G,G.length-1):G))}}F=F.join(", ")+" ago";return'<span title="'+(C?F:I)+'">'+(C?I:F)+"</span>"}if(window.DWait){DWait.run("jms/lib/formatting.js")}Popup={visible:[],clicks:{},create:function(B){var A;A={node:Tree.create("div.popup2"+((B||{}).className?" popup2-"+B.className:"")),options:B||{}};Tree.setObject(A.node,A);return A},getPosition:function(A,C){var B,D;D=Ruler.screen.node(A.node);if(C){D={x:C.x,y:C.y2,w:A.node.offsetWidth,h:A.node.offsetHeight};D.x2=D.x+D.w;D.y2=D.y+D.h;if(A.options.no_screen_adjust!=true){B=Ruler.screen.rect();if(A.options.no_screen_adjust!="x"){if(A.options.bias=="right"||(A.options.bias!="left"&&(D.x2+30)>B.x2)){D.x=Math.max(0,C.x2-D.w);D.x2=D.x+D.w}}if(A.options.no_screen_adjust!="y"){if(D.y2>B.y2||A.options.bias=="bottom"){D.y=Math.max(0,C.y-D.h);D.y2=D.y+D.h}}D.y+=window.pageYOffset||document.body.scrollTop;D.y2+=window.pageYOffset||document.body.scrollTop}if(A.options.allow_resize){D.w=D.x2-D.x;D.h=D.y2-D.y}}return D},show:function(A,B,D,E){var C,F;if(window.da_minish_lub&&da_minish_lub.collect_node&&!E){da_minish_lub.hide()}A.node.style.visibility="hidden";if(A.options.ontop){A.node.style.zIndex=201}document.body.insertBefore(A.node,document.body.firstChild);A.anchor=B;C=this.getPosition(A,B);A.node.style.left=C.x+"px";A.node.style.top=C.y+"px";if(!D){Popup.addShadow(A)}Popup.toggleIFrames(false,Ruler.screen.node(A.node));if(Popup.visible.length&&Popup.visible[Popup.visible.length-1].invincible){Popup.visible.push(A);Popup.complete(A)}else{A.node.style.visibility="visible";Popup.visible.push(A)}return true},addShadow:function(A){var B,C;return ;if(A.options.no_shadow){return }B=B=this.getPosition(A,A.anchor);C=Tree.create((Browser.isIE?"div":"img")+".popup2-shadow"+(A.options.className?" popup2-shadow-"+A.options.className:""),{style:{left:(B.x-16)+"px",top:(B.y-13)+"px",width:(Browser.isIE?B.w+"px":"auto"),height:(Browser.isIE?B.h+"px":"auto"),visibility:"hidden"},src:"http://sh.deviantart.net/shadow/alpha-000000/10.6667-0.7/"+B.w+"/"+B.h+"/null.png"});A.shadow_node=C;document.body.insertBefore(C,A.node);C.style.visibility="visible"},removeShadow:function(A){var B;if(A.options.no_shadow){return }if(Tree.hasClass(A.node.previousSibling,"popup2-shadow")){B=A.node.previousSibling}if(B){B.parentNode.removeChild(B)}},get:function(A){var B,C;C=A;if(!C.nodeType){DRE.assert(C==Tree.getObject(C.node));return C}B=Tree.ancestor(A,"div.popup2");return B?Tree.getObject(B):null},complete:function(C,A){var E,B,D;if(!C){B=Popup.visible[Popup.visible.length-1]}else{B=Popup.get(C)}if(B.invincible){return 0}Popup.toggleIFrames(true);for(D=0;Popup.visible[D];D++){if(B==Popup.visible[D]){Popup.visible.splice(D,1);break}}Popup.removeShadow(B);if(B.node.parentNode){B.node.parentNode.removeChild(B.node)}if(B.options.callback){return B.options.callback.call(B.options.callback_object||window,B,A||null)}return false},completeAll:function(){var A;A=0;while(Popup.visible.length){if(Popup.complete()===0){break}A++}return A},documentClick:function(F){var A,B,D,C,E;E=F.srcElement||F.target;if(!E.tagName){E=E.parentNode}if(E.tagName&&E.tagName.toLowerCase()=="span"){E=E.parentNode||E}D=Tree.link(E);if(!D){if(window.Selection&&window.Selection.mouseCancel&&!Popup.cancel_next_click&&!Popup.visible.length){Selection.mouseCancel()}Popup.cancel_next_click=false;return true}if(Popup.cancel_next_click){Popup.cancel_next_click=false;if(window.event){event.cancelBubble=true}return false}D=E;if(B=(D.getAttribute("popup")||((!window.Menus||Menus.zzLegacy)&&D.getAttribute("floater")))){A=Tree.getObject(D);if(!A){A=Popup.create({className:"click-"+B});A.options.ontop=true;A.options.callback=Popup.clickBack;A.options.callback_object=D;Tree.setObject(D,A);A.node.appendChild(Popup.clicks[B].create.call(Popup.clicks[B],A,D))}Tree.addClass(D,document.getElementById("overhead")?"active":"popup-active");C=Ruler.screen.node(D,true);if(D.id=="menulink"||D.id=="friendslink"){if(document.getElementById("logindock")||Tree.ancestor(D,"div.top-deviant-float")){C.y2=27;if(Browser.isIE){C.x2=Ruler.screen.rect().x2-127}}}Popup.show(A,C);if(window.event){event.cancelBubble=true}return false}},clickBack:function(B,A){var C;C=this;Tree.removeClass(C,document.getElementById("overhead")?"active":"popup-active");if(A&&C.getAttribute("onfloaterselection")){C.setAttribute("floaterresult",A);new Function(C.getAttribute("onfloaterselection")).call(C);return false}else{return true}},mouseCancel:function(D,C){var B,A;Popup.cancel_next_click=false;if(Popup.visible.length){if(Tree.ancestor(C,"div.popup2")){return }if(C.nodeType==1&&(C.getAttribute("popup")||C.getAttribute("floater"))&&(A=Tree.getObject(C))){for(B=0;B!=Popup.visible.length;B++){if(Popup.visible[B]==A){Popup.cancel_next_click=true;break}}}Popup.completeAll()}},wheelCancel:function(A){if(Popup.visible.length){return false}return true},keyPress:function(A){if(vms_feature("dre")){return true}if(Popup.visible.length){if(A.keyCode==27){Popup.complete();return false}}return true},blur:function(A){if(vms_feature("dre")){return true}if(Browser.isGecko){if(A.currentTarget==self&&A.eventPhase==2){Popup.completeAll()}}else{if(!Browser.isIE){Popup.completeAll()}}},toggleIFrame_stack:0,toggleIFrames:function(B,C){var F,D,E,A;Popup.toggleIFrame_stack+=(B?-1:1);if(!Popup.toggleIFrame_stack){setTimeout(Popup.toggleIFramesRefreshFallback,5)}else{Popup.toggleIFramesRefresh(C)}},toggleIFramesRefreshFallback:function(){if(!Popup.toggleIFrame_stack){Popup.toggleIFramesRefresh()}},toggleIFramesRefresh:function(A){hideables=Tree.gets("iframe").concat(Tree.gets("div.sitback_container"));if(document.getElementById("flash_target_1")){hideables.push(document.getElementById("flash_target_1"))}if(Browser.isIE){hideables=hideables.concat(Tree.gets(document.getElementById("output"),"select"))}for(i=0;hideables[i];i++){if(Popup.toggleIFrame_stack>0){if(A){rect=Ruler.screen.node(hideables[i]);overlap=((A.x<rect.x2&&rect.x<A.x2)&&(A.y<rect.y2&&rect.y<A.y2));if(!overlap){continue}}Tree.addClass(hideables[i],"menucompatible")}else{Tree.removeClass(hideables[i],"menucompatible")}}},go:function(A){if((window.Menus&&!A&&!Menus.zzLegacy)||arguments.callee.called){return }arguments.callee.called=true;Events.hook(document,"click",Popup.documentClick);Events.hook(document,"mousedown",Popup.mouseCancel);Events.hook(document,"keypress",Popup.keyPress);Events.hook(window,"blur",Popup.blur);Events.hook(window,"resize",Popup.completeAll);if(!Browser.isOpera){}},stop:function(A){if(!A){Events.unhook(document,"click",Popup.documentClick);Events.unhook(document,"mousedown",Popup.mouseCancel);Events.unhook(document,"keypress",Popup.keyPress);Events.unhook(window,"blur",Popup.blur);Events.unhook(window,"resize",Popup.completeAll);if(!Browser.isOpera){}}}};AutoExec.push(Popup.go);if(window.DWait){DWait.run("jms/lib/popup.js")}Popup.clicks.menu={create:function(C,D){var B,A,E;A=D.getAttribute("menuri");E=A.split("/");B=Pager.create({rootri:D.getAttribute("popuprootri")||E[0],href_base:D.getAttribute("popuphref")||D.getAttribute("href"),more_links:E[0]=="mood",master_links:E[0] in {art:1,gallery:1},theme:"dark",icon_set:A=="deviate"?"deviate":null,input:D.getAttribute("for")?document.getElementById(D.getAttribute("for")):null,callback:this.callback,callback_object:D});Pager.loadPage(B,A);DiFi.send();return B.node},callback:function(B,A){return Popup.complete(A.node,B)}};if(window.DWait){DWait.run("jms/lib/popup.js.menu.js")}window.Pager={more:{},overrides:[],create:function(B){var A,C;if(Browser.isIE){try{document.execCommand("BackgroundImageCache",false,true)}catch(D){}}B=B||{};if(B.paned){C=Tree.create("div.pager-panes pager-"+B.theme)}else{C=Tree.create("div.pager-holder pager-"+B.theme)}if(B.auto_height){}if(B.breadcrumb_stack){Tree.addClass(C,"pager-holder-stackable")}C.appendChild(Tree.create("div.jsid-pager "+(B.class_name||"pager2")+(B.icon_set?" pager2-icons iconset-"+B.icon_set:"")));A={options:B,node:C,pages:{},selection:B.selection};Tree.setObject(A.node,A);MenuTraffic.register(Pager.dataAvailable,A);return A},getFromNode:function(A){return Tree.getObject(Tree.ancestor(A,"div.jsid-pager").parentNode)},render:{page:function(D,C,B){var F,A,E;F=Tree.create("div.page2");if(!D.options.paned&&(C.length>1||C[0])){E=Tree.create("div.top");F.appendChild(E);A=B.split("/");while(C.length){A.pop();Tree.insertBefore(Tree.create(D.options.breadcrumb_stack?"a.f backback":"a.f back",{href:"",menuri:A.join("/"),onclick:"return Pager.clickBack(this) ? true : Events.stop();",style:D.options.breadcrumb_stack?{textIndent:"10px",paddingLeft:Math.max(0,-3+((C.length-1)*8))+"px"}:{}},D.options.breadcrumb_stack?MenuTraffic.titles[A.join("/")]||(A.length==1?"All Categories":A[A.length-1]):"Back"),E.firstChild,E);if(!D.options.breadcrumb_stack){break}C.pop()}F.appendChild(Tree.create("div.busy pagescroll pagescroll-space"))}else{F.appendChild(Tree.create("div.busy pagescroll"))}return F},menuHTML:function(E,N,L){function J(O,P){var Q;if(!O){return""}Q=P[0]=="gallery"?2:1;return O[0]+"/"+(P.length>Q?(P.slice(Q).join("/")+"/"):"")+(O[1]||"")}var G,A,M,F,H,B,D,C,K,I;G=[];if(N.disable_clicks){B=""}else{B=' onclick="return Pager.clickBack(this) ? true : Events.stop();" '}if(N.href_base){H=N.href_base.split("%s");if(!H[1]){H[1]=""}H[0]=H[0].replace(/\/$/,"")}if(N.master_links){if((typeof E.all)=="string"){K=E.all}else{if(E.title){K=E.title+": All"}else{K="All"}}if(K){G.push('<a menuri="'+E.path.join("/")+'" href="'+(E.href||J(H,E.path))+'" class="f" '+B+">"+K+"</a>")}}for(F=0;F!=Pager.overrides.length;F++){if(A=Pager.overrides[F](E,N,G,B,L)){return A.join("")}}for(F=0;M=E.children[F];F++){if(I!=undefined&&M.flag!=I){G.push('<div class="hr">-</div>')}I=M.flag;html_click="";href=M.href||J(H,M.path);if(M.children!=null){html_class="f more"}else{html_class="f"}if(M.children&&N.more_links){G.push('<a menuri="'+E.children[F].path.join("/")+'" href="'+href+'" class="rr f more" '+B+">more</a>");G.push('<a menuri="'+E.children[F].path.join("/")+'" href="'+href+'" class="ll f" '+B+">")}else{if(E.children[F].path){G.push('<a menuri="'+E.children[F].path.join("/")+'" ')}else{G.push("<a ")}G.push('href="'+href+'" class="'+html_class+'" '+B+">")}if(N.icon_base_url&&M.icon){G.push('<img src="'+N.icon_base_url+M.icon+'" alt=""/> ')}else{if(N.icon_set&&M.icon){G.push('<i class="icon i'+M.icon+'"></i> ')}}G.push(M.title+"</a>")}return G.join("")}},loadPage:function(B,A,E,D){var C;C=B.pages[A];if(!C){C=B.pages[A]={node:Pager.render.page(B,A.substr(((B.options.rootri+"/")||"").length).split("/"),A),ready:false};if(!B.options.paned){Events.hook(C.node,"contextmenu",Pager.backBack)}Pager.showPage(B,A,E,D);MenuTraffic.get(A)}else{Pager.pageSelect(B,C.node);Pager.showPage(B,A,E,D);Pager.pageDisplayed(B,A)}},select:function(B,A){var C;B.selection=A;if(B.options.input){DRE.notice("pager.options.input in use");B.options.input.value=A}if(B.options.callback){C=B.options.callback.call(B.options.callback_object||window,A,B)}return C},backBack:function(B){var A;A=Tree.gets(Tree.ancestor(this,"div.page2"),"a.back").pop();if(A){Pager.clickBack(A)}return false},clickBack:function(E,B){var A,D,C;E.blur();A=Pager.getFromNode(E);if(A.options.editable&&!(Tree.hasClass(E,"more")||Tree.hasClass(E,"back")||Tree.hasClass(E,"backback"))){Pager.editOn(E);return false}D=Tree.ancestor(E,"div.page2");if(!B){B=E.getAttribute("menuri")}if(Tree.hasClass(E,"more")){if(A.options.callback_immediately){Pager.select(A,B)}if(A.options.paned){Pager.pageSelect(A,D);Tree.addClass(E,"more-selected")}Pager.loadPage(A,B,D,"next");return false}else{if(Tree.hasClass(E,"back")||Tree.hasClass(E,"backback")){if(A.options.callback_immediately){Pager.select(A,B)}Pager.loadPage(A,B,D,"previous");return false}}if(A.options.input||A.options.callback){if(A.options.paned){Pager.clearPages(A,D,"next")}if(Pager.select(A,B)){return true}Pager.pageSelect(A,D,E);return false}return true},dataAvailable:function(A,B){if(this.pages[A]&&!this.pages[A].ready){if(B==undefined){Pager.pageFail(this,A)}else{Pager.pageReady(this,A,B)}}},pageFail:function(pager,ri){with(Tree.get(pager.pages[ri].node,"div.pagescroll")){className=className.replace(/\bbusy\b/,"broken")}delete pager.pages[ri]},pageReady:function(pager,ri,data){var page,page_html;if(data.children==null){if(ri.indexOf("/")>0){Pager.loadPage(pager,ri.split("/").reverse().slice(1).reverse().join("/"))}return }page=pager.pages[ri];if(page.ready){}page_html=Pager.render.menuHTML(data,pager.options,page.node);with(Tree.get(page.node,"div.pagescroll")){className=className.replace(/\bbusy\b/,"");while(firstChild){removeChild(firstChild)}innerHTML=page_html}Pager.pageSelect(pager,page.node);page.ready=true;Pager.pageDisplayed(pager,ri)},pageDisplayed:function(B,A){DRE.assert(B.pages[A]);B.ri=A;if(B.options.paned&&B.jump_target){if(B.jump_target.indexOf(A)==0){Bug.log(B.jump_target,"match with "+A);Pager.more.jumpThrough(B,B.pages[A].node,A)}else{Bug.log(B.jump_target,"miss with "+A);B.jump_target=null}}if(B.options.auto_height){this.adjustHeight(B)}},pageSelect:function(B,A,E){var J,F,G,C,H,D,I;if(typeof B.selection!="string"){return }F=B.selection.split("/");J=F.pop().split("-");if(J.length>1){G=F.concat([J[1]]).join("/");F=F.concat([J[0]]).join("/")}else{F=B.selection}H=Tree.gets(Tree.get(A,"div.pagescroll"),"a.f");for(C=0;H[C];C++){if(Tree.hasClass(H[C],"more")){if(B.options.paned){Tree.removeClass(H[C],"more-selected")}}else{I=false;if(G){if(H[C].getAttribute("menuri")==F){F=G;D=!D;I=true}else{I=D}}else{if(H[C].getAttribute("menuri")==F&&H[C]==(E||H[C])){I=true}}if(I){Tree.addClass(H[C],"selected")}else{Tree.removeClass(H[C],"selected")}}}},clearPages:function(B,C,A){DRE.assert(A in {next:0,previous:0});if(B.options.paned){}A+="Sibling";while(C[A]){C.parentNode.removeChild(C[A])}},adjustHeight:function(B,E){E=E||B.pages[B.ri].node;var F=Tree.get(E,"div.top");var A=F?F.offsetHeight:0;var D=Tree.get(E,"div.pagescroll");D=D?D.children:false;if(D){for(var C=D.length-1;C>=0;C--){A+=D[C].offsetHeight}}B.node.style.height=A+"px";if(B.options.adjust_height_callback){B.options.adjust_height_callback.call(this,B,E,A)}},showPage:function(C,B,E,A){var D,F;D=C.pages[B].node;if(E){if(!(A=="previous"&&E.previousSibling==D)){Pager.clearPages(C,E,A)}D.style.left=(parseInt(E.style.left)+E.offsetWidth*(A=="next"?1:-1))+"px"}else{A="next";D.style.left=0;while(C.node.firstChild.firstChild){C.node.firstChild.removeChild(C.node.firstChild.firstChild)}C.node.firstChild.style.width="auto"}if(A=="next"){C.node.firstChild.appendChild(D)}else{if(!(A=="previous"&&E.previousSibling==D)){C.node.firstChild.insertBefore(D,E)}}if(E){if(C.options.paned){C.node.firstChild.style.width=parseInt(C.node.firstChild.lastChild.style.left)+E.offsetWidth+"px";C.node.scrollLeft=parseInt(E.style.left)+E.offsetWidth}else{Station.push(C.node.firstChild,"left",{from:parseInt(C.node.firstChild.style.left||0),to:-parseInt(D.style.left),f:Interpolators.pulse,time:350})}}else{C.node.firstChild.style.left=0}C.last_loaded_ri=B},reload:function(B){var A;A=B.last_loaded_ri||B.options.rootri;delete B.pages[A];Pager.loadPage(B,A)},editOn:function(A){var B;if(A.getAttribute("menuri")&&A.lastChild.nodeType!=1){B=A.lastChild.nodeValue;if(!A.getAttribute("pager_original_text")){A.setAttribute("pager_original_text",B)}A.removeChild(A.lastChild);A.appendChild(Tree.create("input.itext",{type:"text",value:B,onblur:"Pager.editOff(this.parentNode)",onkeypress:"if ((window.event || arguments[0]).keyCode == 13)this.blur()"}));A.lastChild.focus()}},editOff:function(A){var B;B=A.lastChild.value;A.removeChild(A.lastChild);A.appendChild(document.createTextNode(B||"???"))}};if(window.DWait){DWait.run("jms/lib/pager.js")}DWait.ready(["jms/lib/difi.js"],function(){window.MenuTraffic={cache:{},register:function(A,B){this.registry.push([A,B])},registry:[],titles:[],get:function(A){var D,C,B;if((D=this.cache[A])&&!this.cache[A]["volatile"]){this.shout(A);if(D.children==null||(!D.children[0].path)){return }if(this.cache[D.children[0].path.join("/")]){return }if(MenuTraffic.news_hack&&A.indexOf("news/")==0){return }if(MenuTraffic.no_prefetch){return }for(B=0;D.children[B];B++){if(D.children[B].children!=null){break}}if(!D.children[B]){return }}else{if(C=this.overrides[A.split("/")[0]]){if(D=C.call(this,A)){if(D!=true){this.cache[A]=D;this.shout(A)}return }}}DiFi.pushGet("Menu","get",[A,2],this.difi_got,this);if(!MenuTraffic.AUTO_DIFI_OFF){DiFi.send()}},difi_got:function(B,A){this.got.call(this,B,A.request.args[0],A.response.content,true)},got:function(F,A,E){var G,D,C,B;if(!F){delete MenuTraffic.cache[A]}else{this.cache[A]=E;if((E.path instanceof Array)&&(C=E.title_path)){for(D=0;D!=C.length;D++){this.titles[E.path.slice(0,D+1).join("/")]=C[D]}}if(G=E.children){for(D=0;G[D];D++){if(G[D].children&&G[D].children.length){this.cache[G[D].path.join("/")]=G[D];for(B=0;G[D].children[B];B++){this.titles[G[D].children[B].path.join("/")]=G[D].children[B].title}}this.titles[G[D].path.join("/")]=G[D].title}}}this.shout(A)},shout:function(A){var B,C;C=this.cache[A];B=-1;while(this.registry[++B]){this.registry[B][0].call(this.registry[B][1],A,C)}},overrides:{},getTitles:function(A){var D,C,B,E;D=A.split("/");E=[];for(C=0;C!=D.length;C++){B=D.slice(0,C+1).join("/");if(MenuTraffic.titles[B]){E.push(MenuTraffic.titles[B])}else{if(MenuTraffic.cache[B]){E.push(MenuTraffic.cache[B].title||D[C])}else{}}}return E}};if(window.DWait){DWait.run("jms/lib/menutraffic.js")}});Ruler={document:{node:function(B,E){var F=B,D={x:0,y:0},A,C;D.w=F.offsetWidth;D.h=F.offsetHeight;do{C=Browser.isKHTML&&F.className=="tt-a tt-tv150";if(!C){D.x+=F.offsetLeft;D.y+=F.offsetTop}}while(C?F=F.parentNode:F=F.offsetParent);D.x2=D.x+D.w;D.y2=D.y+D.h;if(E){return Ruler.scrollCompensate(B,D)}return D},pointer:function(C,A){var B={x:C.clientX,y:C.clientY};if(Browser.isIE){B.x+=document.body.scrollLeft;B.y+=document.body.scrollTop}else{if(Browser.isChrome||Browser.isSafari3||!Browser.isKHTML){B.x+=window.pageXOffset;B.y+=window.pageYOffset}}if(A){B.x+=A.x;B.y+=A.y}Ruler.mouseCache=B;return B}},screen:{rect:function(){return{x:Browser.isGecko?window.pageXOffset:document.body.scrollLeft,y:Browser.isGecko?window.pageYOffset:document.body.scrollTop,w:window.innerWidth||document.body.clientWidth,h:window.innerHeight||document.body.clientHeight,x2:window.innerWidth||document.body.clientWidth,y2:window.innerHeight||document.body.clientHeight}},safeRect:function(C,B){var A;A=Ruler.screen.rect();if(C.x2>A.x2){C.x=Math.max(0,(B?B.x2:A.x2)-C.w);C.x2=C.x+C.w}if(C.y2>A.y2){C.y=Math.max(0,(B?B.y:A.y2)-C.h);C.y2=C.y+C.h}return C},node:function(D,C){var B,A;B=Ruler.document.node(D,C);A=Browser.isGecko?window.pageYOffset:document.body.scrollTop;B.y-=A;B.y2-=A;return B},pointer:function(C,A){var B={x:C.clientX,y:C.clientY};if(Browser.isKHTML&&!(Browser.isSafari3||Browser.isChrome)){B.x-=window.pageXOffset;B.y-=window.pageYOffset}if(A){B.x+=A.x;B.y+=A.y}return B}},clickMod:function(B,A){B.x-=A.x;B.y-=A.y;return B},boxModel:function(A){if(A=="width"){return n.offsetWidth-(parseInt(Station.read(n,"padding-left"))+parseInt(Station.read(n,"padding-right"))+parseInt(Station.read(n,"border-left-width"))+parseInt(Station.read(n,"border-right-width")))}else{if(A=="height"){return n.offsetHeight-(parseInt(Station.read(n,"padding-top"))+parseInt(Station.read(n,"padding-bottom"))+parseInt(Station.read(n,"border-top-width"))+parseInt(Station.read(n,"border-bottom-width")))}}dre_warning('Received dim=="'+A+'"; expected "width" or "height"')},hitTest:function(A,C,B){var D;if(!(C instanceof Array)){C=[C]}for(i=0;i!=C.length;i++){var D=C[i];if((A.x>D.x+(B?B.x:0))&&(A.y>D.y+(B?B.y:0))&&(A.x<D.x2+(B?B.x:0))&&(A.y<D.y2+(B?B.y:0))){return i}}return null},scrollCompensate:function(B,A){while((B=B.parentNode)&&B!=document.body){if(B.scrollTop){A.y-=B.scrollTop;A.y2-=B.scrollTop}if(B.scrollLeft){A.x-=B.scrollLeft;A.x2-=B.scrollLeft}if(window.getComputedStyle&&getComputedStyle(B,"").getPropertyValue("position")=="fixed"){A.y+=Browser.isGecko?window.pageYOffset:document.body.scrollTop;A.y2+=Browser.isGecko?window.pageYOffset:document.body.scrollTop;A.x+=Browser.isGecko?window.pageXOffset:document.body.scrollLeft;A.x2+=Browser.isGecko?window.pageXOffset:document.body.scrollLeft}}return A}};Ruler.document.mouse=Ruler.document.pointer;Ruler.screen.mouse=Ruler.screen.pointer;if(window.DWait){DWait.run("jms/lib/ruler.js")}Station={INTERVAL:25,DRAW_EVERY_FRAME:false,SPEED:1,data:[],animations:[],passiveGet:function(B){var A;for(A=0;A!=Station.data.length;A++){if(Station.data[A][0]==B){return Station.data[A]}}return null},addNode:function(B){var A=[B,{}];Station.data.push(A);return A},activeGet:function(A){return(Station.passiveGet(A)||Station.addNode(A))},nullInterpolator:function(A){return A},push:function(C,I){var G,H,D,F,B,E,A;D=Station.activeGet(C);F=Station.animations.length;E=2;A=(new Date()).valueOf();while(arguments[E]){var G;if((typeof arguments[E])=="function"){G=arguments[E]}else{H=arguments[E].from;if(H===undefined){H=Station.read(D,I)||0}G={data:D,property:I,from:H,to:arguments[E].to,f:arguments[E].f||Station.nullInterpolator,marker:A};if(this.numbers[I]=="substr"){G.special=G.to;G.from=0;G.to=G.special.length}if(G.velocity){G.px=G.from-G.velocity;document.title=G.velocity}if(arguments[E].time!=undefined||!arguments[E].f){G.ticktock=0;G.ticks=Math.max(Math.round(((arguments[E].time||0)*Station.SPEED)/Station.INTERVAL),1)}}if(B){B.STATION_next=G}else{Station.animations.push(G)}B=G;E++;if(typeof arguments[E]=="string"){I=arguments[E++]}}Station.loopOn();return F},run:function(){var A;A=Station.push.apply(this,arguments);Station.loop(A);return A},stopAnimation:function(C){var B,A;for(B=0;B!=Station.animations.length;B++){A=Station.animations[B];if(A&&A.data&&A.data[0]==C){Station.animations[B]=null}}},numbers:{left:"px",top:"px",bottom:"px",right:"px",marginLeft:"px",marginTop:"px",marginBottom:"px",marginRight:"px",paddingLeft:"px",paddingTop:"px",paddingBottom:"px",paddingRight:"px",borderLeft:"px",borderTop:"px",borderBottom:"px",borderRight:"px",width:"px",height:"px",fontSize:"px",opacity:"float",zoom:"float",scrollLeft:"direct",scrollTop:"direct",innerHTML:"direct",nodeValue:"substr",backgroundPositionX:"bgxhax",backgroundPositionY:"bgyhax",zIndex:"",letterSpacing:"px"},loop:function(H){var B,F,A,E,D,G,C;if(!Station.looper){return }C=(new Date()).valueOf();for(F=(H||0);F!=Station.animations.length;F++){if(H>=0&&H!=F){return }B=Station.animations[F];if(!B){continue}if(H==undefined&&(B.ticks||B.complete)){if(B.complete||B.ticktock>=B.ticks){Station.animations[F]=null;while((typeof B.STATION_next)=="function"){B.STATION_next.call(B,B.data[0]);B=B.STATION_next}if(B.STATION_next){B.STATION_next.marker=C;Station.animations.push(B.STATION_next)}continue}else{B.ticktock+=Math.max(1,Math.floor(((C-B.marker)*Station.SPEED)/Station.INTERVAL));B.marker=C;B.ticktock=Math.min(B.ticktock,B.ticks)}}G=true;if(typeof B.to=="string"||!Station.numbers[B.property]){to=B.to}else{if(B.ticks){A=B.ticktock/B.ticks;y=B.f(A);to=B.from+(y*(B.to-B.from))}else{if(B.px==undefined){B.px=B.from}D=B.f(B.from-B.to,B.px-B.to);B.px=B.from;B.complete=D.complete;to=B.to+D.result;B.from=to}}Station.apply(B.data,B.property,to,B.special)}if(!G){Station.loopOff()}},apply:function(C,E,D,B){var A;if(C.nodeType){C=Station.activeGet(C)}if(A=Station.numbers[E]){switch(A){case"float":if(Browser.isIE&&E=="opacity"){C[0].style.filter="alpha(opacity="+(D*100)+")"}else{C[0].style[E]=D}break;case"substr":C[0][E]=B.substr(0,Math.round(D));break;case"direct":C[0][E]=D;break;case"bgxhax":C[0].style.backgroundPosition=Math.round(D)+"px 0";break;case"bgyhax":C[0].style.backgroundPosition="0 "+Math.round(D)+"px";break;default:C[0].style[E]=Math.round(D)+A}}else{C[0].style[E]=D}C[1][E]=D},loopOn:function(){if(!Station.looper){Station.looper=setInterval("Station.loop.call(Station)",Station.INTERVAL)}},loopOff:function(){if(Station.looper){clearInterval(Station.looper);Station.looper=null;Station.animations.length=0}},stop:function(A){Station.animations[A]=null},read:function(B,C){var A;if(B.nodeType){A=Station.passiveGet(B)}else{A=B}if(A){return A[1][C]}else{if(Browser.isIE){return B.runtimeStyle[C]||B.currentStyle[C]}else{C=C.replace(/([A-Z])/g,"-$1").toLowerCase();return B.style[C]||getComputedStyle(B,"").getPropertyValue(C)}}},looper:null,f:{inversion:function(A){return function(B){return 1-A(1-B)}}},overlayEnd:function(A){A.parentNode.removeChild(A)},overlay:function(B){var A;A=B.cloneNode(true);Station.apply(A,"opacity",0.99);Station.apply(A,"position","absolute");Station.apply(A,"width",B.offsetWidth);Station.apply(A,"zIndex",30);A.disabled=true;B.parentNode.insertBefore(A,B);return A}};var interpolatorPulseNormalize=1;var Interpolators={line:function(A){return A},sineCurve:function(A){return Math.sin(0.5*Math.PI*A)},pulse:function(A){var C,B;if(interpolatorPulseNormalize==1&&A!=1){interpolatorPulseNormalize=1/arguments.callee(1)}A=A*8;if(A<1){C=A-(1-Math.exp(-A))}else{var D=Math.exp(-1);A-=1;B=1-Math.exp(-A);C=D+(B*(1-D))}return C*interpolatorPulseNormalize}};Vadavadavada={spring:function(A,D){var E,C,B;B=A-D;C=0.2;E=-A*C;B+=E;A+=B;A*=1-1/Math.pow((Math.abs(A/2000)+1.3),2);return{result:A,complete:!(Math.round(A)||Math.round(D))}}};if(window.DWait){DWait.run("jms/lib/station.js")}Tree={tag:function(A){return String(A.tagName).toLowerCase()},gets:function(B,C,G){var H,J,D,A,F,E,I;if(typeof arguments[0]=="string"){C=arguments[0];G=arguments[1];B=document}else{if(B&&B.nodeType==11){E=B;B=document.createElement("div");B.appendChild(E)}}C=C.split(".");J=C[0]||"*";if(C[1]){H=" "+C[1]+" "}if(Browser.isIE55&&J=="*"){A=B.all}else{A=B.getElementsByTagName(J)}D=-1;F=[];while(A[++D]){if(H){if((" "+A[D].className+" ").indexOf(H)<0){continue}}F.push(A[D]);if(F.length==G){break}}if(E){while(B.firstChild){E.appendChild(B.firstChild)}}return F},get:function(B,A){if(arguments.length<2){A=arguments[0];B=document}if(A.charAt(0)=="#"){return B.getElementById(A.substr(1))}else{return Tree.gets(B,A,1)[0]}},create:function(C,B,F){var E,G,D,A;if(this.nodeType==9){A=this}C=C.split(".");G=(A||document).createElement(C[0]);if(C[1]){G.className=C[1]}if(F){if(!(F instanceof Array)){F=[F]}for(E=0;E!=F.length;E++){if(typeof F[E]=="string"){G.appendChild((A||document).createTextNode(F[E]))}else{G.appendChild(F[E])}}}for(E in B){if(E=="style"){for(D in B.style){G.style[D]=B.style[D]}}else{if(Browser.isIE&&E.match(/^on/)){G[E]=new Function(B[E])}else{G.setAttribute(E,B[E])}}}return G},destroy:function(A){A.parentNode.removeChild(A);delete A},ancestor:function(D,B){var A,C,E;E=(D.ownerDocument||D.document).documentElement;B=B.split(".");if(B[1]){C=" "+B[1]+" "}A=B[0];do{if(A&&Tree.tag(D)!=A){continue}if(C&&(" "+D.className+" ").indexOf(C)<0){continue}return D}while((D=D.parentNode)&&D!=E)},link:function(A){while(A&&A.nodeType!=1&&(A=A.parentNode)){}if(Tree.tag(A)=="a"){return A}},_objectStorage:{},getObject:function(D,A,C){var B;DRE.assert((!C)||C==true);if(!A){A="default"}if(!Tree._objectStorage[A]){return null}if(D.id||D.uniqueID){if(C){delete Tree._objectStorage[A][D.id||D.uniqueID];return }return Tree._objectStorage[A][D.id||D.uniqueID]}else{for(B=0;B!=Tree._objectStorage[A].length;B++){if(Tree._objectStorage[A][B].node==D){if(C){Tree._objectStorage[A].splice(B,1);return }return Tree._objectStorage[A][B].obj}}}},unsetObject:function(B,A){Tree.get(B,A,true)},setObject:function(C,A,D){var B;if(!D){D=A;A="default"}if(!Tree._objectStorage[A]){Tree._objectStorage[A]=[]}if(C.id||C.uniqueID){Tree._objectStorage[A][C.id||C.uniqueID]=D}else{for(B=0;B!=Tree._objectStorage[A].length;B++){if(Tree._objectStorage[A][B].node==C){Tree._objectStorage[A][B].obj=D;return D}}Tree._objectStorage[A].push({node:C,obj:D})}return D},addClass:function(B,A){B.className+=" "+A},removeClass:function(D,A){var C,B,E;C=D.className.split(" ");E=[];for(B=0;B!=C.length;B++){if(C[B]!=A){E.push(C[B])}}D.className=E.join(" ")},hasClass:function(B,A){try{return(" "+B.className+" ").indexOf(" "+A+" ")>-1}catch(C){return false}},setText:function(A,B){A.innerHTML="";A.appendChild(A.ownerDocument.createTextNode(B))},setHTML:function(B,A){B.innerHTML=A},getText:function(A){return A.textContent||A.innerText},getInstance:function(D,C,F,A){var E,B;if(C.indexOf(".")==-1){C="div."+C}D=Tree.ancestor(D,"div");E=Tree.getObject(D,"class");if((!E)&&F){B=A||F.default_args||[];E=new F(B[0],B[1],B[2],B[3],B[4],B[5],B[6],B[7],B[8],B[9]);Tree.setObject(D,"class",E)}return E},insertBefore:function(B,C,A){if(!C){A.appendChild(B)}else{C.parentNode.insertBefore(B,C)}},createFragment:function(B,D){var A,C;C=this&&this.nodeType==9?this:document;A=C.createDocumentFragment();A.appendChild(Tree.create("div"));A.firstChild.innerHTML=B;if(D){DRE.assert(A.firstChild.childNodes.length<=1,"Cannot yoink from multi-child-havin' fragment");return A.firstChild.firstChild}while(A.firstChild.firstChild){A.appendChild(A.firstChild.firstChild)}A.removeChild(A.firstChild);return A}};if(window.DWait){DWait.run("jms/lib/tree.js")}Shadows={getBackground:function(B){var A;if(!Browser.isIE){return"alpha"}if(B.currentStyle){A=B.currentStyle.backgroundColor;if(A!="transparent"){return A.substr(1,6).toUpperCase()}}if(B.parentNode){return arguments.callee(B.parentNode)}},go:function(){},nodes:function(B){var F,E,C,A,G,D,H;F=Tree.gets((B&&B.nodeType&&B)||document.documentElement,"span.shadow");for(E=0;F[E];E++){if((F[E].style.backgroundImage||"").length>6||F[E].className.indexOf("mild")>=0){continue}if(D=F[E].getAttribute("shadowsize")){A=parseInt(D);G=D.split("x").pop()}else{C=Tree.get(F[E],"img");if(C){A=C.width;G=C.height}}if(A&&G){background=Shadows.getBackground(F[E]);if(A>=70&&G>=50){if(A>=100&&G>=70){H="logo3.png"}else{H="small3.png"}}else{H="null.png"}F[E].style.backgroundImage="url(http://sh.deviantart.net/shadow/"+background+"-000000/2.6667-0.35/"+A+"/"+G+"/"+H+")"}}}};AutoExec.push(Shadows.go);if(window.DWait){DWait.run("jms/lib/shadows.js")}LiquidSwitch=function(B,A){this.f=B;this.initial_state=A;this.state=A};LiquidSwitch.prototype={destroy:function(A){if(!A){this.state=this.start_state;this.target_time=null;this.tick()}if(this.ticker){clearInterval(this.ticker)}},change:function(C,D,B,E){var A;this.interrupt=true;A=(new Date()).valueOf();if(this.target_time&&C==this.target_state){this.target_time=Math.min(this.target_time,A+D)}else{this.target_time=A+D}this.target_time=Math.max(this.target_time,(this.last_change||0)+B);this.target_state=C;if(E&&C==this.state){this.state=null}if(!this.ticker){this.ticker=setInterval(bind(this,this.tick),25);this.tick()}},tick:function(){var A;A=(new Date()).valueOf();if(!this.target_time||A>=this.target_time){if(this.ticker){clearInterval(this.ticker)}this.ticker=null;this.target_time=null;if(this.target_state!=this.state){this.interrupt=false;if(this.f(this.target_state,this.state)!==false&&!this.interrupt){this.last_change=A;this.state=this.target_state}}}}};if(window.DWait){DWait.run("jms/lib/liquidswitch.js")}window.LinkedShadows={ready:false,nodes:{cache:null},init:function(){with(this.nodes){cache=Tree.get("#linkedshadowcache")}},hasShadow:function(B,A){return B.previousSibling&&Tree.hasClass(B.previousSibling,A+"-shadow")},add:function(A,H,I,B){DRE.assert(A&&H&&I,"LinkedShadows.remove called with <3 arguments");var D,C,G,E,F;if(location.href.indexOf("https://")==0){return }F=H+"-shadow loading";if(this.hasShadow(A,H)){return }if(H==("floater")&&window.Modals&&Modals.stack.length>0){F+=" modalshadowhack"}Station.apply(A,"display","block");I.marginLeft=((parseInt(I.marginLeft)||0)-16)+"px";I.marginTop=((parseInt(I.marginTop)||0)-13)+"px";I.display="block";if(Browser.isIE){D=Tree.create("div."+H+"-shadow",{style:I});A.parentNode.insertBefore(D,A)}else{G=parseInt(I.width);E=parseInt(I.height);delete I.width;delete I.height;D=Tree.create("img."+F,{style:{display:"none"},onload:" Tree.removeClass(this,'loading'); ",src:"http://sh.deviantart.net/shadow/alpha-000000/10.6667-0.7/"+G+"/"+E+"/null.png"});for(C in I){D.style[C]=I[C]}A.parentNode.insertBefore(D,A)}},remove:function(C,A){DRE.assert(C&&A,"LinkedShadows.remove called with <2 arguments");if(!this.hasShadow(C,A)){return }var B=C.previousSibling;Tree.addClass(C,"loading");Tree.addClass(B,"loading");C.parentNode.removeChild(B);if(this.nodes.cache){this.nodes.cache.appendChild(B);B.className=""}},getCached:function(B,D){this.init();if(this.nodes.cache){var C,A=this.nodes.cache.getElementsByTagName("img");for(C=0;A[C];C++){if(A.width==B&&A.height==D){return A[C]}}}return null}};window.Modals={ready:false,stack:[],holdernode:null,init:function(){document.body.appendChild(Modals.holdernode=Tree.create("div",{id:"modalspace"},Tree.create("i.fade"+(Modals.lightfade?" autrefade":""))));this.ready=true;this.init=new Function()},getStyles:function(E){var D,B,A,C;A=Math.max(E.offsetWidth,280);C=Math.max(E.offsetHeight,100);if(C>(window.innerHeight||document.body.clientHeight)){B=true}D={top:B?((document.body.scrollTop||document.documentElement.scrollTop)+10)+"px":"50%",left:E.style.left?E.style.left:"50%",width:A+"px",height:C+"px",marginLeft:-Math.floor(A/2)+"px",marginTop:B?0:-Math.floor(C/2)+"px"};return D},applyStyles:function(B){var A=Modals.getStyles(B);for(i in A){B.style[i]=A[i]}return A},push:function(A,F){var B;if(window.Popup){Popup.completeAll();if(Popup.visible.length){return }}Modals.init();if(Modals.stack.length>0){var E=Modals.stack[Modals.stack.length-1][0];E.style.zIndex=199;LinkedShadows.remove(E,"modal")}Modals.holdernode.style.height=Math.max(window.innerHeight||document.body.clientHeight,document.body.offsetHeight,document.body.scrollHeight||0)+"px";Station.apply(Modals.holdernode,"display","block");var D=Tree.create("div.loading modal",{},[Tree.create("a.x"+(Browser.isMac?" x-mac":""),{href:"",onclick:'Modals.pop("cancel");return false'},"x"),A]);Modals.stack.push([D,F]);if(!this||!this.no_form_hook){Events.hook(D,"submit",Modals.submit)}Station.apply(A,"display","block");Modals.holdernode.appendChild(D);var C=Modals.applyStyles(D);if(Browser.isGecko&&this&&this.gecko_fix){Tree.removeClass(D,"loading")}else{LinkedShadows.add(D,"modal",C,100)}Events.hook(D,"keydown",Modals.escape);if(!this||!this.no_form_hook){Events.hook(D,"click",Modals.click)}if(Modals.stack.length==1){Popup.toggleIFrames(false);if(Math.max(D.offsetHeight,100)<(window.innerHeight||document.body.clientHeight)){Tree.addClass(document.body,"modal-active");if(Browser.isIE){document.body.runtimeStyle.backgroundImage="url(http://st.deviantart.com/minish/main/blank.gif)";document.body.runtimeStyle.backgroundAttachment="fixed"}}else{Tree.addClass(document.body,"scrolling-modal-active")}}return D},pop:function(A){var B=Modals.stack[Modals.stack.length-1],F=null;if(B){if(typeof B[1]=="function"){var E;E=(B[0].tagName=="FORM")?B[0]:Tree.get(B[0],"form");if(B[1].call(B[0],A,E?Modals.serializeForm(E):null)==false){return false}}if(B[0].onsubmit&&B[0].onsubmit.calls){Events.unhook(B[0],"submit",Modals.submit);Events.unhook(B[0],"click",Modals.click)}Events.unhook(B[0],"keydown",Modals.escape);LinkedShadows.remove(B[0],"modal");if(B[0].parentNode){Modals.holdernode.removeChild(B[0])}}Modals.stack.pop();if(Modals.stack.length==0){Popup.toggleIFrames(true);Station.apply(Modals.holdernode,"display","none");if(Browser.isIE){document.body.runtimeStyle.backgroundAttachment="scroll"}Tree.removeClass(document.body,"scrolling-modal-active");Tree.removeClass(document.body,"modal-active")}else{var D=Modals.stack[Modals.stack.length-1][0];D.style.zIndex=201;var C=Modals.getStyles(D);LinkedShadows.add(D,"modal",C,1000)}},refreshShadow:function(){var A,B;if(!Modals.stack.length){return }B=Modals.stack[Modals.stack.length-1][0];LinkedShadows.remove(B,"modal");A=Modals.getStyles(B);A.height=(B.getElementsByTagName("div")[1]||{}).offsetHeight;LinkedShadows.add(B,"modal",A,100)},close:function(D,A){if(Modals.stack.length==0){return }for(var B=Modals.stack.length-1;B>=0;B--){if(Modals.stack[B][0]==D){var C=Modals.stack[B];Modals.stack.splice(B,1);Modals.stack.push(C);Modals.pop(A);break}}},escape:function(A){if(A.keyCode==27){if(window.Popup&&Popup.visible.length){Popup.completeAll()}else{Modals.pop("cancel")}}},click:function(B){var C,A;C=B.srcElement||B.target;if(C.tagName=="INPUT"&&C.type=="submit"&&(A=Tree.ancestor(C,"form"))&&Tree.ancestor(C,"div.modal")==Modals.stack[Modals.stack.length-1][0]){if(C.name=="cancel"||(window.validateForm?validateForm(A,true):true)){Modals.pop(C.name)}if(window.event){event.cancelBubble=true}return false}},submit:function(A){if(window.event){event.cancelBubble=true}return false},serializeForm:function(D){var E={};var A=Modals.getFormControls(D);var C=A.length;for(var B=0;B<C;B++){var F=A[B];if(!F.name){continue}if(F.type=="radio"){if(F.checked){E[F.name]=F.value}}else{if(F.type=="checkbox"){if(F.checked&&F.name.indexOf("[]")>0){var G=F.name.split("[]")[0];if(!E[G]){E[G]=new Array()}E[G].push(F.value)}else{E[F.name]=F.checked}}else{E[F.name]=F.value}}}return E},getFormControls:function(B,A){var E;var J=[];var I=B.getElementsByTagName("input");var F=I.length;if(F){for(E=0;E<F;E++){J.push(I[E])}}var H=B.getElementsByTagName("select");var D=H.length;if(D){for(E=0;E<D;E++){J.push(H[E])}}var G=B.getElementsByTagName("textarea");var K=G.length;if(K){for(E=0;E<K;E++){J.push(G[E])}}if(!A){return J}var C=Array();for(E=0;J[E];E++){if(A&&(J[E].name==A)){C.push(J[E])}}return C}};if(window.DWait){DWait.run("jms/legacy/modals.js")}Cookies={on:function(){Events.hook(document.documentElement,"click",Cookies.bump)},off:function(){Events.unhook(document.documentElement,"click",Cookies.bump)},interval:null,bump:function(){var B,A,C;B=((deviantART||{}).pageData||{}).for_Cookies;B=B instanceof Array?null:B;if(B){url=String(window.location.href).split("?")[0].replace(/[^a-zA-Z0-9\#]/g,"_").toLowerCase();B.url=url;var D=new Array();for(A in B){D.push(A+'"'+B[A])}C=new Date();C.setMinutes(C.getMinutes()+4);document.cookie="cnc2="+D.join(",")+"; expires="+C.toGMTString()+"; path=/; domain=.deviantart."+document.domain.substr(document.domain.length-3)}},prepareRedirect:function(A,C){var B;A=(A).split("?")[0].replace(/[^a-zA-Z0-9\#]/g,"_").toLowerCase();C.url=A;var D=new Array();for(B in C){D.push(B+'"'+C[B])}document.cookie="cnc2="+D.join(",")+"; path=/; domain=.deviantart."+document.domain.substr(document.domain.length-3);Cookies.redirecting=true},redirect:function(A,B){Cookies.prepareRedirect(A,B);window.location.href=A}};AutoExec.push(Cookies.on);if(window.DWait){DWait.run("jms/lib/cookies.js")}Keeper={register:function(){var A},deregister:function(){},master_on:function(){var targets,i,client;targets=document.getElementsByTagName("keeper");for(i=0;targets[i];i++){DRE.assert(targets[i].getAttribute("for"));client=eval(targets[i].getAttribute("for"));DRE.assert(client&&typeof client.on=="function"&&typeof client.off=="function");client.on.call(client,targets[i].parentNode)}},master_off:function(){}};AutoExec.push(Keeper.master_on);if(window.DWait){DWait.run("jms/lib/keeper.js")}REG_OLD_DEVIATION=/^h[t]tp:\/\/[^\.]+\.deviantart\....\/(?:deviation|view)\/()([0-9]+)\/?$/;REG_DEVIATION=/^h[t]tp:\/\/[^\.]+\.deviantart\....\/(?:art\/)?([0-9A-Za-z\-\.]+)\-([0-9]+)\/?$/;Smoothie={thumbs:{on:function(A){Keeper.register(this,A);return ;Events.hook(A,"click",Smoothie.thumbs.clickBack)},off:function(A){Keeper.deregister(this,A);Events.unhook(A,"click",Smoothie.thumbs.clickBack)},clickBack:function(F){var E,C,A,D,B;if(window.Admin&&Admin.active){return }C=Tree.ancestor(F.srcElement||F.target,"a");if(C){E=C.href.match(REG_DEVIATION);if(!E){E=C.href.match(REG_OLD_DEVIATION)}if(E){D=Smoothie.thumbs.getInfo(C,C);dre_assert(D.q);A=D.label;if(!A){A=document.title;A=A.replace(/\bon deviantART\b/g,"");A=A.replace(/\bdeviantART:?\b/g,"");A=A.replace(/\s+/g," ");A=A.replace(/(?:^\s|\s$)/g,"")}B={link:D.link||window.location.href,label:A,q:D.q,offset:D.offset};if(D.qx){B.qx=D.qx}Cookies.prepareRedirect(C.href,B)}}return true},getFirstChild:function(A){A=A&&A.firstChild;while(A&&A.nodeType!=1&&(A=A.nextSibling)){}return A},getInfo:function(C,G){var B,A,H,E,I,F,D;B=C;while(B=B.parentNode){A=Smoothie.thumbs.getFirstChild(B);if(A&&A.tagName=="KEEPER"&&A.getAttribute("for")=="Smoothie.thumbs"){break}}if(!B){return{uhh:true}}B=Tree.get(B,"smoothie");dre_assert(B,"Smoothie element should not be missing when Keeper element called it");H=null;if(G&&(shadow=Tree.ancestor(G,"span.shadow"))){I=B.parentNode;F=Tree.gets(I,"span.shadow");if(F[F.length-1]==shadow){if(F[0]==shadow){H=0}else{H=-1}}else{if(F[0]==shadow){H=1}}}E={label:B.getAttribute("label"),link:B.getAttribute("link"),q:B.getAttribute("q"),qx:H==B.getAttribute("qx")||B.getAttribute("qx")==0?H:null,offset:B.getAttribute("offset")};return E}}};if(window.DWait){DWait.run("jms/lib/smoothie.js")}function pluralize(C,A,B){return(C?C:"no")+" "+A+(C==1?"":(B||"s"))}function htmlspecialchars(A){DRE.assert(typeof A=="string","REJECTED");return A.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;")}function thumbHTML(D){var C,B,E,A,G,F;G=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sep","Oct","Nov","Dec"];C=[];C.push('<div class="tt-a" hakkadeviationid='+D.id+">");if(D.is_film){C.push('<keeper for="FilmBox2"></keeper>')}C.push('<span class="tt-w"><span class="');if(D.is_transparent){C.push("mild shadow")}else{C.push("shadow")}C.push('">');if(D.is_mature&&D.mature_filter_on){if(D.url){C.push("<a");if(D.option_link){C.push(' style="cursor:default" target="_blank"')}C.push(' href="');C.push(htmlspecialchars(D.url));C.push('" class="ismature" style="width:');C.push(D["thumb"+D.size]["width"]);C.push("px;height:");C.push(D["thumb"+D.size]["height"]);C.push('px"');C.push(">")}C.push('<i></i><img width="');C.push(D["thumb"+D.size]["width"]);C.push('" height="');C.push(D["thumb"+D.size]["height"]);C.push('" src="');C.push('"/>');if(D.url){C.push("</a>")}}else{if(D.is_film&&D.size=="150"&&D.url){C.push("<a");if(D.option_link){C.push(' target="_blank"')}C.push(' style="_margin-top:');C.push(Math.floor((165-D.thumbfilm.height)/2));C.push(";width:");C.push(D.thumbfilm.width);C.push("px;height:");C.push(D.thumbfilm.height);C.push('px" href="');C.push(htmlspecialchars(D.url));C.push('" class="film"><i></i><img style="_position:absolute;_top:0;_left:0" src="http://sh.deviantart.net/shadow/alpha-8B928B/0-1/');C.push(D.thumbfilm.width);C.push("/");C.push(D.thumbfilm.height);C.push('/null.png" width="');C.push(D.thumbfilm.width);C.push('" height="');C.push(D.thumbfilm.height);C.push('"/><b class="film"><img');if(!D.option_link){C.push(' onclick="if (this.attachEvent && navigator.cpuClass)this.parentNode.parentNode.click()"')}C.push(' alt="" src="');C.push(D.thumbfilm.src);C.push('"/></b></a>')}else{if(D.excerpt&&Number(D.size)>=150){C.push("<a");if(D.option_link){C.push(' style="cursor:default" target="_blank"')}C.push(' href="');C.push(htmlspecialchars(D.url));C.push('" class="lit" onmouseover="LitBox.hover(this)" onmouseout="LitBox.out(this)"><i></i>');C.push('<img style="_position:absolute;_top:0" src="http://sh.deviantart.net/shadow/alpha-ABB2AB/0-1/');C.push(D.thumb150.width);C.push("/");C.push(D.thumb150.height);C.push('/null.png" width="');C.push(D.thumb150.width);C.push('" height="');C.push(D.thumb150.height);C.push('"/><img class="lit" src="');C.push(D.excerpt_icon);C.push('"/><q><strong>');C.push(D.title);C.push("</strong>");C.push(D.excerpt);C.push("</q></a>")}else{if(D.url){C.push("<a");if(D.option_link){C.push(' style="cursor:default" target="_blank"')}C.push(' href="');C.push(htmlspecialchars(D.url));C.push('" title="');C.push(htmlspecialchars(D.tooltip));C.push('">')}C.push('<i></i><img width="');C.push(D["thumb"+D.size]["width"]);C.push('" height="');C.push(D["thumb"+D.size]["height"]);C.push('" src="');C.push(D["thumb"+D.size]["src"]);C.push('"');if(D.is_transparent){C.push(' class="transparent"')}C.push("/>");if(D.url){C.push("</a>")}}}}C.push("</span>");if(D.checkbox_mode){C.push('<input type="checkbox" class="checkbox" name="deviationids[]" value="');C.push(D.id);C.push('"/>')}A="";if(D.film_time){E=D.film_time;A+='<b class="filmtime" title="Film: ';A+=pluralize(Math.floor(E/60),"minute");if(E%60){A+=", "+pluralize(E%60,"second")}A+='">';if((E/60)>99){A+="Long"}else{A+=Math.floor(E/60)+":"+(((E%60)>10)?(E%60):"0"+(E%60))}A+="</b>"}if(D.option_link){C.push('<a href="" class="thumbmenu"><img src="http://s.deviantart.com/minish/gallery/menu-button-b.gif" alt="[menu]"/></a>')}else{if(D.title){C.push(' <a href="'+D.url+'" title="'+htmlspecialchars(D.tooltip)+'">'+D.title);C.push(A);A="";C.push("</a><br/><small>")}if(D.artist){C.push(" by ");C.push(D.artist_symbol+'<a href="http://'+D.artist+'.deviantart.com/">'+D.artist+"</a>")}if(D.category){C.push(" in ");if(D.category_url){F=D.category_url;F=F.replace(/^h[t]tp:\/\/browse\.deviantart\.com[\/]/,"#_browse/");C.push('<a title="');C.push(htmlspecialchars(D.tooltip));C.push('" href="');C.push(htmlspecialchars(F));C.push('">')}C.push(htmlspecialchars(D.category));C.push("</a>")}if(D.ts){B=new Date();B.setTime(Number(D.ts)*1000);C.push(", "+G[B.getMonth()]);C.push(" '"+String(B.getFullYear()).substr(Math.max(String(B.getFullYear()).length-2,0)))}if(D.search_score){C.push(" at "+D.search_score)}C.push(A);A="";if(D.title){C.push("</small>")}}C.push("</span></div>");return C.join("")}if(window.DWait){DWait.run("jms/lib/thumbhtml.js")}TV150View={on:function(A){Keeper.register(this,A);Events.hook(A,"mousemove",TV150View.mouseMove);Events.hook(A,"mouseout",TV150View.mouseOut)},off:function(A){Keeper.deregister(this,A);Events.unhook(A,"mousemove",TV150View.mouseMove);Events.unhook(A,"mouseout",TV150View.mouseOut)},mouseMove:function(G,F){var A,B,E,D,C;E=Tree.ancestor(F,"div.tv150");if(!E){return }A=Tree.gets(E,"div.tt-a");B=A.length;C=Math.min(Math.ceil((Math.max(Ruler.document.pointer(G).x-Ruler.document.node(E).x,0.001)/125)*B))-1;Tree.get(E,"div.a-stream").style.left=-(C*205)+"px"},mouseOut:function(B,A){A=Tree.ancestor(A,"div.tv150");if(A){Tree.get(A,"div.a-stream").style.left=0}}};if(window.DWait){DWait.run("jms/lib/tv150view.js")}TV200View={on:function(A){Keeper.register(this,A);Events.hook(A,"mousemove",TV200View.mouseMove);Events.hook(A,"mouseout",TV200View.mouseOut)},off:function(A){Keeper.deregister(this,A);Events.unhook(A,"mousemove",TV200View.mouseMove);Events.unhook(A,"mouseout",TV200View.mouseOut)},mouseMove:function(H,G){var E,B,A,F,D,C;F=Tree.ancestor(G,"div.tv200");if(!F){return }E=Tree.get(F,"div.tv200-fazoom");A=Tree.get(E,"img");if(!A){return }B=Math.floor((A.width||A.offsetWidth)/200);C=Math.ceil((Math.max(Ruler.document.pointer(H).x-Ruler.document.node(F).x,0.001)/208)*B)-1;E.style.left=-(C*200)+"px"},mouseOut:function(B,A){A=Tree.ancestor(A,"div.tv200");if(A){Tree.get(A,"div.tv200-fazoom").style.left=0}}};if(window.DWait){DWait.run("jms/lib/tv200view.js")}window.FilmBox={hover:function(D){var C,E,A,B;D=D.getElementsByTagName("b")[0];Station.stopAnimation(D);E=parseInt(Station.read(D,"left"))||0;C=150;A=[D,"left"];while(E>-(C*5)){A=A.concat([{from:E,to:E=((E-C)-(E%C)),time:300,f:Interpolators.pulse},{from:E,to:E,time:700}])}Station.run.apply(Station,A)},out:function(A){A=A.getElementsByTagName("b")[0];Station.stopAnimation(A);Station.run(A,"display",{to:"block",time:25},"left",{from:parseInt(Station.read(A,"left")||0),to:0,f:Interpolators.pulse,time:600})}};if(window.DWait){DWait.run("jms/lib/filmbox.js")}window.LitBox={hover:function(A){A=A.getElementsByTagName("q")[0];Station.stopAnimation(A);Station.run(A,"top",{from:parseInt(Station.read(A,"top")||0),to:parseInt(Station.read(A,"top")||0)-3000,time:3000*25*3})},out:function(A){A=A.getElementsByTagName("q")[0];Station.stopAnimation(A);Station.run(A,"display",{to:"block",time:100},"top",{from:parseInt(Station.read(A,"top")||0),to:0,f:Interpolators.pulse,time:600})}};if(window.DWait){DWait.run("jms/lib/litbox.js")}(function(B){var A;B("i.pointsicon").live("mouseenter",function(F){if(!A){A=B("<div><h3>deviantART Points</h3>Click on the Points icon to learn more about deviantART Points and how to get them</div>").css({"-moz-border-radius":"6px","-webkit-border-radius":"6px","border-radius":"6px",border:"1px solid #909e90",background:"#E6EDE4",position:"absolute",width:250,padding:"1ex",display:"none","z-index":400}).appendTo("body")}var E=B(this).css("cursor","pointer");var G=E.offset();var D=G.top+E.height()+5;var C=G.left-(A.width()/2);if(D<0){D=5}if(C<0){C=0}if((C+250)>document.innerWidth){C=document.innerWidth-255}A.css({top:D,left:C}).fadeIn("fast")}).live("mouseleave",function(C){if(A){A.fadeOut("fast")}}).live("click",function(C){C.preventDefault();if(A){A.hide()}window.open("http://my.deviantart.com/account/points/")})})(jQuery);if(window.DWait){DWait.run("jms/lib/explain_points.js")}window.Subby={warning:function(link,verb,resource){var bubble,c;Tree.addClass(link,"subble");bubble=Tree.getObject(link,"subby");if(bubble){bubble.style.display="block"}else{bubble=Tree.create("div.subblebubble",{style:{visibility:"hidden"}},[(verb||"Get")+" ",resource?Tree.create("strong.subby",{},resource):"this feature"," when you upgrade to ",Tree.create("strong.subby",{style:{whiteSpace:"nowrap"}},"Premium Membership"),".",Tree.create("div.bottom",{},"Click for more info.")]);document.body.appendChild(bubble);Tree.setObject(link,"subby",bubble)}with(Popup.getPosition({node:bubble,options:{}},Ruler.document.node(link))){bubble.style.left=x+"px";bubble.style.top=y+"px"}bubble.style.visibility="visible"},out:function(B){var A;A=Tree.getObject(B,"subby");if(A){A.style.display="none";A.style.visibility="hidden"}Tree.removeClass(B,"subble")}};if(window.DWait){DWait.run("jms/pages/subby.js")}REG_OLD_DEVIATION=/^h[t]tp:\/\/[^\.]+\.deviantart\....\/(?:deviation|view)\/()([0-9]+)\/?$/;REG_DEVIATION=/^h[t]tp:\/\/[^\.]+\.deviantart\....\/(?:art\/)?([0-9A-Za-z\-\.]+)\-([0-9]+)\/?$/;Blogobox={get:function(A){return Tree.ancestor(A,"div.pimp")},noteModal:function(){var A;A=Modals.push.call({gecko_fix:true},document.getElementById("pimp").cloneNode(true));A.getElementsByTagName("kbd")[0].innerHTML=Browser.isMac?"&#8984; enter":"Ctrl-Enter";try{A.getElementsByTagName("input")[0].focus()}catch(B){}},next:function(A,C){var B,D;if(Browser.isOpera){Tree.ancestor(A,"div.modal").style.overflow="hidden"}A=Tree.get(this.get(A),"div.pimp-holder");B=Tree.get(A,"div.pimp-"+C);if(D=Tree.get(A,"div.active")){Tree.removeClass(D,"active")}B.className+=" active";if(Browser.isMac&&C=="note"){Tree.get(B,"kbd").innerHTML="&#8984; enter"}Station.push(A,"left",{from:0,to:-450,time:200,f:Interpolators.pulse},function(){var E;if(C=="note"){Tree.get(B,"input.itext").focus()}else{if(C=="space"){E=Tree.get(B,"textarea");E.select();if(!E.getAttribute("pimp_original")){E.setAttribute("pimp_original",E.value);E.onchange=E.onclick=E.onkeypress=Blogobox.embedChange}}}});return cancelEvent()},embedChange:function(){var A=this;setTimeout(function(){if(A.value!=A.getAttribute("pimp_original")){A.value=A.getAttribute("pimp_original")}A.select()},1)},back:function(A){A=Tree.get(this.get(A),"div.pimp-holder");Station.push(A,"left",{from:-450,to:0,time:200,f:Interpolators.pulse});return cancelEvent()},noteFocus:function(A){Tree.get(Tree.get(this.get(A),"div.pimp-note"),"textarea").focus();return cancelEvent()},noteFriend:function(node){var floater_result;if(floater_result=node.getAttribute("floaterresult")){with(Tree.get(Tree.get(this.get(node),"div.pimp-note"),"input.itext")){if(value!=""){value=String(value).replace(/(^\s+|\s+$)/g,"")+", "+floater_result}else{value=floater_result}focus()}}},note:function(node){var notes,input,to,i,duplicates,href,matches;notes={node:null,id:null,deviants:[],remaining:0,wants_comment:null};notes.node=Tree.get(this.get(node),"div.pimp-note");if(Tree.get(notes.node,"input.isend").disabled){return }href=Tree.get(Tree.get(notes.node,"div.preview"),"a").href;matches=href.match(REG_DEVIATION);if(!matches){matches=href.match(REG_OLD_DEVIATION)}notes.id=matches[2];input=Tree.get(notes.node,"input.itext");to=input.value.replace(/ /g,",").split(",");duplicates={};for(i=0;i!=to.length;i++){if(to[i]){if(!duplicates[to[i]]){duplicates[to[i]]=true;notes.deviants.push({username:to[i],error:null})}}}for(i=0;notes.deviants[i];i++){notes.remaining++;DiFi.pushPost("Notes","pimp",[notes.id,notes.deviants[i].username,Tree.get(notes.node,"textarea").value],this.noteDone,notes)}if(notes.deviants.length){with(Tree.get(notes.node,"input.isend")){disabled=true;style.cursor="wait";value="Sending"}notes.wants_comment=Boolean(window.TalkPostWrapper&&GMI.query("TalkPostWrapper")[0]);DiFi.send()}else{input.value="";input.focus();this.flashNode(input)}},flashNode:function(A){Station.push(A,"visibility",{to:"hidden",time:150},{to:"visible",time:150},{to:"hidden",time:150},{to:"visible",time:150},{to:"hidden",time:150},{to:"visible",time:150})},keep_message:null,noteDone:function(F,E){var C,B,D,G,A;if(!E.request){if(!--this.remaining){Blogobox.sendOver(this.node);alert("Unable to connect to deviantART to send your note.\n\nPlease try again.")}return }for(C=0;this.deviants[C];C++){if(this.deviants[C].username==E.request.args[1]){if(F){}else{this.deviants[C].error=E.response.content.error}break}}if(--this.remaining==0){if(window.LOTCC){LOTCC.bcpw("act","share deviation");LOTCC.bcpw("int","devianART")}B=0;D=0;G=[];for(C=0;this.deviants[C];C++){if(this.deviants[C].error){D++;G.push('<img src="http://e.deviantart.com/emoticons/f/frown.gif" alt=""/> Couldn\'t send to '+this.deviants[C].username)}else{B++;G.push('<img src="http://e.deviantart.com/emoticons/s/smile.gif" alt=""/> Sent to '+this.deviants[C].username)}}A=Tree.get(Blogobox.get(this.node),"div.funzone");Station.push(A,"opacity",{to:0},"display",{to:"block"},"opacity",{from:0,to:1,time:300,f:Interpolators.sineCurve});if(D>0){G='<div class="readout">'+G.join("<br/>")+'</div><input type="button" class="iclose" value="Back" onclick="Blogobox.screenOff(this)"/>'}else{G='<div class="readout" '+(G.length==1?' style="text-align:center" ':"")+">"+G.join("<br/>")+"</div>"+((deviantART.pageData.pimp_deviation_artist!=deviantART.pageData.pimp_me&&this.wants_comment)?('<div class="pp">Don\'t forget to <a class="a" href="#reply" onclick="setTimeout(Blogobox.leaveComment, 1)">leave a comment</a>'+(deviantART.pageData.pimp_deviation_artist?" for the artist":"")+"!</div>"):"")+'<form><input type="button" class="iclose" value="Close" onclick="Modals.pop()"/></form>'}Blogobox.sendOver(this.node);A.innerHTML=G}},leaveComment:function(){var A;Modals.pop();GMI.query("TalkPostWrapper").pop().talkpost.focus()},sendOver:function(node){with(Tree.get(node,"input.isend")){value="Send";style.cursor="default";disabled=false}},screenOff:function(A){A=Tree.get(this.get(A),"div.funzone");Station.push(A,"opacity",{from:1,to:0,time:250,f:Interpolators.sineCurve},"display",{to:"none"})},inputKey:function(B,A){if(B.keyCode==13){if(((Browser.isMac&&B.metaKey)&&!Browser.isOpera)||B.ctrlKey){Blogobox.note(A);return cancelEvent(B)}else{if(A.tagName=="INPUT"){Tree.get(Tree.ancestor(A,"div.pimp-note"),"textarea").focus()}}}return true}};if(window.DWait){DWait.run("jms/pages/blogobox.js")}function popupSitback(G,F,C,A){var E="http://justsitback.deviantart.com";var D="menubar=no,width=640,height=480,toolbar=no,status=no,location=no,directories=no,resizable=yes";if(Browser.isIE){G="Slideshow"}var B=E+"?title="+encodeURIComponent(G)+"&rssQuery="+F;window.open(B,"SitBack",D);if(window.event){event.cancelBubble=true}return false}if(window.DWait){DWait.run("jms/pages/sitback.js")}window.GMIBase=Base.extend({constructor:function(B,A){this.gmi_node=B;this.gmi_args=A||{};this.gmiConstructor()},gmiConstructor:function(){},gmiQuery:function(J,F,E,L){var C,A,H,K,B,I,G,D,M;if(typeof arguments[0]=="string"){L=arguments[2];E=arguments[1];F=arguments[0];J=this.gmi_node||document}if(!E){E={}}G=[];C=document.getElementsByName("gmi-"+F);if(J!=document){A=[];for(H=0;H!=C.length;H++){for(K=C[H];K;K=K.parentNode){if(K==J){A.push(C[H]);break}}}}else{A=C}D=GMIBase.getConstructor(F);for(H=0;B=A[H];H++){if(E.match){I=1;for(K in E.match){if(String(B.getAttribute("gmi-"+K)||"")!=String(E.match[K])){I=0;break}}if(!I){continue}}M=GMIBase.getOne(B,D,L);if(M!=-1&&M!=null){G.push(M)}}return G},gmiUp:function(B,E,F){var C,D;C=arguments[0]&&arguments[0].nodeType?1:0;D=C?arguments[0]:this.gmi_node;B=arguments[0+C];E=arguments[1+C];F=arguments[2+C];if(B){B="gmi-"+B}var A;while(F||(D=D.parentNode)){F=false;if(D.getAttribute){if(A=D.getAttribute("gmi-redirect")){D=GMIBase.index[A].gmi_node;F=1}else{if(D.getAttribute("name")&&((!B)||D.getAttribute("name")==B)){if(E){E--;continue}return GMIBase.getOne(D)}}}}},gmiApply:function(E,C,A,D){var F,B;E.setAttribute("gmindex",B=(++GMIBase.current_lookup));if(!D){E.setAttribute("id","gmi-"+C);E.id="gmi-"+C}E.setAttribute("name","gmi-"+C);E.name="gmi-"+C;F=GMIBase.getConstructor(C);return GMIBase.index[B]=new F(E,A)},gmiCreate:function(B,A){return GMI.gmiApply(document.createElement("div"),B,A)}});GMIBase.index={};GMIBase.current_lookup=0;GMIBase.getOne=function(node,constructor_shortcut,passive){var eax,i,a,options;i=node.getAttribute("gmindex");if(!i){if(passive){return null}options={};for(i=0;a=node.attributes[i];i++){if(a.name.indexOf("gmi-")==0){options[a.name.substr(4)]=a.value}else{if(a.name.indexOf("gmon-")==0){options[a.name.substr(5)]=eval("("+a.value+")")}}}node.setAttribute("gmindex",i=(++GMIBase.current_lookup));GMIBase.index[i]=-1;constructor_shortcut=constructor_shortcut||GMIBase.getConstructor(node.getAttribute("name").substr(4));eax=new constructor_shortcut(node,options);GMIBase.index[i]=eax}return GMIBase.index[i]};GMIBase._deleteNode=function(B){var A;A=GMIBase.getOne(B,null,true);if(A){return this._delete(A)}else{if(B.parentNode){B.parentNode.removeChild(B)}}delete B};GMIBase._delete=function(D,A){var C,B;if(D instanceof Array){for(B=0;B!=D.length;B++){arguments.callee.call(this,D[B],A)}return }C=D.gmi_node;if(D.gmiDestructor){D.gmiDestructor()}D.gmi_deleted=1;delete GMIBase.index[C.getAttribute("gmindex")];delete D;C.setAttribute("gmindex","");if(A){return }if(C.parentNode){C.parentNode.removeChild(C)}if(!window.attachEvent){C.innerHTML=""}delete C};GMIBase.getConstructor=function(name){try{return eval(name)}catch(e){return new Function("",'throw new Error("GMI Class not declared: '+name+'")')}};GMIBase.default_constructor=function(B,A){throw new Error("Default GMI constructor used")};window.GMI=GMI=new GMIBase;GMI.getOne=GMIBase.getOne;GMI.query=GMI.gmiQuery;GMI.up=GMI.gmiUp;GMI.apply=GMI.gmiApply;GMI.create=GMI.gmiCreate;GMI._delete=GMIBase._delete;GMI._deleteNode=GMIBase._deleteNode;GMI.evCancel=function(){if(window.event){event.cancelBubble=true}return false};window.$gm=GMI.gmiQuery;if(window.DWait){DWait.run("jms/lib/gmi.js")}window.Gruser=GMIBase.extend({});if(!window.GMFrame_BluesBar){window.GMFrame_BluesBar=GMIBase.extend({})}if(window.DWait){DWait.run("jms/pages/gruzecontrol/gruser.js")}DWait.ready(["jms/lib/gmi.js","jms/lib/browser.js","jms/lib/popup.js","jms/lib/ruler.js","jms/lib/station.js"],function(){if(!window.GPage){window.GPage=GMIBase.extend({gmiConstructor:function(){}})}window.BluesBar={hiddenMenu:function(E,C,H){var A,D,F,G,I,B;if(window.event){event.cancelBubble=true}if(this.menu_on||!C&&this.treshold&&this.treshold>(new Date).valueOf()){return false}this.ieFix(E);if(!this.gmi_called){this.gmi_called=true;DWait.ready(["jms/lib/gmi.js","jms/pages/gruzecontrol/gmframe_bluesbar.js"],bind(this,this.frameReady))}D=E.getAttribute("href").split("#").pop();B=D.split("-").pop();if(B!="give"){E.className+=" active"}this.menu_on=E;A=Popup.create({className:"gruser-"+B,callback:bind(this,this.hiddenMenuDone),no_screen_adjust:"y",no_shadow:Browser.isIE});A.node.className+=" popup2-gruser";A.node.appendChild(document.getElementById(D).cloneNode(true));A.node.firstChild.style.display="block";if(E.offsetWidth>257||H){A.node.style.width=(E.offsetWidth+3)+"px"}if(B in {stats:1,stats2:1,activity:1}){this.verify(B,A.node.firstChild,E)}F=Ruler.screen.node(E);G=(Ruler.screen.node(E.parentNode.parentNode).y2-F.y2)-2;if(G>10||B in {give:1,stats2:1}){}else{this.zNodes(E,240);if(!Browser.isIE){}}if((B in {stats:1,stats2:1})&&!GMI.query("GMFrame_BluesBar")[0]){F.x=190;F.x2=191}if(B=="buttons"){F.x-=192;F.x2-=192}setTimeout(bind(Popup,Popup.show,A,F,false),1);this.callFrame(A);return false},verify:function(C,E,D){var B,F,A;if(B=(E.getElementsByTagName("difi")||[])[0]){if(!this[C+"_node"]){if(C in {stats:1,stats2:1}){F=document.createElement("span");F.className="bars"}else{F=document.createElement("div");F.className="ploading";F.style.paddingTop="16px";F.innerHTML="Loading..."}this[C+"_node"]=F;if(F=GMI.query("GMFrame_BluesBar")[0]){A=F.gmi_args.id}else{A=GMI.up(D,"GMFrame_Gruser").gmi_args.id}switch(C){case"activity":DiFi.pushPrivateGet("GrusersUserpageinfoModule","getActivityDetails",[GMI.query("Gruser")[0].gmi_args.id,A],bind(this,this.difiReady,C));break;case"stats":case"stats2":DiFi.pushPrivateGet("GrusersModules","displayModule",[GMI.query("Gruser")[0].gmi_args.id,A,"stats_pageviews",{}],bind(this,this.difiReady,C));break;default:throw new Error("?? "+C)}DiFi.timer(1)}B.parentNode.replaceChild(this[C+"_node"],B)}},difiReady:function(A,C,B){if(A=="activity"){this[A+"_node"].className=""}this[A+"_node"].innerHTML=C?B.response.content.html:"[error: "+B.response.content+"]";if(A in {stats:1,stats2:1}){this.animateGraph(this[A+"_node"])}},animateGraph:function(B){var A;A=B.getElementsByTagName("span");for(i=0;i!=A.length;i++){if(A[i].className=="bar"){Station.push(A[i],"top",{from:44,to:44,time:(A.length-i)*25},{from:44,to:0,time:150,f:Interpolators.pulse})}}},hiddenMenuMouse:function(C,B){var A;if(BluesBar.mouseover_timer){clearTimeout(BluesBar.mouseover_timer);BluesBar.mouseover_timer=null}A=(C.getElementsByTagName("span")||[])[0];this.ieFix(C);if(!this.menu_on&&A&&A.className=="bluestip"&&A!=BluesBar.last_mouseover){BluesBar.last_mouseover=A;Station.run(A,"opacity",{from:0,to:1,time:155,f:Interpolators.sineCurve});C.onmouseout=this.hiddenMenuOut}if(this.menu_on&&this.menu_on!=C){if(Popup.completeAll()){this.hiddenMenu(C,true)}}},ieFix:function(B){var A;if(Browser.isIE){A=(B.getElementsByTagName("span")||[])[0];if(A&&!A.style.width){A.style.width=A.parentNode.offsetWidth+"px"}}},hiddenMenuOut:function(){BluesBar.mouseover_timer=setTimeout("BluesBar.last_mouseover = null",10)},hiddenMenuDone:function(A){this.menu_on.className=this.menu_on.className.replace(/\bactive\b/g,"");this.zNodes(this.menu_on,20);this.treshold=(new Date).valueOf()+200;this.menu_on=false;this.callFrame(null);delete A.node},zNodes:function(B,E){var A,D,C;if(Browser.isIE){return }if(GMI.up(B,"GPage")){A=[B.parentNode.parentNode]}else{D=GMI.up(B,"Gruser").gmi_node;A=[D.getElementsByTagName("div")[1]];A.push((document.getElementById("top")||document.getElementById("overhead")).lastChild);C=GMI.query(D,"GPage")[0];if(C.findBluesBar){A.push(C.findBluesBar("gmbutton2admin"))}}for(i=0;i!=A.length;i++){if(A[i]&&A[i].nodeType==1){A[i].style.zIndex=E+i}}},frameReady:function(){if(!this.linked_frame){this.linked_frame=GMI.query("GMFrame_BluesBar")[0]}},callFrame:function(A){if(this.linked_frame&&this.linked_frame.currentPopupIs){this.linked_frame.currentPopupIs(A)}},graphHover:function(D,E){var C,A,B;C=E.target||E.srcElement;if(C&&C.nodeType==1){A=D.getElementsByTagName("span")[0];A.innerHTML=(C.getAttribute("title")||"").split(":").join(":<strong>")+"</strong>";for(B=-15;C=C.nextSibling;B++){}A.style.left=Math.min(80,Math.max(-20,B*7))+"px"}},graphOut:function(A){A.getElementsByTagName("span")[0].innerHTML=""}};if(window.DWait){DWait.run("jms/pages/gruzecontrol/bluesbar.js")}});window.GUserPoll=GMIBase.extend({});if(window.DWait){DWait.run("jms/pages/gruzecontrol/guserpoll.js")}window.GBadge=GMIBase.extend({});if(window.DWait){DWait.run("jms/pages/gruzecontrol/gbadge.js")}QuantcastHelper={str_replace:function(E,D,C){var B="";var A=0;for(i=C.indexOf(E);i>-1;i=C.indexOf(E,i)){B+=C.substring(A,i);B+=D;i+=E.length;A=i}return B+C.substring(A,C.length)},replaceLabel:function(old_labels,new_label){var container=document.getElementById("quantcast-container");if(container){var $script=container.getElementsByTagName("script");eval($script[0].innerHTML);var new_labels=new Array();var raw_old_labels=_qoptions.labels.split(",");var replaced_some=false;for(i in raw_old_labels){var is_old=false;for(j in old_labels){if(old_labels[j]==raw_old_labels[i]){is_old=true;replaced_some=true}}if(!is_old){new_labels.push(raw_old_labels[i])}}if(replaced_some){new_labels.push(new_label)}_qoptions.labels=new_labels.join(",");_qpixelsent=new Array();if(window.quantserve){quantserve()}}},replaceLabelAll:function(new_label){var container=document.getElementById("quantcast-container");if(container){var $script=container.getElementsByTagName("script");eval($script[0].innerHTML);var raw_old_labels=_qoptions.labels.split(",");var old_labels=new Array();for(var k in raw_old_labels){var old_label=new String(raw_old_labels[k]);if(old_label.indexOf("UserStatus")==-1){old_labels.push(raw_old_labels[k])}}this.replaceLabel(old_labels,new_label)}},addLabel:function(new_label){var container=document.getElementById("quantcast-container");if(container){var $script=container.getElementsByTagName("script");eval($script[0].innerHTML);_qoptions.labels=_qoptions.labels+","+new_label;_qpixelsent=new Array();if(window.quantserve){quantserve()}}}};if(window.DWait){DWait.run("jms/lib/quantcast.js")}window.Selection=Base.extend({constructor:function(A,B){this.setRoot(A);this.callback=B||this.fnull;this.ieonmousedown=bind(this,this.ieonmousedown);this.onmousedown=bind(this,this.onmousedown);this.onclick=bind(this,this.onclick);this.ie_last_button=null},fnull:function(){},setRoot:function(A){this.root=A},setSelectionCriteria:function(A,B){if(A){this.getAllSelectable=A}if(B){this.isSelectable=B}},getAllSelectable:function(){return this.root.childNodes||[]},isSelectable:function(A){return A.parentNode==this.root},isSelected:function(A){return(" "+A.className+" ").indexOf(" selected ")>=0},getSelection:function(D){var A,B,C;C=D?{}:[];A=this.getAllSelectable();for(B=0;A[B];B++){if(this.isSelected(A[B])){if(D){C[B]=A[B]}else{C.push(A[B])}}}return C},setSelection:function(D,B){if(D&&!this.isSelectable(D)){throw new Error("Cannot select "+D)}Selection.focused=this;if(D&&this.isSelected(D)){return true}var C,A;A=this.getSelection();for(C=0;A[C];C++){this.deselect(A[C])}if(D){this.next_sel_click_volatile=false;this.select(D)}this.callback(this.getSelection(this.options?this.options.callback_selection_with_indices:undefined),A,B);return true},setRelativeSelection:function(B){var D,E,A,C;C=this.getAllSelectable();D=this.getSelection(true);for(A in D){A=Number(A);if((A+B)<0){this.setSelection(C[0],"relative")}else{this.setSelection(C[Math.min(C.length-1,A+B)],"relative")}return }this.setSelection(C[B>0?0:C.length-1],"relative")},select:function(A){A.className+=" selected"},deselect:function(A){A.className=A.className.replace(/\s*\bselected\b/g,"")},hook:function(A){var A;if(typeof arguments[0]!="object"){A={include_keyboard:arguments[0],allow_multiple:arguments[1]}}this.options=A;if(this.options.include_click!==false){Events.hook(this.root,"click",this.onclick)}if(this.options.include_keyboard){if(this.options.include_keyboard=="h"){this.options.include_keyboard={37:true,39:true}}else{this.options.include_keyboard={38:true,40:true}}Events.hook(document.documentElement,Browser.isGecko?"keypress":"keydown",this.onkeydown=bind(this,this.onkeydown))}if(this.options.allow_multiple){Events.hook(this.root,"mousedown",this.onmousedown);this.root.onselectstart=this.cancelEvent}else{if(this.options.fast_clicks){Events.hook(this.root,"mousedown",this.onclick)}}if(Browser.isIE&&this.options.ieOnClickMouseButtonHack){Events.hook(this.root,"mousedown",this.ieonmousedown)}if(this.options.global_mouse_cancel){Selection.mouseInit().addListener(this._bound_sel=bind(this,this.setSelection,null,"mousedown"))}this.drag_rect_ruler=this.options.drag_rect_ruler||Ruler.document.node},cancelEvent:function(A){(A||window.event).cancelBubble=true;return false},unhook:function(){Events.unhook(this.root,"click",this.onclick);if(Browser.isIE){Events.unhook(this.root,"mousedown",this.ieonmousedown)}if(this.options.include_keyboard){Events.unhook(document.documentElement,Browser.isGecko?"keypress":"keydown",this.onkeydown)}if(this.options.allow_multiple){Events.unhook(this.root,"mousedown",this.onmousedown);this.root.onselectstart=null}else{if(this.options.fast_clicks){Events.unhook(this.root,"mousedown",this.onclick)}}if(this.options.global_mouse_cancel){Selection.mouseInit().removeListener(this._bound_sel)}},onclick:function(E){var F,B,D,A;E=E||window.event;if(window.Popup&&Popup.cancel_next_click){E.cancelBubble=true;Popup.cancel_next_click=false;return false}D=(this.options.allow_multiple&&this.options.allow_multiple!="ignore")||this.options.ignore_keyclicks?Selection.eventKeys(E):{};if(this.options.ignore_keyclicks&&(D.multiple||D.range)){return true}var C=Browser.isIE?this.ie_last_button:E.button;if(C>(Browser.isGecko||Browser.isKHTML?0:1)){return true}if(window.Admin&&Admin.active){return }Selection.focused=this;F=E.target||E.srcElement;do{if(this.isSelectable(F)){A=this.isSelected(F);if(D.multiple||D.range){if(A){this.deselect(F)}else{this.select(F)}this.callback(this.getSelection(),[],"click");B=true}else{if(this.options.ignore_clicks){B=A&&!this.next_sel_click_volatile;this.next_sel_click_volatile=true;break}this.setSelection(F,"click");B=true}break}}while(F!=this.root&&(F=F.parentNode));if(!B&&!this.options.sticky_selection){this.setSelection(null,"click")}if(this.options.ignore_clicks){return true}if(F&&F.blur){try{F.blur()}catch(E){}}return E.returnValue=false},onkeydown:function(C){var A,B;C=C||event;if(C.ctrlKey||C.metaKey||C.altKey||C.shiftKey){return true}if((C.target||C.srcElement).tagName in {TEXTAREA:1,INPUT:1}){return true}if(Selection.focused==this){if(C.keyCode in this.options.include_keyboard){A=(C.keyCode in {37:1,38:1})?-1:1;this.setRelativeSelection(A);this.scroll(A);return false}else{if(C.keyCode==27){if(this.cancel_next_esc){this.cancel_next_esc=0;return true}setTimeout(bind(this,this.setSelection,null,"keyboard"),1)}}}return true},ieonmousedown:function(A){A=A||window.event;this.ie_last_button=A.button},onmousedown:function(B){var A;B=B||window.event;if(B.button>(Browser.isGecko?0:1)){}else{A=B.target||B.srcElement;while(A&&A!=document.documentElement&&A.tagName!="DIV"){if(A.tagName=="A"){return true}A=A.parentNode}if(window.event){window.event.cancelBubble=true}if(B.stopPropagation){B.stopPropagation()}if(DDD.mouseDown.call(this.root,B,this,12,true)){if(B.preventDefault){B.preventDefault()}if(window.Popup){Popup.completeAll()}return false}}return true},getAllSelectableRects:function(B,H,G){var F,D,K,C,E,J,A,I=0;C=this.getAllSelectable();K=[];for(F=0;D=C[F];F++){if(this.options.skip_first_item&&!I++){continue}if(H&&(this.isSelected(D)||G===D)){J=true;continue}A=this.drag_rect_ruler(D,true);A.index=F;A.owner=B;A.node=D;if(H&&J){A.offset_mark=1}K.push(A)}return K},ddd:{snap:function(F){var A,B,E,C,D;E=Selection.eventKeys(F);if(window.Popup&&Browser.isIE){Popup.cancel_next_click=true}this.drag_data={surfer2:Surfer2.create(F,Ruler.document.pointer(F)),rects:[],initial_selection:[]};this.drag_data.rects=this.options.allow_multiple=="ignore"?[]:this.getAllSelectableRects();for(C=0;D=(this.drag_data.rects[C]||{}).node;C++){if(E&&(E.multiple||E.range)){this.drag_data.initial_selection[C]=this.isSelected(D)}}if(this.options.allow_multiple=="rectangle"){this.drag_data.surfer2.node.style.display="block"}if(window.DDDUtils){DDDUtils.mix(this)}if(this.dddTickStart){this.dddTickStart(F)}},drag:function(E){var D,B,C,A;if(this.dddTickUpdate){this.dddTickUpdate(E)}D=Surfer2.update(this.drag_data.surfer2,E);for(B=0;msg_rect=this.drag_data.rects[B];B++){A=((D.x<msg_rect.x2&&msg_rect.x<D.x2)&&(D.y<msg_rect.y2&&msg_rect.y<D.y2));if(A^this.drag_data.initial_selection[B]){this.next_sel_click_volatile=false;this.select(this.drag_data.rects[B].node)}else{this.deselect(this.drag_data.rects[B].node)}}},drop:function(A){if(this.dddTickEnd){this.dddTickEnd(A)}Surfer2.clear(this.drag_data.surfer2);this.drag_data.surfer2={}}},scroll:function(A,B){var C;C=this.getSelection();if(C.length){rect=Ruler.document.node(this.root);if(A>0){if(!B||B=="y"){this.root.scrollTop=Math.max(this.root.scrollTop,0,Ruler.document.node(C[C.length-1]).y2-(rect.y+rect.h-8))}if(!B||B=="x"){this.root.scrollLeft=Math.max(this.root.scrollLeft,0,Ruler.document.node(C[C.length-1]).x2-(rect.x+rect.w-8))}}else{if(!B||B=="y"){this.root.scrollTop=Math.min(this.root.scrollTop,Math.max(0,Ruler.document.node(C[0]).y-rect.y))}if(!B||B=="x"){this.root.scrollLeft=Math.min(this.root.scrollLeft,Math.max(0,Ruler.document.node(C[0]).x-rect.x))}}}}});Selection.eventKeys=function(A){if(Browser.isMac&&!Browser.isOpera){return{range:A.shiftKey,multiple:A.metaKey}}else{return{range:A.shiftKey,multiple:A.ctrlKey}}};Selection.mouseInit=function(){if(window.Popup){Popup.go()}if(!this._mouse){this._mouse=new WatchableObject()}return this._mouse};Selection.mouseCancel=function(){if(this._mouse){this._mouse.broadcast()}};window.DivOnlySelection=Selection.extend({getAllSelectable:function(){var B,A;B=[];for(A=0;A!=this.root.childNodes.length;A++){if((this.root.childNodes[A].tagName||"").toLowerCase()=="div"){B.push(this.root.childNodes[A])}}return B},isSelectable:function(A){return A.parentNode==this.root&&A.tagName=="DIV"}});window.LinkOnlySelection=Selection.extend({getAllSelectable:function(){return this.root.getElementsByTagName("a")},isSelectable:function(A){return A.parentNode==this.root&&A.tagName=="A"}});if(window.DWait){DWait.run("jms/lib/selection.js")}DWait.ready(["jms/dwait/download.js","jms/lib/bind.js"],function(){window.gWebPage={update:function(C,E,B){var A,F;if(C.pageData&&!(C.pageData instanceof Array)){for(A in C.pageData){deviantART.pageData[A]=C.pageData[A]}}if(C.deps&&window.location.href.indexOf("file:")!=0){for(A=0;A<C.deps.length;A++){var D=C.deps[A];if(D[3]&&D[3].media&&!/Screen/.test(D[3].media)){continue}if(DWait.L[D[0]]){continue}if($j("link[rel=stylesheet][href^="+D[1]+"]").length>0||$j("script[src^="+D[1]+"]").length>0){continue}F=null;if(/^jms/.test(D[0])||/^cssms/.test(D[0])){F=bind(gWebPage,gWebPage.downloadDone,D[0],E?E.pull():null)}else{if(E&&!/\.css/.test(D[0])){F=E.pull()}}DWait.download(D[1]+"?"+D[2],F)}}if(C.dwaitcalls){for(A=0;A!=C.dwaitcalls.length;A++){DWait.ready.apply(B||this,C.dwaitcalls[A])}}if(B){if(window.Shadows){setTimeout(bind(Shadows,Shadows.nodes,B),1)}if(window.Keeper){setTimeout(Keeper.master_on,1)}}},downloadDone:function(B,A){DWait.run(B);if(A){A()}}};if(window.DWait){DWait.run("jms/lib/gwebpage.js")}});DWait.ready(["jms/lib/Base.js"],function(){window.CBC=Base.extend({constructor:function(C,B,A){this.active_tasks=0;this.failures=[];this.active=false;this.callback=C;this.granular_callback=B;this.current_granular_params=A||[]},pull:function(A){this.active_tasks++;return bind(this,this.distributable_callback,A,this.current_granular_params)},start:function(){this.active=true;this.checkForCompleteness()},setGranularParams:function(A){this.current_granular_params=A?(A instanceof Array?A:[A]):[]},finish:function(){if(this.active){this.callback(this);this.active=false}},checkForCompleteness:function(){if(!this.active_tasks){this.finish()}},distributable_callback:function(C,D){var B,A,E;E=this.granular_callback;if(C||E){A=[];for(B=2;B<arguments.length;B++){A.push(arguments[B])}if(C){C.apply(window,A)}if(E){E.apply(window,D.concat(A))}}this.active_tasks--;this.checkForCompleteness()}});if(window.DWait){DWait.run("jms/lib/cbc.js")}});GSTREAM_MAX_LENGTH=10000;GStream=GMIBase.extend({gmiConstructor:function(){this.gs_dedupe_on_splice=true;this.contents=[];this.graveyard=[];this.domReadMeta();this.domReadState()},REQUEST_FETCH:1,domFindVisible:function(){},domReadOne:function(){},domReadState:function(){var A,B,C;B=this.domFindVisible();for(A in B){if(B.constructor.prototype[A]){continue}this.contents[A]=this.domReadOne(B[A])}if(!this.gs_offset&&this.contents.length<this.gs_count_per_page&&!this.gs_more_to_load){this.gs_total=this.contents.length}},domReadMeta:function(){this.gs_offset=0;this.gs_count_per_page=24;this.gs_fetch_size=48;this.gs_fetch_bank=0;this.gs_total=this.gmi_args.total||undefined;this.gs_empty=this.gmi_args.empty},domDrawRange:function(D,C){var B,E,A;for(B=0;B!=C;B++){if(B+D<this.gs_offset){continue}if(B+D>=Math.min(this.gs_total||GSTREAM_MAX_LENGTH,this.gs_offset+this.gs_count_per_page)){break}if(this.domDrawItem(D+B,this.contents[D+B])==this.REQUEST_FETCH){if(E===undefined){E=this.gs_offset+B}else{A=this.gs_offset+B}}}if(E!=undefined){this.dataFetch(E,Math.max(this.gs_fetch_size,(A?A-E:0)+1))}},domDrawItem:function(B,A){},domRemoveItem:function(A){if(A.parentNode){A.parentNode.removeChild(A)}},domClearAll:function(){var B,A;B=this.domFindVisible();for(A in B){this.domRemoveItem(B[A])}},dataSplice:function(D,B,C){var E,H,A,I,G,F;if(this.gs_dedupe_on_splice&&C){for(E=0;E!=C.length;E++){if((H=this.dataIndexOf(C[E]))>=0){this.gs_hold_exposure=true;C[E]=this.dataSplice(H,1,[])[0]||C[E];this.gs_hold_exposure=false;if(H!=(D+E)){if(D>H){}F++}}}}if(this.gs_empty&&C.length){this.gmi_node.innerHTML="";this.gs_empty=false}for(E=this.contents.length;E<D;E++){this.contents[E]=null}G=this.contents.splice.apply(this.contents,[D,B].concat(C||[]));this.graveyard=this.graveyard.concat(G);if(this.gs_total!==undefined){this.gs_total+=(C||[]).length-G.length}F=0;for(E=0;E<B;E++){if((D+E)>=this.gs_offset&&E<this.gs_count_per_page){if(!A){A=this.domFindVisible()}if(I=A[D+E]){this.domRemoveItem(I);F++}}}if(this.gs_total!==undefined){F=Math.max(F,this.gs_count_per_page-(this.gs_total%this.gs_count_per_page))}if(C&&C.length){this.domDrawRange(D,F==C.length?C.length:this.gs_count_per_page-(D%this.gs_count_per_page));F=0}if(F>0&&!this.gs_hold_exposure){this.domDrawRange(this.gs_offset+(this.gs_count_per_page-F),F)}return G},dataIndexOf:function(B){var A;for(A=0;A!=this.contents.length;A++){if(!this.contents[A]){continue}if(this.dataCompare(this.contents[A],B)){return A}}return -1},dataFetch:function(B,A){},dataFilterArray:function(D,B,A){var C={};for(i=0;i!=B.length;i++){C[i+D]=B[i]}return this.dataFilter(C,A)},dataFilter:function(E,B){var C,A,D,F,G;F={};for(A in E){if(A in E.constructor.prototype){continue}if(G===undefined){G=Number(A)}D=E[A];for(C=0;C!=this.graveyard.length;C++){if(!this.graveyard[C]){continue}if(this.dataCompare(this.graveyard[C],D)){if(B){this.graveyard.splice(C)}else{C=-1}break}}if(C==-1){continue}F[G++]=D}return F},dataCompare:function(){return false},dataAdd:function(C){var A,B;B=this.gs_offset+this.gs_count_per_page;for(A in C){this.contents[A]=C[A];if(A>=this.gs_offset&&A<B){this.domDrawItem(A,this.contents[A])}}},commsAskForTargets:function(){return[]},commsRecvDrop:function(){},commsNonInputEvent:function(){}});if(window.DWait){DWait.run("jms/lib/gstream/gstream.js")}window.ResourceStream=GStream.extend({gmiConstructor:function(){this.active_fetches={};this.base()},domReadOne:function(B){var A=(B.getAttribute("collect_rid")||"0:0").split(":");return[Number(A[0]),Number(A[1]),B]},domFindVisible:function(){var A,B,D,C;B={};C=0;for(A=0;D=this.gmi_node.childNodes[A];A++){if((D.className||"").indexOf("tt-a")>=0&&!D.getAttribute("rs_ignore")){B[(C++)+this.gs_offset]=D}}return B},domReadMeta:function(){var A;A=(this.gmi_node.getElementsByTagName("smoothie")||[])[0];if(A){this.gs_offset=Number(A.getAttribute("offset"));this.gs_count_per_page=Number(this.gmi_args.count_per_page)||Number(A.getAttribute("count_per_page"))||24;this.gs_more_to_load=A.getAttribute("moreleft")}else{this.gs_offset=Number(this.gmi_args.offset)||0;this.gs_count_per_page=this.gmi_args.count_per_page||24}this.gs_fetch_size=Math.max(24,this.gs_count_per_page);this.gs_fetch_bank=0},domDrawItem:function(G,D){var C,A,F,E;if(this.gs_total!==undefined&&G>=this.gs_total){return }F=this.domFindVisible();if(D==undefined){C=document.createElement("div");C.className="placeholder tt-a";C.innerHTML='<span class="tt-w"><span class="shadow"><img src="" width="149" height="92" style="visibility:hidden"/></span></span></div>';if(window.Shadows){setTimeout(Shadows.nodes,1)}A=this.REQUEST_FETCH}else{if(typeof D[2]=="string"){var H=document.createElement("div");H.innerHTML=D[2];D[2]=H.getElementsByTagName("*")[0]}C=D[2]}if(F[G]){if(C!=F[G]){E=this.preview_selector;if(E){if(!E.isSelected(F[G])){E=null}else{var B=C.getAttribute("collect_rid");if(B&&B!=(F[G].getAttribute("collect_rid")||B)){E=null}}}this.gmi_node.insertBefore(C,F[G]);this.domRemoveItem(F[G]);if(E){E.setSelection(C)}}}else{if(C){this.gmi_node.appendChild(C)}}if(C){C.setAttribute("gs_offset",G)}return A},domRemoveItem:function(A){if(A.parentNode){if((A.nextSibling||{}).tagName=="A"){A.parentNode.removeChild(A.nextSibling)}A.parentNode.removeChild(A)}},dataFetch:function(F,D){var C,B,A;A=(new Date).valueOf();B=(this.gmi_node.getElementsByTagName("smoothie")||[])[0];if(!B&&!this.resource_stream_query){this.resource_stream_query=this.gmi_args.query}else{if(B){this.resource_stream_query=B.getAttribute("q")}}C=["Resources","htmlFromQuery",[this.resource_stream_query,F,D,"thumb150","artist:"+Number(Boolean(this.gmi_args.show_artist))]];var E=C.join(";");C.push(bind(this,this.dataFetchComplete,E,F,D,A));if(this.active_fetches[E]>(new Date()).valueOf()){return }this.active_fetches[E]=(new Date()).valueOf()+20000;DiFi.pushPublicGet.apply(DiFi,C);DiFi.timer(this.gs_difi_delay||1)},dataFetchComplete:function(B,C,E,H,I,D){var F,A,G;F=D.response.content;this.active_fetches[B]=1;if(I){if(D.response.content.total){this.gs_total=Number(D.response.content.total);this.gs_total-=this.graveyard.length;if(this.gs_total<this.contents.length){A=this.domFindVisible();for(G in A){if(((A[G]||{}).className||"").indexOf("placeholder")>=0){this.domRemoveItem(A[G])}}}}this.cleanUpData(D.response.content.resources);this.dataAdd(this.dataFilterArray((Number(C)),D.response.content.resources))}else{if(D.response.status!="NOEXEC_HALT"||window.location.href.indexOf("file:")){DiFi.stdErr(null,D.response.content)}}},cleanUpData:function(B){var A;for(A in B){if(A in B.constructor.prototype){continue}if(typeof B[A][0]!="number"){B[A][0]=Number(B[A][0])}if(typeof B[A][1]!="number"){B[A][1]=Number(B[A][1])}}},dataCompare:function(B,A){return B[0]==A[0]&&B[1]==A[1]}});window.ResourceTV=ResourceStream.extend({});window.ResourceStreamSelection=Selection.extend({getAllSelectable:function(){var B,A,C;B=[];for(A=0;C=this.root.childNodes[A];A++){if(this.isSelectable(C)){B.push(C)}else{if(C.nodeType==1&&C.getAttribute("name")=="gmi-ResourceScatter"){break}}}return B},isSelectable:function(A){return A.parentNode==this.root&&(" "+(A.className||"")+" ").indexOf(" tt-a ")>=0&&!A.getAttribute("rs_ignore")}});if(window.DWait){DWait.run("jms/lib/gstream/resource_stream.js")}function Task(B,A){if(typeof B=="object"&&B.TASK instanceof Array){this.f=B.TASK[0];A=B.TASK[1];this.f_args=B.TASK.slice(2)}else{if(typeof B=="function"){this.f=B;this.f_args=Task.argSlice(arguments,2)}else{DRE.assert(arguments.length<=1);A=B}}this.owner=A||Task.master_owner;this.listeners=[];this.reset();this.clearHistory();this.history_limit=Task.DEFAULT_HISTORY_LIMIT;this.station_end=[this.wait_f,this]}Task.argSlice=function(B,D){var C,A;A=[];for(C=D||0;C<B.length;C++){A.push(B[C])}return A};Task.master_owner=Task;Task.DEFAULT_HISTORY_LIMIT=10;Task.big_red_button=function(A){DRE.warning("Failed task on default level: "+A);DRE.halt("Failed task")};Task.prototype={reset:function(){this.status={}},clearHistory:function(){this.history={}},listen:function(B,A){this.listeners.push({f:B,f_this:A,f_args:Task.argSlice(arguments,2)});this.cc_shout(this.listeners.length-1);return this.listeners.length-1},listenOnce:function(B,A){this.listeners.push({f:B,f_this:A,f_args:Task.argSlice(arguments,2),expires:true});this.cc_shout(this.listeners.length-1)},nullListen:function(A){this.listeners[A]=null},report:function(A,B){if(A!=undefined&&A!=null){this.status.progress=A}if(B!=undefined&&B!=null){this.status.eta=B}},milestone:function(A){if(A=="complete"){this.status.result=arguments[1]}this.status.milestone=A;if(!this.history[A]){this.history[A]=[]}else{if(this.history[A].length>this.history_limit){this.history[A].pop()}}this.history[A].unshift(Task.argSlice(arguments,1));this.cc_shout()},done:function(A){this.milestone("complete",A)},abort:function(A){(this.big_red_button||this.owner.big_red_button||Task.master_owner.big_red_button).call(this.owner,this,A);this.reset()},cbDiFi:function(B,A){if(this.owner&&this.owner._KP_dead){this.off();return }if(!B){return this.abort(A.response.content)}return this.done(A.response.content)},cbRawDiFi:function(B,A){if(!B){return this.abort(A)}return this.done(A)},wait:function(){var A;A=Task.argSlice(arguments,0);A.push([this.wait_f,this]);Task.station.apply(Task.station,A)},wait_f:function(){this.done.apply(this,Task.station.data)},waitB:function(){var A;A=Task.argSlice(arguments,0);A.push([this.waitB_f,this]);Task.station.apply(Task.station,A)},waitB_f:function(){this.done.apply(this,Task.station.data.reverse())},cc_shout:function(D){var B,C,A;if(this.status.milestone!=undefined){C=[this.status.milestone,this.history[this.status.milestone]].concat(this.history[this.status.milestone][0]);for(B=(D||0);B!=this.listeners.length;B++){A=this.listeners[B];if(!A){continue}if(A.expires==true){this.nullListen(B)}if(A.f instanceof Task){A.f.milestone.apply(A.f_this||A.f,C.concat(A.f_args))}else{if(A.f.TASK_filter){if(A.f.TASK_filter==this.status.milestone){A.f.apply(A.f_this,C.slice(1).concat(A.f_args))}}else{A.f.apply(A.f_this,C.concat(A.f_args))}}if(D!=undefined){break}}}},run:function(){var B,A;if(this.status.active===true){return 0}if(this.status.active==2){DRE.assert(this.needs);for(B=0;this.needs[B];B++){if("result" in this.needs[B].status){continue}return 0}this.f_args=this.f_args.concat(Task.station.data.reverse());this.status.active=true}else{this.status.active=true;if(this.needs&&this.needs.length){DRE.assert(this.f,"Can't need nothin' if y'ain't gonn' deliva");this.status.active=2;Task.station.apply(Task.station,this.needs.concat(this));return 1}}if(this.f){DRE.assert(this.f_args instanceof Array);A=this.f.apply(this.owner,[this].concat(this.f_args,Task.argSlice(arguments,0)))}if(A==undefined){return 1}else{return A}},stop:function(){DRE.halt("Not implemented")},retry:function(){this.reset();return this.run.apply(this,arguments)},off:function(){this.milestone("shutdown");this.listeners=[];Task.destroy(this)}};Task.station=function(A){var B,D,C;if(typeof this=="object"&&this.data&&this.milestones){C=this;DRE.assert(C.data&&C.milestones,"Task.station wants sensible THIS")}else{if(arguments.length==0){return }C={data:[],milestones:[]};if(typeof this=="object"){C.owner=this;C.owner_index=GUID.get();DRE.assert(C.owner.owns_stations,"We mean business or we mean bust");C.owner.owns_stations[C.owner_index]=C}}D=[];for(B=1;B<arguments.length;B++){D.push(arguments[B])}while(A instanceof Array){C.milestones.unshift("function_call");C.data.unshift(A[0].apply(A[1],A.slice(2)));Task.station.milestones=C.milestones;Task.station.data=C.data;if(D.length&&C.owner!=0){A=D.shift()}else{if(C.owner==0){Bug.bump("Tasks discontinued")}else{if(C.owner){delete C.owner.owns_stations[C.owner_index];C={}}}return }}if(C.owner!=0){A.listenOnce.apply(A,[Task.station_next,C].concat(D));A.run()}else{Bug.bump("Tasks discontinued")}};Task.station_next=function(F,E,D,C){var A,H,G,B;if(typeof C=="string"){G=4;B=C}else{G=3;B="complete"}if(F!=B){return }this.milestones.unshift(F);this.data.unshift(D);Task.station.milestones=this.milestones;Task.station.data=this.data;H=[];for(A=G;A<arguments.length;A++){H.push(arguments[A])}if(H.length){Task.station.apply(this,H)}else{if(E.owner){delete this.owner.owns_stations[this.owner_index];this.owner=null}}};Task.station.milestones=[];Task.station.data=[];Task.destroy=function(A){delete A};Task.DiFi=function(B,A){DRE.assert(B==DiFi.pushPublicGet||B==DiFi.pushPrivateGet||B==DiFi.pushPost||window.DiFi3);task=new Task(Task.DiFiHelp,A);B.apply(DiFi,Task.argSlice(arguments,2).concat(task.cbDiFi,task));return task};Task.DiFiHelp=function(A){DiFi.timer(1)};Task.Ani=function(A){return new Task(Task._AniHelp,A,Task.argSlice(arguments,1))};Task._AniHelp=function(A,B){Station.push.apply(Station,B.concat(bind(A,A.done)))};Task.Delay=Task.Yield=function(A){return new Task(Task._DelayHelp,null,A||1)};Task._DelayHelp=function(A,B){setTimeout(bind(A,A.done,null),B)};if(window.DWait){DWait.run("jms/lib/task.js")}BackForward=new Task();BackForward.boot=function(){if(!BackForward.location_interval){BackForward.location_interval=setInterval(BackForward.shout,150);BackForward.shout()}};BackForward.unboot=function(){if(BackForward.location_interval){clearInterval(BackForward.location_interval);BackForward.location_interval=null}};BackForward.getPrevious=function(A){return(BackForward.history.navigate&&BackForward.history.navigate[0]&&BackForward.history.navigate[0][0])};BackForward.shout=function(B){var A,C;C=typeof B=="string"?B:String(window.location.hash)||"";if(C){C=C.replace(/^\#/,"")}if(BackForward.getPrevious()!=C){if((new Date()).valueOf()<(BackForward.timeout||0)){return }BackForward.milestone("navigate",C)}};BackForward.load=function(A,B){if(BackForward.getPrevious()==A){return }if(Browser.isIE){BackForward.iframe(A,B||document.title)}else{BackForward.shout(A);if(!A){BackForward.timeout=(new Date()).valueOf()+800}window.location.hash=A}};BackForward.iframe=function(A){var B;DRE.assert(Browser.isIE);if(!document.frames.da_backforward){document.body.insertBefore(Tree.create("iframe",{name:"da_backforward",id:"da_backforward",style:{position:"absolute",left:0,top:"-1000px",width:"1px",height:"1px"}}),document.body.firstChild);DRE.assert(document.frames.da_backforward);if(!BackForward.IE_bypass_firstrun||window.location.hash==""){arguments.callee("")}}B=document.frames.da_backforward;B.document.open("text/html");B.document.write("<html><head><title>"+document.title+"</title></head><body onload=\"parent.location.hash = '"+A+"';parent.BackForward.shout()\"></body></html>");B.document.close()};AutoExec.push(BackForward.boot);if(window.DWait){DWait.run("jms/lib/backforward.js")}AdZone=function(A,D,B,C,E){this.ad={};this.zones=A;this.keys=D||{};this.size=B;this.min_time=C;Events.hook(window,"resize",this.position=bind(this,this.position));this.start_counting_stats=(new Date()).valueOf()+1000;this.master_anchor=E};AdZone.prototype={destructor:function(){this.need(0,0,true);this.hide();this.dead=1;Events.unhook(window,"resize",this.position)},getDiv:function(){return this.ad.div},hide:function(){if(this.ad.div&&this.anchor){Tree.addClass(this.ad.div,"hidoframe")}this.anchor=null;console.log("Di-Fi Ads: Hidden")},show:function(B){var A;if(this.dead){return }if(!this.master_anchor){throw new Error("Cannot display ad without "+(this.auto?"auto ":" ")+"anchor point. Use AdZone.getHTML() to create an anchor point")}A=document.getElementById("ad-footprint-"+this.size.toLowerCase())||this.master_anchor;if(!A){console.log("Di-Fi Ads: Can't Anchor","#ad-footprint-"+this.size.toLowerCase());return false}if(this.anchor==A&&!B){return }this.anchor=A;if(this.ad.div){this.position();Tree.removeClass(this.ad.div,"hidoframe");this.ad.div.style.display="block";this.ad.div.firstChild.style.display="block"}},position:function(){var A,B,D,C;if(!this.ad.div||!this.anchor){console.log("Di-Fi Ads: Ad cannot be anchored",this.ad.div,this.anchor);return }A=this.anchor;while(!A.offsetWidth){A=A.parentNode;if(!A){console.log("Di-Fi Ads: Ad cannot be positioned");return }}A=Ruler.document.node(A);B=0;C=this.ad.div;C.style.zIndex=121;if(Browser.isIE&&C.parentNode&&C.parentNode.tagName=="DIV"){C.parentNode.style.zIndex=121}C.style.left="auto";C.style.right=((document.getElementById("dv7")||document.getElementById("output")||document.body).offsetWidth-A.x2)+"px";C.style.top=A.y+"px";C.style.visibility="visible"},fetch:function(E,F,G){var C,B;if((this.always_flush_difi||DiFi._queue.length==0)&&(this.ad.div||(this.no_refetch_while_busy&&this.busy))){return }if(this.size=="728x90"&&window.AdHug){AdHug.apply("banner","")}C=(new Date()).valueOf();this.marker=(new Date()).valueOf();B=this.getParams("zones",E);this.last_main_zone=B[0];this.last_keys=this.getSerializedKeys();this.last_size=this.size;console.log("Di-Fi Ads: Fetch time",B);if(B[0]){var D=this.frame_zone?this.frame_zone:(this.size=="728x90"?"atf_top_728x90":("atf_right_"+(this.size||"160x600")));var A=this.getSerializedKeys();if(!A){A="section:messagecenter"}this.busy=1;if(this.always_flush_difi){DiFi.send()}DiFi.pushPage("difi",{ad_frame:D,ad_keys:A,ad_buster:C,ad_mature:Number(Boolean(E)),ad_ignore1:G,ad_d:this.size},bind(this,this.difi,this.marker,E));DiFi.pushPublicGet("MessageCenter","placebo_call",[]);if(this.always_flush_difi){DiFi.send()}}},difi:function(A,C,F,D){var B;if(this.dead){return }console.log("Di-Fi Ads: Ad "+this.size,"Here we go / "+B);B=(C?"M":"g")+"->"+(D.maturecontent?"M":(C?"m":"g"));this.busy=0;if(A!=this.marker){if(F){try{delete F.firstChild}catch(E){F.innerHTML=""}F.parentNode.removeChild(F)}console.log("Di-Fi Ads: Ad "+this.size,"Canned div / "+(A)+" != "+(this.marker)+" / "+B);return }if(D.ad){if(this.ad.div){console.log("Di-Fi Ads: Ad "+this.size,"Out with the old / "+B);try{delete this.ad.div.firstChild}catch(E){this.ad.div.innerHTML=""}this.ad.div.parentNode.removeChild(this.ad.div);this.ad={}}else{if(this.ad.next_ad){console.log("Di-Fi Ads: Ad "+this.size,"Something WEIRD / "+B+" / "+this.ad.next_ad)}else{console.log("Di-Fi Ads: Ad "+this.size,"Fresh as a daisy / "+B)}}this.ad={next:(new Date()).valueOf()+(this.min_time*1000),mature:D.maturecontent||C,div:F};console.log("Di-Fi Ads: Ad "+this.size,"New ad / "+Boolean(this.anchor)+" / "+B);if(this.anchor){this.show(true)}}else{if(!this.ad.div){console.log("Di-Fi Ads: Ad "+this.size,"PROBLEM: No ad to show / "+B)}else{console.log("Di-Fi Ads: Ad "+this.size,"Old ad / "+Boolean(this.anchor)+" / "+B);if(this.anchor){this.show(true)}}}},getParams:function(B,A){var C;C=this[B];if(typeof C=="function"){C=C(A)}if(!(C instanceof Array)){C=[C]}return C},resetKeys:function(){this.keys={}},setKey:function(A,B){this.keys[A]=B},getKey:function(A){return this.keys[A]},getSerializedKeys:function(){var A=[];for(var B in this.keys){A.push(B+":"+this.keys[B])}return A.join(",")},need:function(A,C,B){var E;if(this.ad.div){if(B===true||(this.getParams("zones",A)[0]!=this.last_main_zone)||(this.getSerializedKeys()!=this.last_keys&&!this.allow_key_changes)||(this.size!=this.last_size)||(new Date()).valueOf()>(this.ad.next||0)){this.hide();try{delete this.ad.div.firstChild}catch(D){this.ad.div.innerHTML=""}this.ad.div.parentNode.removeChild(this.ad.div);this.ad={}}}if(B===true){return }if(this.ad.mature){if(this.ad.div){E="m"}if(A){return }}else{if(this.ad.div){E="g"}if(A){if(this.ad.div){try{delete this.ad.div.firstChild}catch(D){this.ad.div.innerHTML=""}this.ad.div.parentNode.removeChild(this.ad.div);this.ad={}}}}this.fetch(A,C,this.no_ignores?"":(E||""))}};if(window.DWait){DWait.run("jms/lib/adzone.js")}WatchableObject=Base.extend({constructor:function(){this._wo_listeners=[]},addListener:function(A){if(!A){throw new Error("Blank listener")}this._wo_listeners.push(A);return true},removeListener:function(B){var A;for(A=0;A!=this._wo_listeners.length;A++){if(this._wo_listeners[A]==B){this._wo_listeners.splice(A,1);if(this._wo_sm_i>=A){this._wo_sm_i--}return true}}return false},broadcast:function(){if(this._wo_sm_i!=undefined){throw new Error("Possible WO feedback loop")}try{for(this._wo_sm_i=0;this._wo_sm_i!=this._wo_listeners.length;this._wo_sm_i++){this._wo_listeners[this._wo_sm_i].apply(this,arguments)}}finally{this._wo_sm_i=undefined}}});if(window.DWait){DWait.run("jms/lib/wo.js")}DWait.ready(["jms/lib/Base.js","jms/lib/bind.js","jms/lib/wo.js","jms/lib/backforward.js"],function(){window.URLManagerBase=WatchableObject.extend({constructor:function(C,A){var B;this.base();this.options=A||{};this.defaults=C||{};this.map={};for(B in this.defaults){this.map[B]=this.defaults[B]}if(!this.no_hash_change){BackForward.boot()}this.backforward_listen=BackForward.listen(bind(this,this.backforwardCallback))},destructor:function(){BackForward.nullListen(this.backforward_listen)},addListener:function(B,C){var A;if(C){B(this.map,this.map)}return this.base(B)},set:function(B){var A,C;C={};for(A in this.map){C[A]=(A in B)?B[A]:this.map[A]}if(this.options.no_hash_change){this.broadcast(C)}else{BackForward.load(this.locationStateToString(C))}},backforwardCallback:function(F,E,D){var B,A,C;B=this.locationStringToState(D,{});this.broadcast(B)},broadcast:function(C){var D,A,B;D={};for(A in this.defaults){B=(A in C)?C[A]:((this.options.ignore_blanks?this.map[A]:null)||this.defaults[A]);if(B!=this.map[A]){D[A]=B;this.map[A]=B}}for(A in D){this.base(C,D);break}},locationStateToString:function(){throw new Error("I need subclassing")},locationStringToState:function(){throw new Error("I need subclassing")}});window.URLQueryString=URLManagerBase.extend({locationStateToString:function(C,D){var A,B;B=[];for(A in this.map){if((A in C)&&(C[A]!=this.defaults[A])){if(escape(C[A])){B.push(A+"="+escape(C[A]))}}}return B.join("&")},locationStringToState:function(B){var A,C,D;B=B.split("&");D={};for(A=0;A!=B.length;A++){C=B[A].split("=");if(C[0] in this.map){D[C[0]]=unescape(C.slice(1).join("="))}}return D}});REG_BROWSE_OVERLAY=/^\/d[0-9a-z]+$/;window.BrowseAwareURLQueryString=URLQueryString.extend({backforwardCallback:function(C,B,A){if((A||"").match(REG_BROWSE_OVERLAY)){return }this.base.apply(this,arguments)}});if(window.DWait){DWait.run("jms/lib/urlmanager.js")}});DWait.ready(["jms/lib/events.js","jms/lib/browser.js","jms/lib/gmi.js","jms/lib/cbc.js","jms/lib/gstream/resource_stream.js","jms/lib/liquidswitch.js","jms/lib/urlmanager.js","jms/lib/adzone.js",".domready"],function(){REG_BROWSE_OVERLAY=/^\/d[0-9a-z]+$/;RESOURCE_DEVIATION=1;window.URLBrowseLink=URLManagerBase.extend({locationStateToString:function(D,E){return D.deviationid?"/d"+Number(D.deviationid).toString(36):this.sp_url_backup||""},locationStringToState:function(D){return{deviationid:D.match(REG_BROWSE_OVERLAY)?parseInt(D.substr(2),36):this.spBackupURL(D)}},spBackupURL:function(D){this.sp_url_backup=D;return null}});REG_OLD_DEVIATION_2=/^h[t]tp:\/\/()www.deviantart\....\/(?:deviation|view)\/()([0-9]+)\/?(?:\?.*)?$/;REG_DEVIATION_2=/^h[t]tp:\/\/([^\.]+)\.deviantart\....\/(?:art\/)?([0-9A-Za-z\-\.]+)\-([0-9]+)\/?(?:\?.*)?$/;OUTLINE_PreviewStream=({gmiConstructor:function(){this.base();this.previewOnlyConstructor()},previewOnlyConstructor:function(){da_preview_master.main_streams.push(this);this.gs_difi_delay=500;this.loadingPulse=bind(this,this.loadingPulse);this.loaderItemDiFiFail=bind(this,this.loaderItemDiFiFail);this.sliderStop=bind(this,this.sliderStop);this.sliderStop2=bind(this,this.sliderStop2);this.image_loader=new PreviewLoaderQueue({callback:bind(this,this.loaderFindAndWatchImage)},"Images");this.html_loader=new PreviewLoaderQueue({callback:bind(this,this.loaderFetchHTML)},"HTML");this.extras_loader=new PreviewLoaderQueue({callback:bind(this,this.loaderHitExtras)},"Extras");this.preview_selector=new (this.preview_override_selection_type||PreviewStreamSelection)(this.gmi_node,bind(this,this.streamSelect));this.preview_selector.preview_stream_owner=this;this.preview_selector.hook({sticky_selection:1,ignore_keyclicks:1,include_keyboard:"h",include_click:!this.override_selector_click,callback_selection_with_indices:1,ieOnClickMouseButtonHack:1});this.preview_controls=GMI.create("PreviewStreamControls",{no_overlay_stream:this.gmi_args.no_overlay_stream});this.preview_controls.stream=this;if(document.body){document.body.appendChild(this.preview_controls.gmi_node)}if(navigator.userAgent.indexOf("iPad")>=0){this.gmi_node.ongesturestart=bind(this,this.starDown);this.gmi_node.ontouchstart=bind(this,this.touchDown);this.starMove=bind(this,this.starMove);this.starUp=bind(this,this.starUp);this.touchMove=bind(this,this.touchMove)}},starDown:function(E){var D;this.preview_touch_watch=null;E=E||event;D=E.target||E.srcElement;while(D&&D!=this.gmi_node){if(this.preview_selector.isSelectable(D)){this.star_pressed=1;this.preview_selector.setSelection(D,"gesture");this.star_down_target=D;Events.hook(document.body,"gesturechange",this.starMove);Events.hook(document.body,"gestureend",this.starUp);Events.hook(document.body,"touchmove",this.touchMove);E.preventDefault();return false}D=D.parentNode}},starstarDown:function(E){var D;Browser.isTouch=1;this.preview_touch_hit_origin=Ruler.document.pointer(E);this.preview_touch_watch=null;E=E||event;D=E.target||E.srcElement;while(D&&D!=this.gmi_node){if(this.preview_selector.isSelectable(D)){this.star_pressed=1;this.preview_selector.setSelection(D,"gesture");this.star_down_target=D;Events.hook(document.body,"mousemove",this.starstarMove);Events.hook(document.body,"mouseup",this.starUp);E.preventDefault();return false}D=D.parentNode}},starstarMove:function(D){this.preview_touch_hit_current=Ruler.document.pointer(D);this.preview_touch_hit_current.x-=this.preview_touch_hit_origin.x;this.preview_touch_hit_current.y-=this.preview_touch_hit_origin.y;D.preventDefault();if(!this.star_drag_share&&(D.scale||1)<2&&(this.preview_touch_hit_current.y||0)/(D.scale||1)<-40&&window.da_minish_lub&&this.preview_animated_origin){this.star_drag_share=da_minish_lub;this.star_drag_share.init();this.star_drag_share.shared_rid=[RESOURCE_DEVIATION,OUTLINE_PreviewStream.devidFromThumb(this.star_down_target)];this.star_drag_share.ddd.node=this.preview_animated_origin[0];this.star_drag_share.ddd.snap.call(this.star_drag_share,D,this,da_minish_lub.shared_rid,null)}else{if(this.star_drag_share){this.star_drag_share.ddd.drag.call(this.star_drag_share,D,true);if((this.star_drag_share.drag_data.collect_targets||{}).hover){this.slider_current.style.opacity=0.6}else{this.slider_current.style.opacity=1}}}D={scale:1.2};if(this.slider_current){this.slider_current.style.webkitTransform=("rotate("+0+"deg) scale("+D.scale+")"+(this.preview_touch_hit_current?" translate3D("+((this.preview_touch_hit_current.x||0)/D.scale)+"px, "+((this.preview_touch_hit_current.y||0)/D.scale)+"px, 0)":""));if(!vms_feature("pachunkajunk")){D.preventDefault()}return false}else{throw new Error("gesture wth")}},starMove:function(D){if(this.slider_current&&this.preview_touch_hit_current){if(!this.star_drag_share&&D.scale<3&&((this.preview_touch_hit_current.y||0)/D.scale<-40||this.preview_touch_hit_current.y<300)&&window.da_minish_lub&&this.preview_animated_origin){this.star_drag_share=da_minish_lub;this.star_drag_share.init();this.star_drag_share.shared_rid=[RESOURCE_DEVIATION,OUTLINE_PreviewStream.devidFromThumb(this.star_down_target)];this.star_drag_share.ddd.node=this.preview_animated_origin[0];this.star_drag_share.ddd.snap.call(this.star_drag_share,this.preview_touch_hit_current,this,da_minish_lub.shared_rid,null)}else{if(this.star_drag_share){this.star_drag_share.ddd.drag.call(this.star_drag_share,this.preview_touch_hit_current,true);if((this.star_drag_share.drag_data.collect_targets||{}).hover){this.slider_current.style.opacity=0.6}else{if(this.preview_touch_hit_current.y>220){this.slider_current.style.opacity=1}}}}this.slider_current.style.webkitTransform=("rotate("+0+"deg) scale("+D.scale+")"+(this.preview_touch_hit_current?" translate3D("+((this.preview_touch_hit_current.x||0)/D.scale)+"px, "+((this.preview_touch_hit_current.y||0)/D.scale)+"px, 0)":""));D.preventDefault();return false}},starUp:function(E){var D;this.preview_touch_watch=null;Events.unhook(document.body,"gesturechange",this.starMove);Events.unhook(document.body,"gestureend",this.starUp);Events.unhook(document.body,"touchmove",this.touchMove);if(this.slider_current){if(this.star_drag_share){if(this.star_drag_share.ddd.drop.call(this.star_drag_share,this.preview_touch_hit_current,this,da_minish_lub.shared_rid,null)){D=1}}if((E.scale>=2)&&!D){this.star_pressed=0;if(this.preview_animated_origin&&this.star_dest_rect){this.sliderGo(this.preview_animated_origin[0],this.preview_animated_origin[1],this.star_dest_rect)}else{this.sliderStop()}}else{this.slider_current.style.webkitTransform="scale(1)";this.preview_selector.setSelection(null,"gesture");this.star_pressed=0;this.sliderStop()}}E.preventDefault();return false},touchMove:function(I){var E,H,D,J,F,G;if(!this.preview_touch_watch){if(I.touches.length<2){return true}this.preview_touch_watch={};F=1}G=0;D=0;J=0;for(E=0;H=I.touches[E];E++){if(F){this.preview_touch_watch[H.identifier]=1}else{if(!this.preview_touch_watch[H.identifier]){continue}}D+=H.pageX;J+=H.pageY;G++}D/=G;J/=G;if(F){this.preview_touch_hit_origin={x:D,y:J}}this.preview_touch_hit_current={x:D-this.preview_touch_hit_origin.x,y:J-this.preview_touch_hit_origin.y,clientX:D-window.pageXOffset,clientY:J-window.pageYOffset}},gmiDestructor:function(){var D;if(!this.preview_selector){return }this.preview_selector.setSelection(null,"shutdown");this.preview_selector.unhook();delete this.preview_selector;if(this.preview_controls){GMI._delete(this.preview_controls)}this.base();for(D=0;D!=da_preview_master.main_streams.length;D++){if(da_preview_master.main_streams[D]==this){da_preview_master.main_streams.splice(D,1);break}}},streamSelect:function(E,L,J){var D,H,I,F,G,K=0;for(K in E){break}if(J=="temporary_blank_selection"){return }if(window.Popup){Popup.completeAll()}if(!E[K]){if(J!="relative"){if(L[0]&&(F=GMI.query("ResViewSizer_"+(document.body.className.indexOf("fullview")>=0?"full":"")+"img",{match:{animation_marker:1}})[0])){G=F.gmi_node;if(G){this.preview_animated_exit=[G,Ruler.screen.node(G),L[0]]}}this.previewClear(J=="shutdown")}return }if(this.preview_controls){if(J=="click"){this.preview_controls.flash(500)}this.preview_controls.updateState(Boolean(Number(K)+this.gs_offset),(Number(K)+this.gs_offset)<Math.max(this.gs_total||0,this.contents.length)-1)}if(this.resview&&this.resview.ad){this.resview.deviationChangeView(0,1)}this.selection_is_mature=OUTLINE_PreviewStream.filterFromThumb(E[K]);D=OUTLINE_PreviewStream.devidFromThumb(E[K]);if(D){this.loadImage(E[K],D)}if(D&&J!="url"){da_preview_master.url({deviationid:D})}},devidFromThumb:function(E){var D,F;if(F=Number((E.getAttribute("collect_rid")||"").split(":")[1])){return F}D=OUTLINE_PreviewStream.previewLinkFromThumb(E);if(D){matches=D.href.match(REG_DEVIATION_2)||D.href.match(REG_OLD_DEVIATION_2);return matches[3]}},filterFromThumb:function(E){var D;D=OUTLINE_PreviewStream.previewLinkFromThumb(E);if(D){return D.className.indexOf("mature")>=0}},previewLinkFromThumb:function(E){var D;D=(E.getElementsByTagName("a")||[]);return D[0]&&!D[0].href?D[1]:D[0]},previewEnsure:function(D,F){var G;if(this.preview_node){this.preview_node.style.height=(Ruler.screen.rect().y2+(Browser.isIE?32:0))+"px";return }if(F){this.preview_animated_origin=[F,Ruler.screen.node(F)];this.sliderPrepare(this.preview_animated_origin[0],this.preview_animated_origin[1])}G=this.preview_node=document.createElement("div");if(eax=document.getElementById("searchInput")){try{eax.blur();if(eax=document.getElementsByTagName("a")){eax.focus();eax.blur()}}catch(E){}}G.setAttribute("id","dv7");G.className="bubbleview";G.style.height=(Ruler.screen.rect().y2+(Browser.isIE?32:0))+"px";G.style.display="none";if(this.resview){G.appendChild(this.resview.gmi_node);console.log("resview",this.resview)}if(document.body){document.body.appendChild(G)}if(F&&this.resview){(this.slider_restore_visibility=this.resview.viewer_node).style.visibility="hidden"}this.preview_backup_scroll=(document.body||{}).scrollTop||document.documentElement.scrollTop;document.getElementById("depths").style.display="none";document.getElementById("output").style.display="none";PreviewStream.scrollTo(0);G.style.display="block";this.preview_selector.preview_active=1;if(this.preview_controls){this.preview_controls.hijackStream(this,this.stream_hijack_immediate);this.preview_controls.gmi_node.style.display="block"}da_preview_master.current_stream=this;if(window.da_minish_lub){da_minish_lub.liquid_drag_notice.change("off",0,0)}},previewClear:function(G){var E,F,I,L,J,D,K,H;if((F=this.preview_animated_exit)&&!this.star_pressed){this.sliderStop();this.sliderPrepare(F[0],F[1])}if(E=this.preview_node){if(this.resview.ad){GMI._delete(this.resview.ad);this.resview.ad=null;ResViewContainer.ad=null}if(this.resview){GMI._delete(this.resview);delete this.resview;this.selection_unique_id=null}this.preview_controls.restoreStream(this);if(E.parentNode){E.parentNode.removeChild(E)}delete this.preview_node;if(!G){da_preview_master.url({deviationid:null})}if(document.body.className.indexOf("fullview")>=0){document.body.className=document.body.className.replace(/\s*\bfullview\b/g,"")}H=1}delete this.preview_current_size_hint;this.preview_selector.preview_active=0;this.preview_animated_origin=null;if(this.preview_controls){this.preview_controls.gmi_node.style.display="none"}document.getElementById("output").style.display="block";document.getElementById("depths").style.display="block";K=this.preview_backup_scroll||0;this.preview_backup_scroll=0;if(F=this.preview_animated_exit){if(F[2].offsetWidth&&(I=(F[2].getElementsByTagName("img")||[])[0])){L=Ruler.document.node(I);D=Ruler.screen.rect();if(K+D.y2<L.y2){K=Math.max(0,40+L.y2-(D.y2))}else{if(K>L.y){K=Math.max(0,L.y-40)}}PreviewStream.scrollTo(K||0);I.style.visibility="hidden";this.slider_restore_visibility=I;F[1].y+=K;F[1].y2+=K;if(!this.star_pressed){this.sliderGo(F[0],F[1],L)}}else{if(!this.star_pressed){this.sliderStop()}}}if(H||K){PreviewStream.scrollTo(K)}this.preview_animated_exit=null;if(da_preview_master.current_stream==this){da_preview_master.current_stream=null}},loadImage:function(G,F){var H,E,D;if(this.selection_unique_id==F){return }this.selection_unique_id=F;if(this.resview){GMI._delete(this.resview);delete this.resview}H=document.createElement("div");H.style.visibility="hidden";H.innerHTML='<div class="resview7-meta" id="gmi-ResourcePageMetaPane" name="gmi-ResourcePageMetaPane"><div id="gmi-ResourcePageAd" name="gmi-ResourcePageAd"></div></div><div class=resview7-view id="gmi-ResourcePageDisplayPane" name="gmi-ResourcePageDisplayPane"></div><div class="resview7-about'+(vms_feature("pachunkajunk")?" resview7-about-pj":"")+'" id="gmi-ResourcePageAboutPane" name="gmi-ResourcePageAboutPane"></div>';if(D=(this.preview_node||document.body)){D.appendChild(H)}E=this.resview=GMI.apply(H,"ResViewContainer",{id:F,owner_stream:this});H.style.visibility="visible";E.loadFromItem(G)},adjustAllSizes:function(){if(this.resview){this.resview.adjust()}},loaderPreload:function(E,H,J){if(!E){throw new Error("No backwards preloading")}var I,D,F,G;I=this.preview_selector.getSelection();G=this.preview_selector.getAllSelectable();for(D in I){break}D=Number(D)||0;for(F=D;F<D+H;F++){if(G[F]){this.loaderItemReadOrGenerate(G[F],J)}}},loaderItemReadOrGenerate:function(O,E){var I,M,N,D,H,M,L,G,J,F,K;J=this.devidFromThumb(O);if((L=this.previewLinkFromThumb(O))&&(D=L.getAttribute("super_img"))){F=(L.getElementsByTagName("img")||[])[0]}this.selection_catid=L&&Number(L.getAttribute("super_catid"));if(!(M=this.loaderItemRead(O))||((typeof M=="string")&&M.indexOf("<film")>=0)){if(L&&D){N=F&&L.parentNode&&(L.parentNode.className||"").indexOf("mild")<0;I=this.selection_is_mature&&this.resview.ad;this.previewEnsure(Number(L.getAttribute("super_w")),!I&&F);K=' width="'+(L.getAttribute("super_fullw")||L.getAttribute("super_w"))+'" height="'+(L.getAttribute("super_fullh")||L.getAttribute("super_h"))+'"';H=("<div class=load-placeholder><img "+(!I?"":' style="visibility:hidden" ')+' class="smshadowbg" name="gmi-ResViewSizer_img" id="gmi-ResViewSizer_img" src="'+String(F.src).replace(/"/g,"&quot")+'" width="'+L.getAttribute("super_w")+'" height="'+L.getAttribute("super_h")+'"/></div><div class="load-placeholder load-placeholder-full"><img onclick="GMI.up(this).deviationChangeView(0)" '+(!I&&!this.resview.ad?"":' style="visibility:hidden" ')+' style="display:none" class="smshadowbg fullview" name="gmi-ResViewSizer_fullimg" id="gmi-ResViewSizer_fullimg" src="'+String(F.src).replace(/"/g,"&quot")+'" '+K+'/></div><div id=zoomed-in class=dynamic-zoomed-in><img class="'+(N?"smshadow smhollow":"")+'" collect_rid="'+RESOURCE_DEVIATION+":"+J+'"             onclick="GMI.up(this).deviationChangeView(1)" name="gmi-ResViewSizer_img" id="gmi-ResViewSizer_img" gmi-animation_marker=1      rs_src="'+D.replace(/"/g,"&quot")+'" width="'+L.getAttribute("super_w")+'" height="'+L.getAttribute("super_h")+'"/><img class="'+(N?"smshadow smhollow":"")+' fullview" collect_rid="'+RESOURCE_DEVIATION+":"+J+'" onclick="GMI.up(this).deviationChangeView(0)" name="gmi-ResViewSizer_fullimg" id="gmi-ResViewSizer_fullimg" gmi-animation_marker=1 rs_src="'+(L.getAttribute("super_fullimg")||D).replace(/"/g,"&quot")+'" '+K+' style="display:none"/></div>');M=this.loaderItemPut(O,H,E);setTimeout(E.pull(),1);return M}else{this.previewEnsure();if(!O.firstChild){DiFi.pushPublicGet("Resources","htmlFromRID",[1,J,"thumb150",""],E.pull(bind(this,this.loaderThumbnailReady,O)))}this.html_loader.setRequest(J,O,this.html_loader.LOADER_WANT_IMAGE,E)}}else{this.previewEnsure(null,F)}},loaderFetchHTML:function(D,E,F){DiFi.pushPublicGet("DeviationView","getMainHTML",[D.substr(1)],bind(this,this.loaderItemDiFiDone,F,F.pull(this.loaderItemDiFiFail),E));DiFi.timer(100)},loaderHitExtras:function(F,D,E){D.run(E)},loaderThumbnailReady:function(D,F,E){var G;if(F&&D.parentNode){G=document.createElement("div");G.innerHTML=E.response.content;G=(G.getElementsByTagName("*")||[])[0]||G;D.parentNode.replaceChild(G,D);this.domReadState()}else{D.innerHTML=F?"[x]":'<img src="about:blank" alt="">'}},loaderItemDiFiFail:function(D){if(!D&&this.resview){this.resview.about_node.innerHTML=""}},loaderItemDiFiDone:function(G,D,E,H,F){var G;this.loaderItemReady(E,H?F.response.content.html:'<img src="about:blank" alt="[x]"/>',G);if(H&&window.gWebPage){if(F.response.content.html.indexOf("<film ")>=0){D(1);setTimeout(bind(gWebPage,gWebPage.update,F.response.content,null,null),1)}else{gWebPage.update(F.response.content,G);D(1)}}else{console.log("loader difi fail",H,F);D(0)}},loaderItemReady:function(F,E,G){var D;D=this.loaderItemPut(F,E)},loaderItemPut:function(E,F){var D;D=this.loaderItemRead(E);if(!D){D=document.createElement("LOADER");D.style.position="absolute";D.style.width=D.style.height="1px";D.style.visibility="hidden";D.style.overflow="hidden";E.appendChild(D)}if(typeof F=="string"){if(!this.gmi_args.preload_images||F.indexOf("<object")>=0||F.indexOf("<embed")>=0||F.indexOf("<video")>=0||F.indexOf("<audio")>=0||F.indexOf("<iframe")>=0){E.setAttribute("ps_loader_html",F)}else{D.innerHTML=F}}else{D.appendChild(F)}return D},loaderItemRead:function(E){var D;if(D=E.getAttribute("ps_loader_html")){return D}else{if(E.lastChild&&E.lastChild.tagName=="LOADER"){return E.lastChild}}},loaderFindAndWatchImage:function(K,H,I){var J,G,E,D,F;F=Number(document.body.className.indexOf("fullview")>=0);if(H.nodeType){J=H.getElementsByTagName("img");for(G=0;G<J.length;G++){E=J[G];if(Number(E.className.indexOf("fullview")>=0)^F){continue}if(E.getAttribute("rs_src")){if(I){E.onload=I.pull(bind(this,this.previewImageDone,D))}E.src=E.getAttribute("rs_src");E.setAttribute("rs_src","")}else{D=E}}}if(this.resview&&this.resview.ad){if(document.getElementsByTagName("film")[0]){this.resview.ad.hide()}else{this.resview.ad.refresh(this.resview.gmi_args.id,this.selection_is_mature,this.selection_catid)}}},previewImageDone:function(D){D.style.display="none";if(this.resview&&this.resview.ad){this.resview.ad.position()}},previewLoadOffset:function(D){if(this.previewChangeProps){this.previewChangeProps(D,this.gs_count_per_page)}else{this.gs_offset=D;this.domClearAll();this.domDrawRange(this.gs_offset,this.gs_count_per_page)}},previewUpdatePager:function(){var D,E;if(D=this.previewGetPager()){E={offset:this.gs_offset,count_per_page:this.gs_count_per_page,pages:this.gs_total?Math.ceil(this.gs_total/this.gs_count_per_page):Boolean(this.gs_more_to_load)};D.update(E)}},previewGetPager:function(){switch(this.gmi_node.id){case"browse2-stream":case"PortalStream":return GMI.query("GPager")[0]}return null},domClearAll:function(){var E,D;E=this.domFindVisible();for(D in E){this.gmi_node.removeChild(E[D])}},sliderPrepare:function(E,F){var D;if(Browser.isIE){return }if(this.slider_current){this.sliderStop(true)}this.slider_current=D=this.sliderMake(E);D.style.left=F.x+"px";D.style.top=F.y+"px";D.style.display="block"},sliderGo:function(G,K,J){var E,I,D=300,H=Interpolators.pulse;if(Browser.isIE){setTimeout(this.sliderStop,1);return }if(!(E=this.slider_current)){return }if(Browser.isKHTML&&Browser.isTouch){E.className+=" webkit-slide";I=(J.w/K.w);E.addEventListener("webkitTransitionEnd",this.sliderStop);setTimeout(bind(this,this.sliderWebkitApply,E,"translate3D("+((J.x-K.x)+0.5*(J.w-K.w))+"px,"+((J.y-K.y)+0.5*(J.h-K.h))+"px,0) scale("+I+")"),1)}else{Station.run(E,"left",{from:K.x,to:J.x,time:D,f:H});Station.run(E,"top",{from:K.y,to:J.y,time:D,f:H});Station.run(E,"width",{from:K.w,to:J.w,time:D,f:H});Station.run(E,"height",{from:K.h,to:J.h,time:D,f:H},this.sliderStop);E.style.display="block"}},sliderWebkitApply:function(E,D){E.style.webkitTransform=D},sliderStop:function(D){if(this.slider_restore_visibility&&D!==true){this.slider_restore_visibility.style.visibility="visible";this.slider_restore_visibility=null;if(this.resview){this.resview.deviationSetPanes()}}if(this.slider_current){if(Browser.isTouch&&D!==true){this.slider_current.style.zIndex=5;setTimeout(this.sliderStop2,300)}else{this.sliderStop2()}}},sliderStop2:function(){if(this.slider_current&&this.slider_current.parentNode){this.slider_current.parentNode.removeChild(this.slider_current);this.slider_current=null}},sliderMake:function(E){var D;if(typeof E=="string"){D=document.createElement("div");D.className="surfer3 "+E}else{D=E.cloneNode(true);D.className="surfer3"}if(document.body){document.body.appendChild(D)}return D},beforeHijackStream:function(){console.log("preview.beforeHijackStream",this,this.base);this.base.apply(this,arguments);var D;if(D=this.messagesGetPager()){D.adSlice("hide")}if(this.gmi_args.gallery_owner){this.gmi_args.gallery_owner.hideAd()}if(this.scatter_hook){this.had_scatter_hook=this.scatter_hook;this.scatter_hook.unhook()}},afterRestoreStream:function(){console.log("preview.afterRestoreStream",this,this.base);this.base.apply(this,arguments);var D;if(this.had_scatter_hook){this.had_scatter_hook.hook()}if(D=this.messagesGetPager()){D.adSlice("show");setTimeout(bind(D,D.adSlice,"position"),1)}if(this.gmi_args.gallery_owner){this.gmi_args.gallery_owner.showAd()}this.previewUpdatePager()},messagesGetPager:function(){var D;return window.Messages&&(D=Messages.getInstance())&&D.local["message pager 0"]}});window.PreviewStream=ResourceStream.extend(OUTLINE_PreviewStream);PreviewStream.scrollTo=function(D){if(window.scrollTo){window.scrollTo(0,D)}else{(Browser.isGecko?document.documentElement:document.body).scrollTop=D||0}};PreviewStream.gmiEmbed=function(G,E){var D,F;for(D in E){if(!(D in G.gmi_args)){G.gmi_args[D]=E[D]}else{console.log("Unable to arg "+D)}}for(D in OUTLINE_PreviewStream){if(D=="gmiConstructor"){continue}F={};F[D]=OUTLINE_PreviewStream[D];G.extend(F)}G.previewOnlyConstructor()};DeviationExtras=GMIBase.extend({gmiConstructor:function(){this.gmi_node.style.display="none";this.active=1;this.gmi_args.loader.setRequest(this.gmi_args.id,this,this.gmi_args.loader.LOADER_WANT_IMAGE)},gmiDestructor:function(){this.gmi_args.loader.setRequest(this.gmi_args.id,this,this.gmi_args.loader.LOADER_NOT_NEEDED);GMI._delete(GMI.query(this.div2||this.gmi_node,"ResourceViewFaveButton",null,1));GMI._delete(GMI.query(this.div2||this.gmi_node,"ResourceViewPrintButton",null,1));GMI._delete(GMI.query(this.div2||this.gmi_node,"ResourcePageLowerAd",null,1));GMI._delete(GMI.query(this.div1||this.gmi_node,"TalkPostWrapper",null,0));if(this.div1){if(this.div1.parentNode){this.div1.parentNode.removeChild(this.div1)}this.div1.innerHTML="";delete this.div1}if(this.div2){if(this.div2.parentNode){this.div2.parentNode.removeChild(this.div2)}this.div2.innerHTML="";delete this.div2}this.active=0},ERROR_STRING_START:'<div class="ch-ctrl" style="padding:16px"><strong>An error occurred while displaying this deviation:</strong><br>"',ERROR_STRING_MID:'"<br><br>Please visit <a style="text-decoration:underline" href="',ERROR_STRING_END:'">the deviation page</a> to try again.</div>',run:function(D){if(!this.active){return }DiFi.pushPrivateGet("DeviationView","getExtrasHTML",[this.gmi_args.id,"",this.gmi_args.difi_args||{}],bind(this,this.run2,D?D.pull():null));DiFi.timer(100)},run2:function(H,K,J){var G,F,D,E,I;if(H){H(K)}if(!this.active){return }if(!window.block_next_dyn_tracker){if(window.pageTracker){pageTracker._setDomainName(".deviantart.com");pageTracker._trackPageview("/user/art/difi/?"+String(window.location.hash).replace(/^#/,""))}if(window.QuantcastHelper){QuantcastHelper.replaceLabelAll("Dynamic.Deviation")}console.log(">Track")}else{window.block_next_dyn_tracker=0}D=this.gmi_args.owner;G=document.createElement("div");G.innerHTML=K?J.response.content.html_col1||"":this.ERROR_STRING_START+DiFi.stdErrFormat(J.response.content).replace(/</g,"")+this.ERROR_STRING_MID+"http://www.deviantart.com/view/"+this.gmi_args.id+"/"+this.ERROR_STRING_END;D.about_node.appendChild(G);this.div1=G;if(!K){return }F=document.createElement("div");F.innerHTML=J.response.content.html_col2||"";D.meta_node.appendChild(F);this.div2=F;DWait.ready("jms/pages/talkpost.js",DWait.bind(GMI,GMI.query,[G,"TalkPostWrapper"]));if(window.MessagePreviewStream&&D.owner_stream&&(D.owner_stream instanceof MessagePreviewStream)){I=GMI.query(F,"ResourceViewMessageButton");for(E=0;E!=I.length;E++){I[E].render()}}I=GMI.query(G,"GPageButton").concat(GMI.query(G,"GMoodButton"));for(E=0;E!=I.length;E++){I[E].gmi_node.onclick=this._clickOut}GMI.query(F,"ResourceViewFaveButton");GMI.query(F,"ResourceViewPrintButton");this.lower_ad=GMI.query(F,"ResourcePageLowerAd")[0];if(this.lower_ad){this.lower_ad.refresh(D.gmi_args.id,D.selection_is_mature,D.selection_catid)}D.adjust();if(window.gWebPage){gWebPage.update(J.response.content)}if(window.Admin&&Admin.active){Admin.hide();Admin.show()}},adjust:function(){if(this.lower_ad){this.lower_ad.position()}},_clickOut:function(I){var G,D,J,F,H,E;G=this;D=GMI.up(G,"DeviationExtras")||GMI.query("DeviationExtras")[0];H={};J=(String(G.href).split("#")[0].split("?",2)[1]||"").split("&");for(F=0;F!=J.length;F++){E=J[F].split("=",2);if(E[0] in {t:1,"c[]":1,"c%5B%5D":1}){continue}H[E[0]]=E[1]}D.fakeReboot(H);(I||window.event).cancelBubble=true;return false},fakeReboot:function(D){this.gmiDestructor();this.gmi_args.difi_args=D;this.gmiConstructor()}});if(!window.GPageButton){window.GPageButton=GMIBase.extend({gmiConstructor:function(){}})}if(!window.GMoodButton){window.GMoodButton=GMIBase.extend({gmiConstructor:function(){}})}PreviewStreamControls=GMIBase.extend({gmiConstructor:function(){var D;this.gmi_node.style.display="none";this.gmi_node.innerHTML=this.template;D=this.gmi_node.getElementsByTagName("div");this.stream_switcher_node=D[1];this.stream_overlay_node=D[2];this.streamSwitcherDone=bind(this,this.streamSwitcherDone);this.mouseOver=bind(this,this.mouseOver);this.mouseOut=bind(this,this.mouseOut);this.resize=bind(this,this.resize);this.switcher=new LiquidSwitch(bind(this,this.streamSwitcher),"off");this.gmi_node.onmousemove=this.mouseOver;this.gmi_node.onmouseout=this.mouseOut},gmiDestructor:function(){delete this.switcher},template:('<a class="lrx l-arrow lldr" href="" onmousedown="GMI.up(this).left();" onclick="return GMI.evCancel()"><span class="slrx"></span></a> <a class="lrx r-arrow rrdr" href="" onmousedown="GMI.up(this).right();" onclick="return GMI.evCancel()"><span class="slrx"></span></a> <a class="lrx r-arrow lldr lr-small" href="" onmousedown="GMI.up(this).left();" onclick="return GMI.evCancel()"><span class="slrx"></span></a> <a class="lrx l-arrow rrdr lr-small" href="" onmousedown="GMI.up(this).right();" onclick="return GMI.evCancel()"><span class="slrx"></span></a> <a class="lrx x-arrow h-ignore" href="" onclick="GMI.up(this).back();return GMI.evCancel()"><span class="flrx h-ignore">show all</span><span class="slrx h-ignore"></span></a> <a class="lrx x-text" href="" onclick="GMI.up(this).back();return GMI.evCancel()">show all</a> <div class=overlay-stream style="display:none"><div class=overlay-switches></div><div class=overlay-stream-inner></div></div>'),back:function(){this.stream.preview_selector.setSelection(null,"escape")},left:function(){this.stream.preview_selector.setRelativeSelection(-1);this.stream.preview_selector.scroll(-1,"x")},right:function(){this.stream.preview_selector.setRelativeSelection(1);this.stream.preview_selector.scroll(1,"x")},play:function(){this.stream.sitbackPlay()},pause:function(){this.stream.sitbackStop()},hijackStream:function(E,D){this.pending_stream_hijack=E;if(D){this.hijackStreamActual()}},hijackStreamActual:function(){var D,E;if(!(E=this.pending_stream_hijack)){return }this.pending_stream_hijack=null;D=E.gmiUp();if(D){this.stream_overlay_node.setAttribute("gmi-redirect",D.gmi_node.getAttribute("gmindex"))}if(E.beforeHijackStream){E.beforeHijackStream()}this.old_stream_parent=E.gmi_node.parentNode;this.old_stream_sibling=E.gmi_node.nextSibling;this.old_stream_count=E.gs_count_per_page;this.current_stream=E;this.resize();this.stream_overlay_node.appendChild(E.gmi_node);Events.hook(window,"resize",this.resize)},changeStreamProps:function(F,D,E){console.log("Changing stream props: "+(D||("*"+(F||{}).gs_offset))+" / "+E);if(F.previewChangeProps){F.previewChangeProps(D,E)}else{F.gs_count_per_page=E;if(D!=null&&D>=0){F.gs_offset=D-(D%F.gs_count_per_page)}else{F.gs_offset-=F.gs_offset%F.gs_count_per_page}F.domClearAll();F.domDrawRange(F.gs_offset,F.gs_count_per_page)}},restoreStream:function(D){if(this.pending_stream_hijack){this.pending_stream_hijack=null;return }Events.unhook(window,"resize",this.resize);this.changeStreamProps(D,null,this.old_stream_count);D.domDrawRange(D.gs_offset,D.gs_count_per_page);if(this.old_stream_parent&&this.old_stream_parent.parentNode){if(this.old_stream_sibling&&this.old_stream_sibling.parentNode==this.old_stream_parent){this.old_stream_parent.insertBefore(D.gmi_node,this.old_stream_sibling)}else{this.old_stream_parent.appendChild(D.gmi_node)}}if(D.afterRestoreStream){D.afterRestoreStream()}},resize:function(){var D,E,G,F;D=this.current_stream;F=Math.floor((Ruler.screen.rect().x2-178)/(205*0.75));if(this.current_stream.gs_count_per_page==F){return }E=D.preview_selector.getSelection(true);for(G in E){break}this.changeStreamProps(D,Number(G)+D.gs_offset,F)},streamSwitcher:function(F,D){var G,E;G=this.stream_overlay_node.parentNode;E=Ruler.screen.rect();switch(F){case"on":this.hijackStreamActual();if(Browser.isTouch||(window.innerHeight||document.body.clientHeight)<460){return }Station.stopAnimation(G);this.gmi_node.className+=" lrx-alt";if(this.mouse){Station.run(G,"opacity",{from:0,to:1,time:75,f:Interpolators.sineCurve})}else{Station.apply(G,"opacity",1)}G.style.display="block";if(window.Popup&&!this.ads_hidden){this.ads_hidden=true;Popup.toggleIFrames(false,{x:0,y:Math.max(0,E.y2-132),x2:E.x2,y2:E.y2})}break;case"off":Station.push(G,"opacity",{from:1,to:0,time:175,f:Interpolators.sineCurve},this.streamSwitcherDone);if(window.Popup&&this.ads_hidden){this.ads_hidden=false;Popup.toggleIFrames(true,{x:0,y:Math.max(0,E.y2-132),x2:E.x2,y2:E.y2})}break}},streamSwitcherDone:function(){this.stream_overlay_node.parentNode.style.display="none";this.gmi_node.className=this.gmi_node.className.replace(/\s*\blrx.alt\b/g,"")},mouseOver:function(E){var D;E=E||event;if(document.body.className.indexOf("fullview")>=0){return }if(((E.srcElement||E.target).className||"").indexOf("h-ignore")>=0){return }this.switcher.change("on",150,0);this.mouse=1},mouseOut:function(D){if(!this.flash_timer){this.switcher.change("off",200,100)}this.mouse=0},flash:function(D){if(this.mouse){return }this.switcher.change("on",0,0);if(this.flash_timer){clearTimeout(this.flash_timer);this.flash_timer=null}this.flash_timer=setTimeout(bind(this,function(){this.flash_timer=null;if(this.mouse){return }this.switcher.change("off",100,150)}),D||500)},updateState:function(F,G){var E,D;for(E=0;E!=2;E++){D=["lldisabled","rrdisabled"][E];if(arguments[E]&&this.gmi_node.className.indexOf(D)>=0){this.gmi_node.className=this.gmi_node.className.replace(RegExp(D,"g"),"")}else{if(!arguments[E]&&this.gmi_node.className.indexOf(D)<0){this.gmi_node.className+=" "+D}}}}});window.PreviewStreamSelection=ResourceStreamSelection.extend({onclick:function(E){var D;E=E||window.event;D=E.target||E.srcElement;while(D.tagName!="A"&&(D=D.parentNode)){}if(!(D&&(D.href.match(REG_DEVIATION_2)||D.href.match(REG_OLD_DEVIATION_2)))){return true}return this.base(E)},select:function(D){D.className+=" ps-selected"},deselect:function(D){D.className=D.className.replace(/\s+\bps.selected\b/g,"")},isSelected:function(D){return(D.className||"").indexOf("ps-selected")>=0},isSelectable:function(E){var D;if(!this.base(E)){return false}D=OUTLINE_PreviewStream.previewLinkFromThumb(E);return Boolean((E.className||"").indexOf("placeholder")>=0||(E.className||"").indexOf("tt-special")>=0||(D&&(D.href.match(REG_DEVIATION_2)||D.href.match(REG_OLD_DEVIATION_2))))},setRelativeSelection:function(F){var I,D,H,G,E;I=this.getSelection(true);G=this.preview_stream_owner;for(D in I){D=Number(D);I=this.getAllSelectable();if((D+F)<0&&G.gs_offset>0){E=Math.max(0,G.gs_offset-G.gs_count_per_page);this.setSelection(null,"temporary_blank_selection");G.previewLoadOffset(E);I=this.getAllSelectable();return this.setSelection(I[I.length-1],"relative")}else{if(D+F>=G.gs_count_per_page||(F>0&&D==I.length-1)){E=G.gs_offset+G.gs_count_per_page;if(E>G.contents.length){return }this.setSelection(null,"temporary_blank_selection");G.previewLoadOffset(E);I=this.getAllSelectable();return this.setSelection(I[0],"relative")}}break}this.base(F)},setSelection:function(E,D){if(E&&this.isSelected(E)){this.callback(this.getSelection(),[],D);return true}return this.base(E,D)},onkeydown:function(E){var D;if(!this.preview_active){return true}D=this.base(E);return D}});MessagePreviewStream=PreviewStream.extend({gmiConstructor:function(){Events.hook(document.documentElement,Browser.isGecko?"keypress":"keydown",this.onkeydown=bind(this,this.onkeydown));this._msgSelLast=bind(this,this._msgSelLast);this.pager=this.gmi_args.owner;this.base()},gmiDestructor:function(){Events.unhook(document.documentElement,Browser.isGecko?"keypress":"keydown",this.onkeydown);this.base()},previewOnlyConstructor:function(){this.preview_override_selection_type=MessagePreviewStreamSelection;this.base()},domFindVisible:function(){var D,E,G,F;E={};F=0;for(D=0;G=this.gmi_node.childNodes[D];D++){if((G.className||"").indexOf("mcbox")>=0){E[(F++)+this.gs_offset]=G}}return E},domReadMeta:function(){this.gs_offset=this.pager.offset;this.gs_count_per_page=this.pager.count_per_page;this.gs_fetch_size=Math.max(24,this.gs_count_per_page);this.gs_fetch_bank=0},domClearAll:function(){if(this.resview){this.base.apply(this,arguments)}},dataFetch:function(){},domDrawRange:function(){if(this.resview){this.base.apply(this,arguments)}},previewChangeProps:function(F,E){var D;this.pager.count_per_page=E;this.pager.loadPage(Math.floor(((F==Number(F))?F:this.pager.offset)/E))},domRemoveItem:function(F){var D,E;if(this.preview_selector.isSelected(F)){D=F.nextSibling;E=1}this.base(F);if(D&&this.preview_selector.isSelectable(D)){this.preview_selector.setSelection(D,"draw")}else{if(E){setTimeout(this._msgSelLast,1)}}},_msgSelLast:function(){var D;D=this.preview_selector.getAllSelectable();this.preview_selector.setSelection(D[D.length-1]||null,"draw")},messageMarkSelectionAsRead:function(){var D;D=this.preview_selector.getSelection()[0];if(D){MessageBox.pubEvent(D.firstChild,"click","x")}else{console.log("totally impossible: mark as read without selection")}},onkeydown:function(F){var D,E;F=F||event;if(F.ctrlKey||F.metaKey||F.altKey||F.shiftKey){return true}if((F.target||F.srcElement).tagName in {TEXTAREA:1,INPUT:1}){return true}if(F.keyCode==88){this.messageMarkSelectionAsRead();return false}return true},streamSelect:function(F,E,D){this.base(F,E,D);if(F){}}});MessagePreviewStreamSelection=PreviewStreamSelection.extend({isSelectable:function(E){var D;if(E.parentNode==this.root&&(" "+(E.className||"")+" ").indexOf("mcbox")>=0){D=OUTLINE_PreviewStream.previewLinkFromThumb(E);return Boolean((E.className||"").indexOf("placeholder")>=0||(D&&(D.href.match(REG_DEVIATION_2)||D.href.match(REG_OLD_DEVIATION_2))))}return false}});TextBoxPreviewStream=PreviewStream.extend({gmiConstructor:function(){var D;this.stream_hijack_immediate=1;this.backup_nodes=[];for(D=0;this.backup_nodes[D]=this.gmi_node.childNodes[D];D++){}this.backup_class=this.gmi_node.className;this.gmi_node.onclick=bind(this,this.previewClick);this.override_selector_click=1;this.base()},domReadState:function(){var D,E,F;E=this.textboxFindVisible();for(D in E){if(E.constructor.prototype[D]){continue}this.contents[D]=this.domReadOne(E[D])}this.gs_total=this.contents.length},textboxFindVisible:function(G){var F,H,I,D,E;H={};c=0;E=this.gmi_node.getElementsByTagName("span");for(F=0;I=E[F];F++){if((I.className||"").indexOf("shadow-holder")>=0){D=document.createElement("div");D.className="tt-a";D.appendChild(document.createElement("span"));D.firstChild.className="tt-w";D.firstChild.appendChild(I.getElementsByTagName("*")[0].cloneNode(true));I.setAttribute("ps_offset_hint",c);H[c++]=D||I}}return H},previewClick:function(F){var E,D;F=F||event;if(F.ctrlKey||F.metaKey||F.altKey||F.shiftKey){return true}E=F.target||F.srcElement;while((E=E.parentNode)&&E.tagName!="A"){}if(!E){return true}if((E.href||"").match(/^http...www.deviantart.com.print.*$/)){return true}while((E=E.parentNode)&&(E.className||"")!="shadow-holder"){}if(!E){return true}D=Number(E.getAttribute("ps_offset_hint"));E=E.getElementsByTagName("*")[0];this.previewEnsure();this.preview_controls.changeStreamProps(this,D,this.gs_count_per_page);this.preview_selector.setSelection(this.preview_selector.getAllSelectable()[D-this.gs_offset],"click");F.cancelBubble=true;return false},beforeHijackStream:function(){this.hijcacked=1;while(this.gmi_node.firstChild){this.gmi_node.removeChild(this.gmi_node.firstChild)}this.gmi_node.className="stream"},afterRestoreStream:function(){while(this.gmi_node.firstChild){this.gmi_node.removeChild(this.gmi_node.firstChild)}for(i=0;this.backup_nodes[i];i++){this.gmi_node.appendChild(this.backup_nodes[i])}this.gmi_node.className=this.backup_class;this.hijcacked=false},dataFetch:function(){},domDrawRange:function(E,D){if(this.gmi_node.className=="stream"){this.base(E,D)}}});ResourcePagePreviewStream=PreviewStream.extend({gmiConstructor:function(){this.resource_page_initial_fetch=1;this.base();Selection.focused=this.preview_selector},streamSelect:function(G,F,E){var D=0;for(D in G){break}if(!(E in {temporary_blank_selection:1,relative:1})){if(!G[D]){return window.location.href=this.gmi_args.url}}if(!this.hijacked_already&&this.resview){if(deviantART.pageData.overlay_sponsor){this.resview.meta_node.innerHTML='<div id="gmi-ResourcePageAd" name="gmi-ResourcePageAd"></div>';this.resview.ad=GMI.query(this.preview_node,"ResourcePageAd")[0]}this.hijacked_already=1}return this.base(G,F,E)},previewEnsure:function(E,F){var G,D;if(this.preview_node){this.preview_node.style.height=(Ruler.screen.rect().y2+(Browser.isIE?32:0))+"px";return }G=this.preview_node=document.getElementById("dv7");if(Browser.isIE){G.style.height=(Ruler.screen.rect().y2+(Browser.isIE?32:0))+"px"}else{G.style.minHeight=(Ruler.screen.rect().y2+(Browser.isIE?32:0))+"px"}G.setAttribute("gmi-redirect",this.gmi_node.getAttribute("gmindex"));this.resview=GMI.query("ResViewContainer")[0];this.resview.owner_stream=this;document.getElementById("depths").style.display="none";document.getElementById("output").style.display="block";this.preview_selector.preview_active=1;if(this.preview_controls){this.preview_controls.hijackStream(this);this.preview_controls.gmi_node.style.display="block"}da_preview_master.current_stream=this;if(this.resview){this.resview.autoFullView()}},dataAdd:function(){var F,D,E;this.base.apply(this,arguments);if(this.resource_page_initial_fetch){F=this.domFindVisible();for(D in F){E=this.contents[D];if(E&&E[2]&&E[0]==RESOURCE_DEVIATION&&E[1]==Number(deviantART.pageData.deviationid)){this.preview_selector.select(E[2]);break}}this.resource_page_initial_fetch=0}}});var B=function(){var D;D=document.title;D=D.replace(/\bon deviantART\b/g,"");D=D.replace(/\bdeviantART:?\b/g,"");D=D.replace(/\s+/g," ");D=D.replace(/(?:^\s|\s$)/g,"");return D};var C=function(E){var D;while(E=E.parentNode&&!(D=(E.getElementsByTagName("h2")||[])[0])){}if(D){return D.innerText||D.textContent}return B()};var A=function(){var G,H,D,E,F;H=Tree.gets("div.stream");for(G=0;G!=H.length;G++){if(H[G].getAttribute("preview-stream-disabled")){continue}D=H[G].getElementsByTagName("smoothie")[0];F={count_per_page:D?D.getAttribute("count_per_page"):null,query:D?D.getAttribute("q"):null,sitback_autoplay:0,tv_start_mode:4,title:(D&&D.getAttribute("label"))||B()};if((H[G].getAttribute("name")||"").substr(0,4)=="gmi-"){PreviewStream.gmiEmbed(E=GMI.getOne(H[G]),F)}else{E=GMI.apply(H[G],"PreviewStream",F,1)}}H=Tree.gets("div.text");for(G=0;G!=H.length;G++){F={count_per_page:24,query:"",sitback_autoplay:0,tv_start_mode:4,title:C(H[G])};GMI.apply(H[G],"TextBoxPreviewStream",F,1)}};PreviewMaster=Base.extend({constructor:function(){da_preview_master=this;this.last_sent_id=0;this.main_streams=[];if(document.getElementById("dv7")){GMI.query("ResourcePagePreviewStream")[0].previewEnsure()}else{A()}this.urlm=new URLBrowseLink({deviationid:null});this.urlm.addListener(bind(this,this.urlf),true);if(this.current_stream){window.block_next_dyn_tracker=1}},destructor:function(){if(this.urlm){this.urlm.removeListener(this.urlf);delete this.urlm}},urlf:function(H,I){var F,D,E,G,J;J=Number(H.deviationid);if((J||0)==this.last_sent_id){return }this.last_sent_id=J;for(F=-1;F!=this.main_streams.length;F++){if(F<0){E=this.current_stream}else{E=this.main_streams[F];if(E==this.current_stream){continue}}if(!E){continue}if(J){for(D=0;D!=E.contents.length;D++){G=E.contents[D];if(!G){continue}if(Number(G[0])==RESOURCE_DEVIATION&&Number(G[1])==J){if((G[2]||{}).nodeType){if(E.preview_selector.isSelectable(G[2])){E.preview_selector.setSelection(G[2],"url")}else{E.loadImage(G[2],J)}return }else{console.log("Found, but unable to select deviation: "+J)}}}}if(this.current_stream==E&&J){return }else{if(this.current_stream==E){E.preview_selector.setSelection(null,"url")}}}if(!J){return }console.log("Unable to display "+J+" in an existing stream; creating backup");preview_stream=GMI.create("PreviewStream",{count_per_page:24,query:"",sitback_autoplay:0,tv_start_mode:4});preview_stream.gmi_node.style.display="none";if(document.body){document.body.appendChild(preview_stream.gmi_node)}this.main_streams.push(preview_stream);preview_stream.contents=[G=[1,J,document.createElement("div")]];G[2].className="tt-a placeholder";G[2].setAttribute("collect_rid","1:"+J);preview_stream.gmi_node.appendChild(G[2]);preview_stream.preview_selector.setSelection(G[2],"url")},url:function(D){this.last_sent_id=Number(D.deviationid)||0;this.urlm.set(D)}});DevMatureZone=GMIBase.extend({gmiConstructor:function(){if(DevMatureZone.cache[this.gmi_args.id]){this.display()}},display:function(){this.gmi_node.firstChild.style.display="none";this.gmi_node.firstChild.nextSibling.style.display="block";DevMatureZone.cache[this.gmi_args.id]=1}});DevMatureZone.cache={};PreviewLoaderQueue=Base.extend({LOADER_WANT_IMAGE:1,LOADER_NOT_NEEDED:2,LOADER_FAILED:3,constructor:function(D,E){this.queue={};this.args=D;this.debug_label=E;this.current_pid=1000},setRequest:function(H,E,F,G){var D;H="d"+H;D=(this.queue[H]||{});if(!D.working&&F==this.LOADER_NOT_NEEDED){if(this.queue[H]&&this.queue[H].cbc){this.queue[H].cbc.failures.push({err:"DO_NOT_WANT",human:"No longer desired"});this.queue[H].cbcf()}this.queue[H]=null;delete this.queue[H]}else{this.queue[H]={state:F,working:D.working||0,node:E,cbc:G,cbcf:G&&G.pull()}}this.runRequests()},queueCount:function(){var D,E=0;for(D in this.queue){E++}return E},runRequests:function(){var I=1,E,F,H,G,D;E=0;for(D=0;D!=2;D++){for(F in this.queue){H=this.queue[F];if(D==0&&H.working){E++}else{if(D==1&&H.state==this.LOADER_WANT_IMAGE&&!H.working){E++;H.working=1;H.pid=this.current_pid++;setTimeout(bind(this,this.requestDone,F,false,H.pid),8000);G=new CBC(bind(this,this.requestDone,F));this.args.callback(F,H.node,G);G.start()}}if(E>=I){break}}}},requestDone:function(F,G,E){var D;if(G===false){if(this.queue[F]&&(!E||E==this.queue[F].pid)){this.queue[F].working=0}else{this.runRequests();return }}else{D=1}if(this.queue[F]&&this.queue[F].cbc){if(!G){this.queue[F].cbc.failures.push(E?"Loading timeout":"Unknown Failure")}this.queue[F].cbcf()}if(D){delete this.queue[F]}this.runRequests()}});ResourceViewMessageButton=GMIBase.extend({gmiConstructor:function(){},render:function(){this.gmi_node.innerHTML='<a class="smbutton" href="#" onclick="GMI.up(this).markAsRead();return GMI.evCancel()"><span><i class="i23"></i> Remove from Messages</span></a>';this.gmi_node.style.marginBottom="20px";this.gmi_node.style.display="block"},markAsRead:function(){this.gmiUp("ResViewContainer").owner_stream.messageMarkSelectionAsRead()}});ResourceViewFaveButton=GMIBase.extend({gmiConstructor:function(){this.alive=1;this.refresh()},gmiDestructor:function(){this.alive=0},set:function(G,H,E){var F,D;if(this.alive){if(G){F=this.gmi_node.getElementsByTagName("i")[0];F.className="icon "+G}D=this.gmi_node.getElementsByTagName("b")[0];D.innerHTML=H;D.style.color=E||"#121516"}},get:function(E,F){var D;D=this.gmi_node.getElementsByTagName("b")[0];return D.textContent||D.innerText},send:function(){var D;if(this.busy){return }this.busy=1;D=this.get().substr(0,3)=="Add";this.set("i11",D?"Adding...":"Removing...");DiFi.pushPost("Deviation","Favourite",[this.gmi_args.id],bind(this,this.got),this);DiFi.timer(1)},got:function(F,E){var D;this.busy=0;if(F){D=this.get().substr(0,3)=="Add";this.set("i11",D?"Thanks!":"Removed",D?"#196BA7":null);ResourceViewFaveButton.cache[this.gmi_args.id]=D;this.busy=1;setTimeout(bind(this,this.reset),2500);if(D){setTimeout(bind(this,this.popupReminder),400)}}else{this.reset(true);DiFi.stdErr("Unable to +favourite",E.response.content)}},refresh:function(){if(ResourceViewFaveButton.cache[this.gmi_args.id]!==undefined&&!this.busy&&this.alive){this.reset(null,ResourceViewFaveButton.cache[this.gmi_args.id])}},reset:function(E,F){var D;this.busy=0;if(F===true||F===false){D=F}else{D=Number(E===true)^Number(this.get().substr(0,3) in {Tha:1,Add:1})}this.set(D?"i10":"i3",D?"Remove from Favourites":"Add to Favourites")},popupReminder:function(){var D,E;if(this.alive&&!(window.TalkPostWrapper||{}).one_comment_posted){D=document.getElementById("artist-comments");D=(D&&D.getElementsByTagName("img")||[])[0];if(D&&GMI.query("TalkPostWrapper")[0]){E=Popup.create({className:"darkspeech",no_shadow:1,bias:"bottom"});E.node.innerHTML="<div class=dsp>&nbsp;</div><i class=pbq></i>";E.node.onclick=function(){GMI.query("TalkPostWrapper")[0].talkpost.focus();Popup.completeAll()};Popup.show(E,Ruler.screen.node(D));Station.push(E.node.firstChild.firstChild,"nodeValue",{from:"",to:"Don't forget to\nadd a comment!",time:500,f:Interpolators.line})}}}});ResourceViewFaveButton.cache={};ResourceViewPrintButton=ResourceViewFaveButton.extend({send:function(){var D;if(this.busy){return }this.busy=1;this.set("","Sending...");DiFi.pushPost("Deviation","RequestPrint",[this.gmi_args.id],bind(this,this.got),this);DiFi.timer(1)},got:function(F,E){var D;this.busy=0;if(F){this.set("","Request Sent!");this.busy=1;setTimeout(bind(this,this.reset),2500);if(D){setTimeout(bind(this,this.popupReminder),400)}}else{this.reset(true);DiFi.stdErr("Unable to +favourite",E.response.content)}},refresh:function(){},reset:function(){this.set("","Request as Print");GMI._delete(this)}});ResourceViewCollectButton=ResourceViewFaveButton.extend({gmiConstructor:function(){this.base();this.mouseup_handler=bind(this,this.mouseup_handler);Events.hook(document.documentElement,"mouseup",this.mouseup_handler)},gmiDestructor:function(){this.base();Events.unhook(document.documentElement,"mouseup",this.mouseup_handler)},send:function(){if(this.ignore_onclick){this.ignore_onclick=0;return false}if(!this.busy){return this.on()}return this.off()},on:function(){if(this.busy){return false}this.busy=1;var E,D;E=document.getElementById("deviation-collect-bubble");if(!E){return false}if(Browser.isIE){if(E.firstChild.tagName.toLowerCase()!="iframe"&&document.getElementsByTagName("iframe").length){E.insertBefore(document.createElement("iframe"),E.firstChild)}}if(E.style.display!="block"){D=!document.getElementsByTagName("film").length;if(D){E.style.left="0px";E.style.top="-25px";E.style.position="relative"}else{E.style.left="152px";E.style.top=(Ruler.document.node(document.getElementById("collect-button")).y-(D?Ruler.screen.rect().y2:-7)-6)+"px"}E.style.display="block"}return false},off:function(){if(!this.busy){return }this.busy=0;var D=document.getElementById("deviation-collect-bubble");D.style.display="none"},mouseup_handler:function(E,D){if(this.busy&&(D.id=="gmi-ResourceViewCollectButton"||D.parentNode.id=="gmi-ResourceViewCollectButton"||D.parentNode.parentNode.id=="gmi-ResourceViewCollectButton")){this.ignore_onclick=1}if(!Tree.ancestor(D,"#deviation-collect-bubble")){if(this.busy){setTimeout(bind(this,this.off()),500)}}},got:function(E,D){},refresh:function(){},reset:function(){this.set("","Request as Print");GMI._delete(this)}});RESVIEW_OUTLINE={gmiConstructor:function(){},gmiDestructor:function(){},deviationChangeView:function(D){this.gmiUp().deviationChangeView(D)}};ResourcePageDisplayPane=GMIBase.extend(RESVIEW_OUTLINE);ResourcePageMetaPane=GMIBase.extend(RESVIEW_OUTLINE);ResourcePageAboutPane=GMIBase.extend(RESVIEW_OUTLINE);ResourcePageAd=GMIBase.extend({gmiConstructor:function(){this.position=bind(this,this.position);this.refresh2=bind(this,this.refresh2);this.z=new AdZone([" "," "],{section:"deviation"},"300x250",this.gmi_args.timer||8,null);this.z.frame_zone=this.gmi_args.frame_zone;this.z.no_ignores=1;this.z.allow_key_changes=1;this.z.no_refetch_while_busy=1;this.z.always_flush_difi=1;this.reset(300,250,0,1);this.gmi_node.className="smshadowbg";this.gmi_node.style.marginBottom="7px";this.gmi_node.style.position="relative"},gmiDestructor:function(){this.z.destructor();delete this.z},reset:function(E,H,D,G){var F;this.gmi_node.style.width=E+"px";this.gmi_node.style.height=H+"px";F=E+"x"+H;this.z.master_anchor=this.gmi_node;this.z.size=F;this.mature=D;if(!G){this.refresh()}},hide:function(){this.z.hide();this.gmi_node.style.display="none"},refresh:function(F,D,E){if(F!=undefined){if(this.last_id==F&&D==this.mature){return }this.last_id=F}console.log("Hiding ad");this.z.hide();this.gmi_node.style.display="block";if(D!=undefined){this.mature=D}this.z.keys.catid=E||0;this.z.keys.deviationid=F||0;this.z.need(this.mature,0);this.refresh2()},refresh2:function(){this.z.show();this.z.position()},position:function(D){if(D===true){this.z.hide();this.z.position();setTimeout(this.refresh2,150)}else{this.z.position()}}});ResourcePageLowerAd=ResourcePageAd.extend({});ResViewSizer_img=ResViewSizer_fullimg=ResViewSizer_linkzone=GMIBase.extend({gmiConstructor:function(){this.active=1}});ResViewSizer_description=GMIBase.extend({gmiConstructor:function(){this.active=1;this.onscroll=bind(this,this.onscroll);Events.hook(window,"scroll",this.onscroll);Events.hook(window,"mousewheel",this.onscroll)},gmiDestructor:function(){Events.unhook(window,"scroll",this.onscroll);Events.unhook(window,"mousewheel",this.onscroll)},onscroll:function(D){this.expand();GMI._delete(this,1)},expand:function(D){this.active=0;if(!this.expanded&&this.gmi_node.firstChild&&this.gmi_node.firstChild.offsetHeight>=120&&D!==false){Station.run(this.gmi_node,"opacity",{from:0.01,to:1,time:250,f:Interpolators.sineCurve})}this.expanded=1;this.gmi_node.style.height="auto";this.gmi_node.style.minHeight=0;this.gmi_node.className=this.gmi_node.className.replace(/\bdcutoff(?:.hover)?\b/g,"");(window.event||{}).cancelBubble=true;this.gmi_node.onmouseover=null;this.gmi_node.onmouseout=null;this.gmi_node.onclick=null},afterSize:function(){if(this.gmi_node.firstChild.offsetHeight<this.gmi_node.offsetHeight){this.expand(false)}}});ResViewContainer=GMIBase.extend({gmiConstructor:function(){if(vms_feature("no_super_browse")){return }this.active=1;this.adjust();this.adjust=bind(this,this.adjust);Events.hook(window,"resize",this.adjust);this.owner_stream=this.gmi_args.owner_stream;this.viewer_node=this.gmiQuery("ResourcePageDisplayPane")[0].gmi_node;this.about_node=this.gmiQuery("ResourcePageAboutPane")[0].gmi_node;this.meta_node=this.gmiQuery("ResourcePageMetaPane")[0].gmi_node;if(deviantART.pageData.overlay_sponsor){this.ad=ResViewContainer.ad;if(this.ad){if(this.meta_node.firstChild&&this.meta_node.firstChild.getAttribute("id")=="gmi-ResourcePageAd"){this.meta_node.replaceChild(this.ad.gmi_node,this.meta_node.firstChild)}}else{this.ad=GMI.query("ResourcePageAd")[0]}}this.updateDeviationPosition();if(!this.switcher){this.switcher=new LiquidSwitch(bind(this,this.loadingSwitcher),"off")}this.gmi_node.ontouchstart=bind(this,this.starDown);this.starMove=bind(this,this.starMove);this.starUp=bind(this,this.starUp);if(ResViewContainer.next_arrival){if(this.owner_stream.preview_controls){this.owner_stream.preview_controls.gmi_node.style.visibility="visible"}this.viewer_node.style.webkitTransform="translate3D("+(ResViewContainer.next_arrival<0?"-":"")+"600px,0,0)";this.viewer_node.className+=" webkit-ani";setTimeout(bind(this.viewer_node,function(){this.style.webkitTransform="translate3D(0,0,0)"}),1);ResViewContainer.next_arrival=0}},gmiDestructor:function(){var D;if(this.owner_stream){this.owner_stream.image_loader.setRequest(this.gmi_args.id,null,this.owner_stream.image_loader.LOADER_NOT_NEEDED);this.owner_stream.image_loader.setRequest(this.gmi_args.id+"f",null,this.owner_stream.image_loader.LOADER_NOT_NEEDED);this.owner_stream.html_loader.setRequest(this.gmi_args.id,null,this.owner_stream.html_loader.LOADER_NOT_NEEDED)}for(D in this.sizers){if(D!="resview"){GMI._delete(this.sizers[D],1)}}Events.unhook(window,"resize",this.adjust);if(this.loading_animating){Station.stopAnimation(this.loading_animating)}if(this.switcher){this.switcher.destroy(1);delete this.switcher}if(this.artificially_in_fullview&&!this.previously_in_fullview){this.deviationChangeView(0,1)}GMI._delete(this.gmiQuery("DevMatureZone",null,1));GMI._delete(this.gmiQuery("ResourcePageDisplayPane",null,1));GMI._delete(this.gmiQuery("DeviationExtras",null,1));GMI._delete(this.gmiQuery("ResourcePageAboutPane",null,1));GMI._delete(this.gmiQuery("ResourcePageMetaPane",null,1));if(this.ad){ResViewContainer.ad=this.ad}},adjust:function(){var D,E,F,G;this.sizers={resview:[this],img:this.gmiQuery("ResViewSizer_img"),fullimg:this.gmiQuery("ResViewSizer_fullimg"),linkzone:this.gmiQuery("ResViewSizer_linkzone"),description:this.gmiQuery("ResViewSizer_description")};if(!this.sizers.img[0]){for(D in this.sizers){for(E=0;E!=this.sizers[D].length;E++){if(G=(this.sizers[D][E]||{}).gmi_node){G.style.width=(D=="resview"?((window.innerWidth||document.body.clientWidth)-(172+(Browser.isIE?7:0)))+"px":"auto");G.style.height="auto"}}}}else{F=dsize_get(Number((G=this.sizers.img[this.sizers.img.length-1].gmi_node).getAttribute("width",2)),Number(G.getAttribute("height",2)),Number((G=(this.sizers.fullimg[this.sizers.fullimg.length-1]||{}).gmi_node||G).getAttribute("width",2)),Number(G.getAttribute("height",2)),(document.body.className||"").indexOf("fullview")>=0);for(D in F){for(E=0;E!=this.sizers[D].length;E++){if((G=this.sizers[D][E])&&G.active){if(G.gmi_node.tagName=="IMG"){G.gmi_node.style.marginTop=F[D]&&F[D].y?F[D].y+"px":"auto"}G.gmi_node.style.width=F[D]&&F[D].w?F[D].w+"px":"auto";G.gmi_node.style[Browser.isIE||G.gmi_node.tagName=="IMG"?"height":"minHeight"]=F[D]&&F[D].h?Math.max(0,F[D].h)+"px":"auto";if(G.afterSize){G.afterSize()}}}}}if(this.ad){this.ad.position()}if(this.owner_stream&&this.owner_stream.resview&&this.owner_stream.resview.res_extras){this.owner_stream.resview.res_extras.adjust()}},updateDeviationPosition:function(){if(document.body.className.indexOf("fullview")>=0){this.meta_node.parentNode.insertBefore(this.viewer_node,this.meta_node)}else{this.about_node.parentNode.insertBefore(this.viewer_node,this.about_node)}},loadingSwitcher:function(H,E){var D,G,F;if(this.loading_animating){Station.stopAnimation(this.loading_animating)}switch(H){case"loading_blank_before_text":this.viewer_node.innerHTML="";this.switcher.change("loading_text",950,0);break;case"loading_text":this.viewer_node.innerHTML='<h1 style="color:#607066;text-align:center;padding:4em 0">Loading...</h1>';this.loading_animating=n=this.viewer_node.firstChild;this.loadingPulse(n);break;case"error":this.viewer_node.innerHTML='<img src="about:blank" alt="[xx]">';break;case"ready":GMI._delete(GMI.query(this.viewer_node,"ResViewContainer",null,1));D=this.loaded_item;G=this.owner_stream.loaderItemRead(D);if(typeof G=="string"){this.viewer_node.innerHTML=G}else{this.viewer_node.innerHTML=G.innerHTML}if((document.getElementsByTagName("film")||"")[0]){if(window.console){console.log("this is film 1")}DWait.ready("jms/pages/film.js",function(){if(window.console){console.log("this is film 2")}Keeper2.master_on()})}if(DevMatureZone.cache[this.gmi_args.id]){this.gmiQuery("DevMatureZone")}this.adjust();this.autoFullView();if(this.owner_stream.preview_animated_origin){F=this.gmiQuery("ResViewSizer_img")[0];if(F){ds_rect=Ruler.document.node(F.gmi_node);if(Browser.isGecko){}if(!this.owner_stream.star_pressed){this.owner_stream.sliderGo(this.owner_stream.preview_animated_origin[0],this.owner_stream.preview_animated_origin[1],ds_rect);this.owner_stream.preview_animated_origin=null}else{this.owner_stream.star_dest_rect=ds_rect}}else{if(!this.owner_stream.star_pressed){this.owner_stream.sliderStop();this.owner_stream.preview_animated_origin=null}else{this.owner_stream.star_dest_rect=null}}}this.deviationViewChanged(1);break;default:throw new Error("Attempt to switch to invalid state: "+H)}},loadingPulse:function(){if(this.loading_animating){Station.run(this.loading_animating,"opacity",{from:0.3,to:0.99,time:700,f:Interpolators.sineCurve},{from:0.99,to:0.3,time:700,f:Station.f.inversion(Interpolators.sineCurve)},this.loadingPulse)}},deviationChangeView:function(D,E){if(this.touch_moved){return }PreviewStream.scrollTo(0);if(D){document.body.className+=" fullview"}else{document.body.className=document.body.className.replace(/\s*\bfullview\b/g,"")}this.updateDeviationPosition();if(!E){this.deviationViewChanged()}},deviationViewChanged:function(E){var D;if(this.gmi_deleted){return }D=document.body.className.indexOf("fullview")>=0;this.owner_stream.image_loader.setRequest(this.gmi_args.id+(D?"":"f"),null,this.owner_stream.image_loader.LOADER_NOT_NEEDED);this.owner_stream.image_loader.setRequest(this.gmi_args.id+(D?"f":""),this.viewer_node,this.owner_stream.image_loader.LOADER_WANT_IMAGE);this.adjust();if(this.ad&&!E){D=false;this.ad.position()}},autoFullView:function(){var D=this.viewer_node;if(this.artificially_in_fullview){return }this.previously_in_fullview=document.body.className.indexOf("fullview")>=0;this.artificially_in_fullview=D.getElementsByTagName("film").length||D.getElementsByTagName("iframe").length;if(this.artificially_in_fullview&&!this.previously_in_fullview){this.deviationChangeView(1)}},loadFromItem:function(D){var F,E;F=new CBC(bind(this,function(G,I){var H;if(this.gmi_deleted){return }this.loaded_item=G;if(I.failures.length){console.log("Read Error",I.failures);H="error"}else{H="ready"}this.switcher.change(H,0,0,true)},D));this.owner_stream.loaderItemReadOrGenerate(D,F);this.switcher.change("loading_blank_before_text",100,250);F.start();deviantART.pageData.deviationid=this.gmi_args.id;if(!this.owner_stream.slider_restore_visibility){this.deviationSetPanes()}},deviationSetPanes:function(){if(this.panes){return }this.panes=1;if(this.owner_stream){this.gmi_node.appendChild((this.res_extras=GMI.create("DeviationExtras",{owner:this,id:this.gmi_args.id,loader:this.owner_stream.extras_loader})).gmi_node)}},deviationRemovePanes:function(){if(!this.panes){return }if(window.Keeper2&&window.da_current_film){Keeper2.deleteOne(da_current_film)}GMI._delete(GMI.query(this.preview_node,"DeviationExtras"));this.res_extras=null},starDown:function(E){var D;E=E||event;D=E.target||E.srcElement;this.star_pressed=1;document.body.ontouchmove=this.starMove;document.body.ontouchend=this.starUp;document.body.ontouchcancel=this.starUp;this.touch_origin=E.touches[0].pageX;this.touch_screen_origin=E.touches[0].screenX;this.touch_slider_node=this.viewer_node;this.touch_moved=0},starMove:function(D){if(!this.touch_moved){if(Math.abs(this.touch_screen_origin-D.touches[0].screenX)<30){return }}this.meta_node.style.visibility="hidden";this.about_node.style.visibility="hidden";if(this.owner_stream.preview_controls){this.owner_stream.preview_controls.gmi_node.style.visibility="hidden"}this.touch_moved=1;if(this.touch_slider_node.className.indexOf("webkit-ani")>=0){this.touch_slider_node.className=this.touch_slider_node.className.replace(/\s*\bwebkit.ani\b/g,"")}this.touch_moved=1;this.touch_slider_node.style.webkitTransform="translate3D("+(D.touches[0].pageX-this.touch_origin)+"px,0,0)";this.touch_last_screen=D.touches[0].screenX},starUp:function(E){var D;document.body.ontouchmove=null;document.body.ontouchend=null;document.body.ontouchcancel=null;this.star_pressed=0;if(this.touch_moved){D=this.touch_screen_origin-this.touch_last_screen;if(Math.abs(D)>125){ResViewContainer.next_arrival=D;this.owner_stream.preview_selector.setRelativeSelection(D>0?1:-1)}else{this.touch_slider_node.className+=" webkit-ani";this.touch_slider_node.style.webkitTransform="translate3D(0,0,0)";this.meta_node.style.visibility="visible";this.about_node.style.visibility="visible";if(this.owner_stream.preview_controls){this.owner_stream.preview_controls.gmi_node.style.visibility="visible"}}}}});DWait.ready(".domready",DWait.bind(GMI,GMI.query,["ResViewContainer"]));if(!vms_feature("no_super_browse")){da_preview_master=new PreviewMaster()}if(window.DWait){DWait.run("jms/topsecret/overlay-browse.js")}});